{"version":3,"file":"ViewHistory.js","sources":["../../../src/components/views/helpers/Tabs.html","../../../src/components/views/casehistory/ViewHistoryStatic.html","../../../src/components/views/casehistory/ViewHistoryEdit.html","../../../src/components/views/casehistory/ViewHistory.html"],"sourcesContent":["<PageTabBar {getTotalSpace} {getAvailableSpace} type=\"boxed\" alignment=\"centered\">\r\n  {#each tabs as tab}\r\n    <li class={(tab.name == active_tab) ? 'is-active ' : ''}>\r\n      <a href={tab.link ? tab.link : 'javascript:void(0)'} on:click=\"set({active_tab: tab.name})\">\r\n        <Icon size=\"small\" icon={tab.icon} />\r\n        <span>{tab.title}</span>\r\n      </a>\r\n    </li>\r\n  {/each}\r\n</PageTabBar>\r\n\r\n<script>\r\n  import { Icon } from '@kws3/helpers';\r\n  import PageTabBar from '../../helpers/PageTabBar.html';\r\n\r\n  export default {\r\n    components: {\r\n      Icon,\r\n      PageTabBar\r\n    },\r\n    computed: {\r\n      tabs : ({ link, tabs, id, is_detailed_route }) => {\r\n        if(link) \r\n        {\r\n          tabs.forEach(e => {\r\n            if(e.default_route) {\r\n              e.link = e.is_detailed_route ? `javascript:void(0)` : `${link}/${id}/${e.default_route}`;\r\n            } else {\r\n              e.link = e.default_route ? `javascript:void(0)` : `${link}/${id}/${e.name}`;\r\n            }\r\n          });\r\n          return tabs;\r\n        }\r\n        return tabs;\r\n      },\r\n      is_detailed_route: ({ $nav }) => {\r\n        console.log($nav)\r\n        if ($nav && typeof $nav.params[1] != 'undefined') {\r\n          return $nav.params[1];\r\n        }\r\n        return false;\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        getTotalSpace(tabbar) {\r\n          var totalSpace = tabbar.children[0].clientWidth;\r\n          return totalSpace;\r\n        },\r\n        getAvailableSpace(tabbar, totalSpace) {\r\n          var availableSpace = tabbar.clientWidth;\r\n          return availableSpace;\r\n        },\r\n        tab_list: {},\r\n        active_tab: 'details'\r\n      }\r\n    }\r\n  }\r\n</script>","<div class=\"page-content\">\r\n  <!-- <PageTitle page=\"{page}\">\r\n    <a class=\"button is-info is-pulled-right\" href=\"#history\">\r\n      <Icon icon=\"long-arrow-left\" size=\"small\" />\r\n      <span>Back to All Histories</span>\r\n    </a>\r\n  </PageTitle> -->\r\n\r\n  <ViewScaffold {is_loading} {is_error} {error_message}>\r\n\r\n\r\n  <Panel title=\"Patient symptoms\" has_toolbar={true} >\r\n    <div slot='toolbar'>\r\n      \r\n    </div>\r\n\r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        {#if data.patient}\r\n          <p class=\"title is-5\">Patient Details</p>\r\n\r\n          <PatientDetails data={data.patient} />\r\n        {/if}\r\n      </div>\r\n      <div class=\"column\">\r\n        <Message title=\"Records\" color='light'>\r\n          {#each Object.entries(data) as [key, value], i}\r\n            {#if value && !omitted_field.includes(key)}\r\n            <p><span class=\"has-text-weight-bold is-size-5\">{key}</span>: {value}</p> <br>\r\n            {/if}\r\n          {/each}\r\n        </Message>\r\n      </div>\r\n    </div>\r\n  </Panel>\r\n\r\n  </ViewScaffold>\r\n</div>\r\n\r\n<script>\r\n  import Model from '../../../models/histories';\r\n  import Remedies from '../../../models/remedies';\r\n\r\n  import {Icon, Notification, Panel, Message} from '@kws3/helpers';\r\n  import { SubmitButton, ConfirmButton } from '@kws3/buttons';\r\n\r\n  import Router from '../../../services/router';\r\n  import SearchResult from '../search/helpers/SearchResult.html';\r\n  import RemedyFound from '../search/helpers/RemedyFound.html';\r\n  import PatientDetails from '../helpers/PatientDetails.html';\r\n  \r\n  export default {\r\n    components: {\r\n      ViewScaffold: '../../helpers/ViewScaffold.html',\r\n      PageTitle: '../../helpers/PageTitle.html',\r\n      Notification, Message, SubmitButton, ConfirmButton,\r\n      Icon, Panel, SearchResult, RemedyFound, PatientDetails\r\n\r\n    },\r\n    data() {\r\n      return {\r\n        is_loading: false,\r\n        is_error: false,\r\n        error_message: '',\r\n        selected_symptom: '',\r\n        selected_symp: '',\r\n        selected_keyed_symp: '',\r\n        result_symptoms: '',\r\n        remedies: {},\r\n        data: {},\r\n        meta: {},\r\n        remedy_found: {},\r\n        omitted_field: [ 'id', 'name', 'created', 'modified', 'deleted', 'patient', 'treatments'],\r\n        tracker: {\r\n          saving: false,\r\n          saved: false,\r\n          error: false,\r\n        },\r\n        page: {\r\n          title: 'View Case History',\r\n          subtitle: 'Case History details',\r\n          icon: 'building-o',\r\n          icon_badge: 'pencil'\r\n        },\r\n      }\r\n    },\r\n    computed: {\r\n      entityId: ({ $nav }) => $nav && $nav.params[0],\r\n      filterFields: ({remedies, omitted_field}) => {\r\n        \r\n        let last = ['built', 'constitution', 'diathesis', 'miasm', 'temperament', 'temperature_and_weather',\r\n        'thermal_sensitivity', 'sensation', 'tendency_take_cold', 'desires', 'aversions', 'birth_history_milestones',\r\n        'tissues', 'stages_and_states', 'attacks_and_side', 'ailments_from', 'affections', 'clinical', 'modalities',\r\n        'mental_state_and_disorders', 'appearance_and_behavior', 'attention_and_concentration', 'expression',\r\n        'consciousness', 'mood_and_affect', 'memory', 'speech', 'thoughts_and_ideas', 'perception', 'intelligence',\r\n        'judgment', 'fear_and_live_alone', 'boring', 'peaceful', 'anger', 'hobby', 'habit', 'addiction', 'nutrition',\r\n        'anaemia', 'cyanosis', 'dehydration', 'jaundice', 'pulse', 'breathing', 'peculiar_rare_symptoms'\r\n        ];\r\n\r\n        let filtered = [];\r\n        if(remedies.length){\r\n          for(let [key, value] of Object.entries(remedies[0])) {\r\n            if( !last.includes(key) && !omitted_field.includes(key)){\r\n              filtered.push(key)\r\n            }\r\n          }\r\n          filtered.push(...last)\r\n          return filtered\r\n        }\r\n      },\r\n      loadSymptoms: ({remedies}) => {\r\n        let symptoms = {}\r\n        let _symp = []\r\n\r\n        for(let i in remedies){\r\n          Object.entries(remedies[i]).forEach(([key, value]) => {\r\n          _symp[key] = []\r\n          })\r\n          break;\r\n        }\r\n        for(let item in remedies){\r\n          let single = remedies[item];\r\n\r\n          Object.entries(single).forEach(([key, value]) => {\r\n            if(value){\r\n              if(typeof value == 'string'){\r\n                _symp[key].push(value.split(','))\r\n              }\r\n              symptoms[key] = (symptoms[key] ? symptoms[key] : '') + ', ' + value;\r\n            }\r\n          })\r\n        }\r\n        return _symp\r\n      },\r\n    },\r\n    oncreate() {\r\n      var { entityId } = this.get();\r\n\r\n      this.load();\r\n    },\r\n    methods: {\r\n      \r\n      load() {\r\n        var { entityId } = this.get();\r\n\r\n        this.set({\r\n          is_loading: true,\r\n          is_error: false\r\n        });\r\n\r\n        Model && Model.getOne(entityId)\r\n        .then((r) => {\r\n          console.log(r)\r\n          this.set({\r\n            is_loading: false,\r\n            meta: r._meta,\r\n            data: r.response\r\n          });\r\n\r\n        })\r\n        .catch((r) => {\r\n          var user_message = '';\r\n          if (typeof r != 'undefined' && typeof r.response != 'undefined' && typeof r.response.records != 'undefined') {\r\n            user_message = r.response.records.userMessage;\r\n          }\r\n          this.set({\r\n            'is_error': true,\r\n            'is_loading': false,\r\n            'error_message': user_message\r\n          });\r\n        });\r\n      },\r\n      loadRemedies(){\r\n        Remedies.getAll({limit:1000})\r\n        .then( (r) => {\r\n          this.set({ remedies: r.response })\r\n        })\r\n        .catch( (r) => {\r\n          console.log(r)\r\n        })\r\n      },\r\n      save() {\r\n        var {data, entityId, tracker} = this.get();\r\n\r\n        this.set({\r\n          tracker: {\r\n            saving: true,\r\n            saved: false,\r\n            error: false\r\n          }\r\n        });\r\n\r\n        Model.save(entityId, data)\r\n        .then(r => {\r\n          this.set({\r\n            data: r.response,\r\n            tracker: {\r\n              saving: false,\r\n              saved: true,\r\n              error: false\r\n            }\r\n          });\r\n\r\n          setTimeout(() => {\r\n            tracker.saved = false;\r\n            this.set({tracker});\r\n          }, 1500);\r\n        })\r\n        .catch(r => {\r\n          console.log(r)\r\n          this.set({error_message: 'There was an error updating premise'});\r\n\r\n          this.set({\r\n            tracker: {\r\n              saving: false,\r\n              saved: false,\r\n              error: true\r\n            }\r\n          });\r\n\r\n          setTimeout(() => {\r\n            this.set({tracker: {error: false}});\r\n          }, 1500);\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>","<div class=\"page-content\">\r\n  <!-- <PageTitle page=\"{page}\">\r\n    <a class=\"button is-info is-pulled-right\" href=\"#history\">\r\n      <Icon icon=\"long-arrow-left\" size=\"small\" />\r\n      <span>Back to All Histories</span>\r\n    </a>\r\n  </PageTitle> -->\r\n\r\n  <ViewScaffold {is_loading} {is_error} {error_message}>\r\n\r\n    {#if tracker.error}\r\n    <Notification type=\"danger\"> {error_message} </Notification>\r\n    {/if}\r\n    \r\n  {#if !has_searched}\r\n    <form on:submit=\"search(event)\">\r\n      <Panel title=\"Patient Symptoms\" has_toolbar={true} >\r\n\r\n        <div class=\"columns\">\r\n          <div class=\"column\">\r\n            <Message title=\"Records\" color='light'>\r\n              {#each Object.entries(data) as [key, value], i}\r\n                {#if value && !omitted_field.includes(key)}\r\n                <p><span class=\"has-text-weight-bold is-size-5\">{key}</span>: {value}</p> <br>\r\n                {/if}\r\n              {/each}\r\n            </Message>\r\n          </div>\r\n          \r\n          <div class=\"column\">\r\n            <div class=\"field\">\r\n              <span class=\"select is-fullwidth\">\r\n                <select class=\"input\" bind:value=\"selected_symptom\" >\r\n                  <option value=\"\">Select Type</option>\r\n                  {#each Object.entries(data) as [key, value], i}\r\n                    {#if !omitted_field.includes(key)}\r\n                      <option value=\"{key}\">{key}</option>\r\n                    {/if}\r\n                  {/each}\r\n                </select>\r\n              </span>\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <p class=\"control\">\r\n                <label class=\"label\" style=\"text-transform: capitalize;\">{selected_symptom}</label>\r\n                <textarea class=\"textarea\" placeholder=\"{selected_symptom}...\" bind:value=\"data[selected_symptom]\" style=\"height: 15rem;\"></textarea>\r\n              </p>\r\n            </div>\r\n\r\n          </div>\r\n          <div class=\"column\">\r\n            <p class=\"title is-5\">Suggestions</p>\r\n\r\n            <div class=\"field\">\r\n              <p class=\"control\">\r\n                <label class=\"label\" style=\"text-transform: capitalize;\">{selected_symptom} Symptoms in the System</label>\r\n                  <SearchableSelect\r\n                    data=\"{searchable_withkey[selected_symptom]}\"\r\n                    placeholder=\"Choose...\"\r\n                    bind:_name=\"selected_keyed_symp\"\r\n                    searchKey=\"name\"\r\n                    searchValue=\"id\"\r\n                  />\r\n              </p>\r\n            </div>\r\n\r\n            <div class=\"field\">\r\n              <p class=\"control\">\r\n                <label class=\"label\" style=\"text-transform: capitalize;\">All Symptoms in the System</label>\r\n                  <SearchableSelect\r\n                    data=\"{searchable_symp}\"\r\n                    placeholder=\"Choose...\"\r\n                    bind:_name=\"selected_symp\"\r\n                    searchKey=\"name\"\r\n                    searchValue=\"id\"\r\n                  />\r\n              </p>\r\n            </div>\r\n            <div class=\"field is-grouped\">\r\n              <p class=\"control\">\r\n                <label class=\"label\">&nbsp;</label>\r\n                <button type=\"button\" on:click=\"save()\" class=\"button is-primary is-medium\" disabled=\"disabled\" >\r\n                  <span class=\"icon\">\r\n                    <i class=\"fa fa-save\"></i>\r\n                  </span>\r\n                  <span>Save only</span>\r\n                </button>\r\n                </p>\r\n              \r\n              <p class=\"control\">\r\n                <label class=\"label\">&nbsp;</label>\r\n                <SubmitButton bind:disabled classes=\"is-primary is-medium is-pulled-right\" icon=\"search\" icon_size=\"small\" text=\"Search\" bind:tracker />\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Panel>\r\n    </form>\r\n      <br>\r\n  {/if}\r\n\r\n  {#if has_searched}\r\n  <RemedyFound\r\n    bind:tracker\r\n    bind:remedy_found\r\n    {field_name}\r\n    {result_symptoms}\r\n    on:back=\"back()\"\r\n    on:showSymptoms\r\n    on:saveHistory=\"saveHistory()\"\r\n  />\r\n  <br>\r\n  {/if}\r\n\r\n  <Panel title=\"Cases\" has_toolbar={true} >\r\n    <div slot='toolbar'>\r\n      <ConfirmButton\r\n          text=\"Reset\"\r\n          color=\"danger\"\r\n          size=\"\"\r\n          icon=\"refresh\"\r\n          icon_only=\"{false}\"\r\n          disabled=\"{true}\"\r\n          on:do=\"reset(event)\"\r\n          \r\n        />\r\n    </div>\r\n\r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        {#if remedies.length}\r\n        <div class=\"columns\">\r\n          <div class=\"column\">\r\n            <label class=\"label\">With Number</label>\r\n            <div class=\"field\">\r\n              <span class=\"select is-fullwidth\">\r\n                <select class=\"input\" bind:value=\"selected_symptom\" >\r\n                  <option value=\"\">Select Type</option>\r\n                  {#each filterFields as key, index }\r\n                      <option value=\"{key}\">{index+1} - {key}</option>\r\n                  {/each}\r\n                </select>\r\n              </span>\r\n            </div>\r\n\r\n          </div>\r\n          <div class=\"column\">\r\n            <label class=\"label\">Without Number</label>\r\n            <div class=\"field\">\r\n              <span class=\"select is-fullwidth\">\r\n                <select class=\"input\" bind:value=\"selected_symptom\" >\r\n                  <option value=\"\">Select Type</option>\r\n                  {#each filterFields as key, index }\r\n                      <option value=\"{key}\">{key}</option>\r\n                  {/each}\r\n                </select>\r\n              </span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"columns\">\r\n          <div class=\"column\">\r\n            <div class=\"buttons\">\r\n              {#each filterFields as key }\r\n                  <button type=\"button\" class=\"button is-medium is-{ (key == selected_symptom) ? 'success' : data[key] ? '' : 'info' } \" on:click=\"select_symptom(key)\" style=\"text-transform: capitalize; margin-left: .6rem; margin-bottom: .6rem;\">\r\n                    {#if data[key] }\r\n                      <span class=\"icon is-small\"><i class=\"fa fa-check\"></i></span>\r\n                    {/if}\r\n                    <span>{key}</span>\r\n                  </button>\r\n              {/each}\r\n              </div>\r\n          </div>\r\n        </div>\r\n        {/if}\r\n      </div>\r\n    </div>\r\n  </Panel>\r\n\r\n  </ViewScaffold>\r\n</div>\r\n\r\n<script>\r\n  import Model from '../../../models/histories';\r\n  import Remedies from '../../../models/remedies';\r\n\r\n  import {Icon, Notification, Panel, Message} from '@kws3/helpers';\r\n  import { SubmitButton, ConfirmButton } from '@kws3/buttons';\r\n\r\n  import Router from '../../../services/router';\r\n  import SearchableSelect from '@kws3/searchable-select';\r\n  import SearchResult from '../search/helpers/SearchResult.html';\r\n  import RemedyFound from '../search/helpers/RemedyFound.html';\r\n\r\n  export default {\r\n    components: {\r\n      ViewScaffold: '../../helpers/ViewScaffold.html',\r\n      PageTitle: '../../helpers/PageTitle.html',\r\n      Notification, Message, SearchableSelect, SubmitButton, ConfirmButton,\r\n      Icon, Panel, SearchResult, RemedyFound\r\n\r\n    },\r\n    data() {\r\n      return {\r\n        is_loading: false,\r\n        is_error: false,\r\n        error_message: '',\r\n        selected_symptom: '',\r\n        selected_symp: '',\r\n        selected_keyed_symp: '',\r\n        result_symptoms: '',\r\n        remedies: {},\r\n        data: {},\r\n        meta: {},\r\n        remedy_found: {},\r\n        omitted_field: [ 'id', 'name', 'created', 'modified', 'deleted', 'patient', 'treatments'],\r\n        tracker: {\r\n          saving: false,\r\n          saved: false,\r\n          error: false,\r\n        },\r\n        page: {\r\n          title: 'View Case History',\r\n          subtitle: 'Case History details',\r\n          icon: 'building-o',\r\n          icon_badge: 'pencil'\r\n        },\r\n      }\r\n    },\r\n    computed: {\r\n      entityId: ({ $nav }) => $nav && $nav.params[0],\r\n      has_searched: ({remedy_found}) => Object.keys(remedy_found).length,\r\n      filterFields: ({remedies, omitted_field}) => {\r\n        \r\n        let last = ['built', 'constitution', 'diathesis', 'miasm', 'temperament', 'temperature_and_weather',\r\n        'thermal_sensitivity', 'sensation', 'tendency_take_cold', 'desires', 'aversions', 'birth_history_milestones',\r\n        'tissues', 'stages_and_states', 'attacks_and_side', 'ailments_from', 'affections', 'clinical', 'modalities',\r\n        'mental_state_and_disorders', 'appearance_and_behavior', 'attention_and_concentration', 'expression',\r\n        'consciousness', 'mood_and_affect', 'memory', 'speech', 'thoughts_and_ideas', 'perception', 'intelligence',\r\n        'judgment', 'fear_and_live_alone', 'boring', 'peaceful', 'anger', 'hobby', 'habit', 'addiction', 'nutrition',\r\n        'anaemia', 'cyanosis', 'dehydration', 'jaundice', 'pulse', 'breathing', 'peculiar_rare_symptoms'\r\n        ];\r\n\r\n        let filtered = [];\r\n        if(remedies.length){\r\n          for(let [key, value] of Object.entries(remedies[0])) {\r\n            if( !last.includes(key) && !omitted_field.includes(key)){\r\n              filtered.push(key)\r\n            }\r\n          }\r\n          filtered.push(...last)\r\n          return filtered\r\n        }\r\n      },\r\n      loadSymptoms: ({remedies}) => {\r\n        let symptoms = {}\r\n        let _symp = []\r\n\r\n        for(let i in remedies){\r\n          Object.entries(remedies[i]).forEach(([key, value]) => {\r\n          _symp[key] = []\r\n          })\r\n          break;\r\n        }\r\n        for(let item in remedies){\r\n          let single = remedies[item];\r\n\r\n          Object.entries(single).forEach(([key, value]) => {\r\n            if(value){\r\n              if(typeof value == 'string'){\r\n                _symp[key].push(value.split(','))\r\n              }\r\n              symptoms[key] = (symptoms[key] ? symptoms[key] : '') + ', ' + value;\r\n            }\r\n          })\r\n        }\r\n        return _symp\r\n      },\r\n      searchable_withkey({loadSymptoms}){\r\n        let final = [], total = 0;\r\n\r\n        Object.entries(loadSymptoms).forEach(([key, value]) => {\r\n          let one = loadSymptoms[key];\r\n            final[key] = [];\r\n            for(let i in one){\r\n              if(Array.isArray(one[i])){\r\n                for(let ind in one[i]){\r\n                  final[key].push({ id: total++, name: one[i][ind] })\r\n                }\r\n              }\r\n            }\r\n          })\r\n        return final\r\n      },\r\n    },\r\n    oncreate() {\r\n      var { entityId } = this.get();\r\n\r\n      this.on('state', ({ changed, current, previous }) => {\r\n        if (changed['$nav']) {\r\n          var { $nav } = current;\r\n          if ($nav.activeView == '_COMPONENT_') {\r\n            this.load();\r\n          }\r\n        }\r\n      });\r\n\r\n      this.load();\r\n      \r\n      this.loadRemedies();\r\n    },\r\n    methods: {\r\n      \r\n      select_symptom(key){\r\n        this.set({ selected_symptom: key })\r\n      },\r\n      load() {\r\n        var { entityId } = this.get();\r\n\r\n        this.set({\r\n          is_loading: true,\r\n          is_error: false\r\n        });\r\n\r\n        Model && Model.getOne(entityId)\r\n        .then((r) => {\r\n          console.log(r)\r\n          this.set({\r\n            is_loading: false,\r\n            meta: r._meta,\r\n            data: r.response\r\n          });\r\n\r\n        })\r\n        .catch((r) => {\r\n          var user_message = '';\r\n          if (typeof r != 'undefined' && typeof r.response != 'undefined' && typeof r.response.records != 'undefined') {\r\n            user_message = r.response.records.userMessage;\r\n          }\r\n          this.set({\r\n            'is_error': true,\r\n            'is_loading': false,\r\n            'error_message': user_message\r\n          });\r\n        });\r\n      },\r\n      loadRemedies(){\r\n        Remedies.getAll({limit:1000})\r\n        .then( (r) => {\r\n          this.set({ remedies: r.response })\r\n        })\r\n        .catch( (r) => {\r\n          console.log(r)\r\n        })\r\n      },\r\n      save() {\r\n        var {data, entityId, tracker} = this.get();\r\n\r\n        this.set({\r\n          tracker: {\r\n            saving: true,\r\n            saved: false,\r\n            error: false\r\n          }\r\n        });\r\n\r\n        Model.save(entityId, data)\r\n        .then(r => {\r\n          this.set({\r\n            data: r.response,\r\n            tracker: {\r\n              saving: false,\r\n              saved: true,\r\n              error: false\r\n            }\r\n          });\r\n\r\n          setTimeout(() => {\r\n            tracker.saved = false;\r\n            this.set({tracker});\r\n          }, 1500);\r\n        })\r\n        .catch(r => {\r\n          console.log(r)\r\n          this.set({error_message: 'There was an error updating premise'});\r\n\r\n          this.set({\r\n            tracker: {\r\n              saving: false,\r\n              saved: false,\r\n              error: true\r\n            }\r\n          });\r\n\r\n          setTimeout(() => {\r\n            this.set({tracker: {error: false}});\r\n          }, 1500);\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>","<div class=\"page-content\">\r\n  <PageTitle page=\"{page}\">\r\n    <a class=\"button is-info is-pulled-right\" href=\"#history\">\r\n      <Icon icon=\"long-arrow-left\" size=\"small\" />\r\n      <span>Back to All Histories</span>\r\n    </a>\r\n  </PageTitle>\r\n\r\n  <ViewScaffold {is_loading} {is_error} {error_message} class=\"has-fullpage-tabs has-multilevel-tabs\">\r\n\r\n    <LabsTabs {tabs} bind:active_tab />\r\n\r\n    <!-- <SlidingPaneSet style=\"height:{pane_height}px\">\r\n      <SlidingPane active={active_tab == 'static_view'} track_height on:heightChange> -->\r\n        <!-- <ViewHistoryStatic bind:is_error bind:error_message /> -->\r\n        {#if active_tab == 'static_view'}\r\n          <ViewHistoryStatic bind:is_error bind:error_message />\r\n       \r\n        {/if}\r\n      <!-- </SlidingPane>\r\n      \r\n      <SlidingPane active={false} track_height on:heightChange> -->\r\n        <!-- <ViewHistoryEdit bind:is_error bind:error_message /> -->\r\n        {#if active_tab == 'edit_view'}\r\n          <ViewHistoryEdit bind:is_error bind:error_message />\r\n       \r\n        {/if}\r\n      <!-- </SlidingPane>\r\n    </SlidingPaneSet> -->\r\n\r\n  </ViewScaffold>\r\n</div>\r\n\r\n<script>\r\n  import {Icon, Notification, Panel, Message} from '@kws3/helpers';\r\n  import { SubmitButton, ConfirmButton } from '@kws3/buttons';\r\n  import {SlidingPaneSet, SlidingPane} from '@kws3/sliding-panes'; \r\n  import LabsTabs from '../helpers/Tabs.html';\r\n  import ViewHistoryStatic from './ViewHistoryStatic.html';\r\n  import ViewHistoryEdit from './ViewHistoryEdit.html';\r\n  \r\n  export default {\r\n    components: {\r\n      ViewScaffold: '../../helpers/ViewScaffold.html',\r\n      PageTitle: '../../helpers/PageTitle.html',\r\n      Notification, Message, SubmitButton, ConfirmButton,\r\n      Icon, Panel, LabsTabs,\r\n      ViewHistoryStatic, ViewHistoryEdit,\r\n      SlidingPaneSet, SlidingPane,\r\n    },\r\n    data() {\r\n      return {\r\n        is_loading: false,\r\n        is_error: false,\r\n        error_message: '',\r\n        pane_height: 500,\r\n        data: {},\r\n        meta: {},\r\n        tracker: {\r\n          saving: false,\r\n          saved: false,\r\n          error: false,\r\n        },\r\n        page: {\r\n          title: 'View Case History',\r\n          subtitle: 'Case History details',\r\n          icon: 'building-o',\r\n          icon_badge: 'pencil'\r\n        },\r\n        active_tab: 'static_view',\r\n        tabs: [\r\n          {icon: 'info-circle', name: 'static_view', title: 'Static'},\r\n          {icon: 'pencil', name: 'edit_view', title: 'Edit Case History'},\r\n        ],\r\n      }\r\n    },\r\n    computed: {\r\n      entityId: ({ $nav }) => $nav && $nav.params[0],\r\n    },\r\n    oncreate() {\r\n      this.on('heightChange', ({height}) => {\r\n        this.set({pane_height: height})\r\n      });\r\n      \r\n      var { entityId } = this.get();\r\n\r\n      this.on('state', ({ changed, current, previous }) => {\r\n        console.log(current)\r\n      });\r\n\r\n    },\r\n    methods: {\r\n    }\r\n  }\r\n</script>"],"names":["link","tabs","id","is_detailed_route","forEach","e","default_route","name","$nav","console","log","params","getTotalSpace","tabbar","children","clientWidth","getAvailableSpace","totalSpace","tab_list","active_tab","set","tab","length","title","icon","remedies","omitted_field","last","filtered","key","value","Object","entries","includes","push","_symp","i","item","single","split","is_loading","is_error","error_message","selected_symptom","selected_symp","selected_keyed_symp","result_symptoms","data","meta","remedy_found","tracker","saving","saved","error","page","subtitle","icon_badge","[object Object]","entityId","this","get","Model","getOne","then","r","_meta","response","catch","user_message","records","userMessage","Remedies","getAll","limit","save","setTimeout","load","patient","keys","loadSymptoms","final","total","one","Array","isArray","ind","on","changed","current","previous","activeView","loadRemedies","select_symptom","has_searched","reset","event","searchable_withkey","searchable_symp","disabled","search","field_name","back","saveHistory","filterFields","index","pane_height","height"],"mappings":"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"}