var K_ENV="prod",K_ENV_DEV="dev",K_ENV_TEST="test",K_ENV_PROD="prod";import{w as addListener,a as append,b as assign,d as createElement,e as createFragment,f as createText,g as detachNode,h as flush,i as init,j as insert,l as proto,m as removeFromStore,x as removeListener,y as setAttribute,B as setData,$ as toNumber,n as Icon,E as Notification,D as Panel,q as ViewScaffold,r as PageTitle}from"./chunk-5d88ab61.js";import{a as Router}from"./chunk-fdf63a19.js";import{b as SubmitButton}from"./chunk-c5026b61.js";import{a as Model}from"./chunk-1ecd31b0.js";function user_role({$user:e}){return e&&e.role}function data(){return{is_loading:!1,is_error:!1,error_message:"",data:{name:"",phone:"",address:"",gender:""},tracker:{saving:!1,saved:!1,error:!1},page:{title:"Add Patient",icon:"vcard-o",icon_badge:"plus"},valid:!1}}var methods={addNew(e){e.preventDefault();var{data:t,valid:a}=this.get();this.set({tracker:{saving:!0,saved:!1,error:!1}}),Model.create(t).then(e=>{this.set({tracker:{saving:!1,saved:!0,error:!1},data:e.response}),setTimeout(()=>{this.set({tracker:{saved:!1}}),Router.navigate("patients")},1500)}).catch(e=>{"406"==e.response.records.errorCode?this.set({error_message:e.response.records.userMessage}):this.set({error_message:"There was an error adding patient"}),this.set({tracker:{saving:!1,saved:!1,error:!0}}),setTimeout(()=>{this.set({tracker:{error:!1}})},3e3)})}};function create_main_fragment(e,t){var a,r,n,s,d,o,i,l,c,p,m,u,_,g,v,f,h,b,N,E,k,x,T,y,A,L,P,w,C,F,G,D,S,V,j,B,K,M,$,q,O,R,z,I,H,J,Q,U,W,X,Y=!1,Z=!1,ee=!1,te=!1,ae={},re=new Icon({root:e.root,store:e.store,data:{icon:"long-arrow-left",size:"small"}}),ne={page:t.page},se=new PageTitle({root:e.root,store:e.store,slots:{default:createFragment()},data:ne}),de=t.tracker.error&&create_if_block(e,t);function oe(){Y=!0,t.data.name=g.value,e.set({data:t.data}),Y=!1}function ie(){Z=!0,t.data.phone=E.value,e.set({data:t.data}),Z=!1}function le(){t.data.gender=P.__value,e.set({data:t.data})}function ce(){t.data.gender=G.__value,e.set({data:t.data})}function pe(){ee=!0,t.data.age=toNumber($.value),e.set({data:t.data}),ee=!1}function me(){te=!0,t.data.address=H.value,e.set({data:t.data}),te=!1}var ue={classes:"is-primary is-pulled-right",icon:"plus",icon_size:"small",text:"Create Patient"};void 0!==t.tracker&&(ue.tracker=t.tracker,ae.tracker=!0);var _e=new SubmitButton({root:e.root,store:e.store,data:ue,_bind(t,a){var r={};!ae.tracker&&t.tracker&&(r.tracker=a.tracker),e._set(r),ae={}}});e.root._beforecreate.push(()=>{_e._bind({tracker:1},_e.get())});var ge=new Panel({root:e.root,store:e.store,slots:{default:createFragment()},data:{title:"Patient Details"}});function ve(t){e.addNew(t)}var fe={is_loading:t.is_loading,is_error:t.is_error,error_message:t.error_message},he=new ViewScaffold({root:e.root,store:e.store,slots:{default:createFragment()},data:fe});return{c(){a=createElement("div"),r=createElement("a"),re._fragment.c(),n=createText("\r\n      "),(s=createElement("span")).textContent="Back to All Patients",se._fragment.c(),d=createText("\r\n\r\n  "),de&&de.c(),o=createText("\r\n\r\n    "),i=createElement("form"),l=createElement("div"),c=createElement("div"),p=createElement("div"),m=createElement("p"),(u=createElement("label")).textContent="Name",_=createText("\r\n                "),g=createElement("input"),v=createText("\r\n            "),f=createElement("div"),h=createElement("p"),(b=createElement("label")).textContent="Phone",N=createText("\r\n                "),E=createElement("input"),k=createText("\r\n\r\n            "),x=createElement("div"),T=createElement("div"),(y=createElement("label")).textContent="Gender",A=createText("\r\n                "),L=createElement("label"),P=createElement("input"),w=createText(" Male"),C=createText("\r\n                "),F=createElement("label"),G=createElement("input"),D=createText(" Female"),S=createText("\r\n          "),V=createElement("div"),j=createElement("div"),B=createElement("p"),(K=createElement("label")).textContent="Age",M=createText("\r\n                "),$=createElement("input"),q=createText("\r\n            "),O=createElement("div"),R=createElement("p"),(z=createElement("label")).textContent="Address",I=createText("\r\n                "),H=createElement("input"),J=createText("\r\n            "),Q=createElement("div"),U=createElement("p"),(W=createElement("label")).textContent="Â ",X=createText("\r\n                "),_e._fragment.c(),ge._fragment.c(),he._fragment.c(),r.className="button is-info is-pulled-right",r.href="#patients",u.className="label",addListener(g,"input",oe),g.className="input",setAttribute(g,"type","text"),g.required=!0,m.className="control",p.className="field",b.className="label",addListener(E,"input",ie),E.className="input",setAttribute(E,"type","text"),h.className="control",f.className="field",y.className="label",e._bindingGroups[0].push(P),addListener(P,"change",le),setAttribute(P,"type","radio"),P.__value="m",P.value=P.__value,L.className="radio",e._bindingGroups[0].push(G),addListener(G,"change",ce),setAttribute(G,"type","radio"),G.__value="f",G.value=G.__value,F.className="radio",T.className="control",x.className="field",c.className="column",K.className="label",addListener($,"input",pe),$.className="input",setAttribute($,"type","number"),$.required=!0,$.autocomplete="off",B.className="control",j.className="field",z.className="label",addListener(H,"input",me),H.className="input",setAttribute(H,"type","text"),H.autocomplete="off",R.className="control",O.className="field",W.className="label",U.className="control",Q.className="field",V.className="column",l.className="columns",addListener(i,"submit",ve),a.className="page-content"},m(e,Y){insert(e,a,Y),append(se._slotted.default,r),re._mount(r,null),append(r,n),append(r,s),se._mount(a,null),append(a,d),de&&de.m(he._slotted.default,null),append(he._slotted.default,o),append(he._slotted.default,i),append(ge._slotted.default,l),append(l,c),append(c,p),append(p,m),append(m,u),append(m,_),append(m,g),g.value=t.data.name,append(c,v),append(c,f),append(f,h),append(h,b),append(h,N),append(h,E),E.value=t.data.phone,append(c,k),append(c,x),append(x,T),append(T,y),append(T,A),append(T,L),append(L,P),P.checked=P.__value===t.data.gender,append(L,w),append(T,C),append(T,F),append(F,G),G.checked=G.__value===t.data.gender,append(F,D),append(l,S),append(l,V),append(V,j),append(j,B),append(B,K),append(B,M),append(B,$),$.value=t.data.age,append(V,q),append(V,O),append(O,R),append(R,z),append(R,I),append(R,H),H.value=t.data.address,append(V,J),append(V,Q),append(Q,U),append(U,W),append(U,X),_e._mount(U,null),ge._mount(i,null),he._mount(a,null)},p(a,r){t=r;var n={};a.page&&(n.page=t.page),se._set(n),t.tracker.error?de?de.p(a,t):((de=create_if_block(e,t)).c(),de.m(o.parentNode,o)):de&&(de.d(1),de=null),!Y&&a.data&&(g.value=t.data.name),!Z&&a.data&&(E.value=t.data.phone),a.data&&(P.checked=P.__value===t.data.gender),a.data&&(G.checked=G.__value===t.data.gender),!ee&&a.data&&($.value=t.data.age),!te&&a.data&&(H.value=t.data.address);var s={};!ae.tracker&&a.tracker&&(s.tracker=t.tracker,ae.tracker=void 0!==t.tracker),_e._set(s),ae={};var d={};a.is_loading&&(d.is_loading=t.is_loading),a.is_error&&(d.is_error=t.is_error),a.error_message&&(d.error_message=t.error_message),he._set(d)},d(t){t&&detachNode(a),re.destroy(),se.destroy(),de&&de.d(),removeListener(g,"input",oe),removeListener(E,"input",ie),e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(P),1),removeListener(P,"change",le),e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(G),1),removeListener(G,"change",ce),removeListener($,"input",pe),removeListener(H,"input",me),_e.destroy(),ge.destroy(),removeListener(i,"submit",ve),he.destroy()}}}function create_if_block(e,t){var a,r=new Notification({root:e.root,store:e.store,slots:{default:createFragment()},data:{type:"danger"}});return{c(){a=createText(t.error_message),r._fragment.c()},m(e,t){append(r._slotted.default,a),r._mount(e,t)},p(e,t){e.error_message&&setData(a,t.error_message)},d(e){r.destroy(e)}}}function AddPatient(e){init(this,e),this._state=assign(assign(this.store._init(["user"]),data()),e.data),this.store._add(this,["user"]),this._recompute({$user:1},this._state),this._bindingGroups=[[]],this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}assign(AddPatient.prototype,proto),assign(AddPatient.prototype,methods),AddPatient.prototype._recompute=function(e,t){e.$user&&this._differs(t.user_role,t.user_role=user_role(t))&&(e.user_role=!0)};export default AddPatient;
//# sourceMappingURL=AddPatient.js.map
