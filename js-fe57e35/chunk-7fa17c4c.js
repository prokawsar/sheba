var K_ENV="prod",K_ENV_DEV="dev",K_ENV_TEST="test",K_ENV_PROD="prod";import{w as addListener,a as append,b as assign,c as assignTrue,d as createElement,f as createText,g as detachNode,h as flush,i as init,j as insert,k as noop,l as proto,x as removeListener,y as setAttribute,B as setData,C as setStyle,n as Icon}from"./chunk-5d88ab61.js";var formatFileSize=e=>void 0===e||/\D/.test(e)?"N/A":e>1073741824?Math.round(e/1073741824,1)+" GB":e>1048576?Math.round(e/1048576,1)+" MB":e>1024?Math.round(e/1024,1)+" KB":e+" b";function fileTypes({allowed:e}){return"*"!=e&&void 0!==e.length?e.join(", "):""}function progress({_total:e,_uploaded:t}){return Math.floor(t/e*100)}function maxFileSize({max:e}){return formatFileSize(e)}function data(){return{message:"Choose File...",info:"",max:5e6,allowed:"*",classes:"",disabled:!1,_filename:"No file selected",_error:!1,_error_message:"",_is_uploading:!1,_is_finished:!1,_total:0,_uploaded:0}}var methods={updateFile(){var e=this.uploadField,t=e.value,{max:a,allowed:s}=this.get(),i=a,r="",l=0,n=null,o=!0;this.FormData=new FormData,this.set({_error:!1,_error_message:""});try{n=e.files[0]}catch(e){}""===t?t="No file selected":(l=n?n.fileSize||n.size:0,r=(r=(r=(t=(t=t.split(/[\/\\]+/))[t.length-1]).split(/\./))[r.length-1]).toLowerCase(),0==l&&(o=!1,t="No file selected"),"*"!=s&&void 0!==s.length&&-1===s.indexOf(r)&&(o=!1,this.set({_error:!0,_error_message:"Files of type "+r+" are not allowed.\n Allowed file types: "+this.get().fileTypes}),e.value="",t="No file selected"),i>0&&l>i&&(o=!1,this.set({_error:!0,_error_message:"File size is too large. Maximum allowed file size is "+formatFileSize(i)}),e.value="",t="No file selected")),this.set({_filename:t}),o&&(this.set({_total:l}),this.FormData.append("userfile",n),this.fire("file_chosen",this))},getFile(){return{name:this.get()._filename,size:this.get()._total,file:this.FormData}},progress(e){this.set({_is_uploading:!0,_uploaded:e})},uploaded(){this.set({_is_uploading:!1,_is_finished:!0}),setTimeout(()=>{this.set({_is_finished:!1,_total:0,_uploaded:0,_filename:this.get().message}),this.FormData=null,this.uploadField.value="",this.uploadField.files=null},3e3)},error(e){this.set({_is_uploading:!1,_error:!0,_error_message:e,_filename:this.get().message}),this.FormData=null,this.uploadField.value="",this.uploadField.files=null}};function oncreate(){this.uploadField=this.refs.uploadInput,this.set({_filename:this.get().message})}function create_main_fragment(e,t){var a,s,i,r,l,n,o,d,c,_,p;function m(e){return e._is_uploading?create_if_block_3:e._is_finished?create_if_block_4:create_else_block_2}var f=m(t),u=f(e,t);function h(e){return e._is_uploading?create_if_block_1:e._is_finished?create_if_block_2:create_else_block_1}var g=h(t),v=g(e,t);function N(t){e.updateFile()}function x(e){return e._error?create_if_block:create_else_block}var b=x(t),F=b(e,t);return{c(){a=createElement("div"),s=createElement("div"),i=createElement("div"),u.c(),r=createText("\r\n    "),l=createElement("div"),v.c(),n=createText("\r\n    "),o=createElement("input"),c=createText("\r\n  "),_=createElement("div"),F.c(),i.className="up-icon",l.className="file",addListener(o,"change",N),setAttribute(o,"type","file"),o.name="file",o.disabled=d=t.disabled||t._is_uploading||t._is_finished,s.className="file-upload-inner",_.className="level is-mobile",a.className=p="file-upload "+t.classes+" is-"+(t._error?"danger":"")+" "+(t.disabled||t._is_uploading||t._is_finished?"is-disabled":"")+" "+(t._is_finished?"is-success":"")},m(t,d){insert(t,a,d),append(a,s),append(s,i),u.m(i,null),append(s,r),append(s,l),v.m(l,null),append(s,n),append(s,o),e.refs.uploadInput=o,append(a,c),append(a,_),F.m(_,null)},p(t,s){f!==(f=m(s))&&(u.d(1),(u=f(e,s)).c(),u.m(i,null)),g===(g=h(s))&&v?v.p(t,s):(v.d(1),(v=g(e,s)).c(),v.m(l,null)),(t.disabled||t._is_uploading||t._is_finished)&&d!==(d=s.disabled||s._is_uploading||s._is_finished)&&(o.disabled=d),b===(b=x(s))&&F?F.p(t,s):(F.d(1),(F=b(e,s)).c(),F.m(_,null)),(t.classes||t._error||t.disabled||t._is_uploading||t._is_finished)&&p!==(p="file-upload "+s.classes+" is-"+(s._error?"danger":"")+" "+(s.disabled||s._is_uploading||s._is_finished?"is-disabled":"")+" "+(s._is_finished?"is-success":""))&&(a.className=p)},d(t){t&&detachNode(a),u.d(),v.d(),removeListener(o,"change",N),e.refs.uploadInput===o&&(e.refs.uploadInput=null),F.d()}}}function create_else_block_2(e,t){var a=new Icon({root:e.root,store:e.store,data:{size:"",icon:"arrow-circle-up",fa_class:"fa-lg"}});return{c(){a._fragment.c()},m(e,t){a._mount(e,t)},d(e){a.destroy(e)}}}function create_if_block_4(e,t){var a=new Icon({root:e.root,store:e.store,data:{size:"",icon:"check-circle",fa_class:"fa-lg"}});return{c(){a._fragment.c()},m(e,t){a._mount(e,t)},d(e){a.destroy(e)}}}function create_if_block_3(e,t){var a;return{c(){(a=createElement("span")).className="loader"},m(e,t){insert(e,a,t)},d(e){e&&detachNode(a)}}}function create_else_block_1(e,t){var a,s;return{c(){a=createElement("div"),s=createText(t._filename),a.className="filename"},m(e,t){insert(e,a,t),append(a,s)},p(e,t){e._filename&&setData(s,t._filename)},d(e){e&&detachNode(a)}}}function create_if_block_2(e,t){var a;return{c(){(a=createElement("div")).textContent="Upload complete!",a.className="filename"},m(e,t){insert(e,a,t)},p:noop,d(e){e&&detachNode(a)}}}function create_if_block_1(e,t){var a,s,i,r,l,n,o;return{c(){a=createElement("div"),s=createElement("div"),i=createElement("div"),r=createText("\r\n        "),l=createElement("div"),n=createText(t.progress),o=createText("% - Uploading..."),i.className="bar",setStyle(i,"width",t.progress+"%"),s.className="progress-inner",a.className="upload-progress",l.className="progress-caption"},m(e,t){insert(e,a,t),append(a,s),append(s,i),insert(e,r,t),insert(e,l,t),append(l,n),append(l,o)},p(e,t){e.progress&&(setStyle(i,"width",t.progress+"%"),setData(n,t.progress))},d(e){e&&(detachNode(a),detachNode(r),detachNode(l))}}}function create_else_block(e,t){var a,s,i,r,l,n,o,d,c,_,p,m,f;return{c(){a=createElement("div"),s=createElement("div"),i=createElement("span"),r=createText("Max size: "),l=createText(t.maxFileSize),n=createText("\r\n      "),o=createElement("div"),d=createElement("span"),c=createText(t.info),_=createText("\r\n      "),p=createElement("div"),m=createElement("span"),f=createText(t.fileTypes),i.className="help",s.className="level-item",a.className="level-left",d.className="help is-warning",o.className="level-item",setStyle(o,"max-width","100%"),m.className="help",p.className="level-right"},m(e,t){insert(e,a,t),append(a,s),append(s,i),append(i,r),append(i,l),insert(e,n,t),insert(e,o,t),append(o,d),append(d,c),insert(e,_,t),insert(e,p,t),append(p,m),append(m,f)},p(e,t){e.maxFileSize&&setData(l,t.maxFileSize),e.info&&setData(c,t.info),e.fileTypes&&setData(f,t.fileTypes)},d(e){e&&(detachNode(a),detachNode(n),detachNode(o),detachNode(_),detachNode(p))}}}function create_if_block(e,t){var a,s,i,r;return{c(){a=createElement("div"),s=createElement("span"),i=createText(t._error_message),s.className=r="help is-"+(t._error?"danger":""),a.className="level-item",setStyle(a,"max-width","100%")},m(e,t){insert(e,a,t),append(a,s),append(s,i)},p(e,t){e._error_message&&setData(i,t._error_message),e._error&&r!==(r="help is-"+(t._error?"danger":""))&&(s.className=r)},d(e){e&&detachNode(a)}}}function FileUpload(e){init(this,e),this.refs={},this._state=assign(data(),e.data),this._recompute({allowed:1,_total:1,_uploaded:1,max:1},this._state),this._intro=!0,this._fragment=create_main_fragment(this,this._state),this.root._oncreate.push(()=>{oncreate.call(this),this.fire("update",{changed:assignTrue({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}assign(FileUpload.prototype,proto),assign(FileUpload.prototype,methods),FileUpload.prototype._recompute=function(e,t){e.allowed&&this._differs(t.fileTypes,t.fileTypes=fileTypes(t))&&(e.fileTypes=!0),(e._total||e._uploaded)&&this._differs(t.progress,t.progress=progress(t))&&(e.progress=!0),e.max&&this._differs(t.maxFileSize,t.maxFileSize=maxFileSize(t))&&(e.maxFileSize=!0)};export{FileUpload as a};
//# sourceMappingURL=chunk-7fa17c4c.js.map
