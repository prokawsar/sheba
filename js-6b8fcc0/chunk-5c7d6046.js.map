{"version":3,"file":"chunk-5c7d6046.js","sources":["../../../node_modules/@kws3/sliding-panes/components/SlidingPane.html","../../../node_modules/@kws3/sliding-panes/components/SlidingPaneSet.html","../../../node_modules/@kws3/controls/components/Toggle/Toggle.html","../../../node_modules/@kws3/controls/components/ToggleControl/ToggleControl.html","../../../node_modules/@kws3/controls/node_modules/@kws3/helpers/components/Loader/Loader.html","../../../node_modules/@kws3/controls/node_modules/@kws3/helpers/components/Message/Message.html","../../../node_modules/@kws3/controls/node_modules/@kws3/helpers/components/Notification/Notification.html","../../../node_modules/@kws3/controls/node_modules/@kws3/helpers/components/Icon/Icon.html","../../../node_modules/@kws3/controls/node_modules/@kws3/helpers/components/Panel/Panel.html","../../../node_modules/@kws3/controls/node_modules/@kws3/helpers/components/Modal/Modal.html","../../../node_modules/@kws3/controls/node_modules/@kws3/helpers/components/Modal/CardModal.html","../../../node_modules/@kws3/controls/components/ToggleButtons/ToggleButtons.html","../../../node_modules/@kws3/controls/components/Checkbox/Checkbox.html","../../../node_modules/@kws3/controls/components/Radio/Radio.html","../../../node_modules/@kws3/controls/components/NumberInput/NumberInput.html","../../../node_modules/@kws3/controls/components/FileUpload/FileUpload.html","../../../src/components/views/helpers/AdvancedSearch.html","../../../src/components/views/helpers/PatientSearch.html","../../../src/components/views/helpers/PatientSearchResults.html","../../../src/components/views/search/helpers/PatientAdd.html","../../../src/components/views/search/helpers/Sections.html"],"sourcesContent":["<div bind:clientHeight=\"_height\" class=\"sliding-pane {v_center ? 'v-centered' : ''} {h_center ? 'h-centered' : ''} {active ? 'is-active' : ''} {class}\" style=\"{style}\">\n  <div ref:slideInner class=\"sliding-pane-inner {v_center ? 'v-centered' : ''} {h_center ? 'h-centered' : ''}\">\n    <slot></slot>\n  </div>\n</div>\n\n<script>\n  import {rAF} from '@kws3/utils';\n\n  export default {\n    data(){\n      return {\n        active: false,\n        class: '',\n        style:'',\n        v_center: false,\n        h_center: false,\n        track_height: false\n      }\n    },\n    onupdate({changed, current}) {\n      if(current.active && current.track_height && (changed.active || changed._height)){\n        rAF(() => {\n          this.fireSizeChange()\n        });\n      }\n    },\n    oncreate(){\n      this.pollForRender()\n    },\n    methods: {\n      pollForRender(){\n        if(this.refs.slideInner && typeof this.refs.slideInner != 'undefined'){\n          this.init()\n        }else{\n          setTimeout(() => {\n            this.pollForRender();\n          }, 200);\n        }\n      },\n      init(){\n        this.fireSizeChange();\n      },\n      fireSizeChange(){\n        var {v_center, h_center, active, track_height} = this.get();\n        if(track_height && active){\n          if(!this.refs.slideInner || typeof this.refs.slideInner == 'undefined'){\n            this.pollForRender();\n          }else{\n            rAF(() => {\n              if(!this.refs.slideInner || typeof this.refs.slideInner == 'undefined'){\n                return;\n              }\n              var h1 = this.refs.slideInner.scrollHeight,\n              h2 = this.refs.slideInner.clientHeight;\n              this.fire('heightChange', {height: Math.max(h1, h2)});\n            });\n          }\n\n        }\n      }\n    }\n  }\n</script>","<div class=\"sliding-pane-set {vertical ? 'is-vertical' : ''}  {class}\" style=\"{style}\">\n  <slot></slot>\n</div>\n\n<script>\n  export default {\n    data(){\n      return {\n        class: '',\n        style:'',\n        vertical: false\n      }\n    }\n  }\n</script>","<div class=\"toggle-button is-{color} is-{size} {class} {on ? 'on' : ''} {disabled ? 'disabled' : ''}\" on:click=\"toggle()\" data-cy=\"{cy}\">\r\n  <div class=\"track\">\r\n    <p class=\"toggle-text\"> {on ? on_text : off_text}</p>\r\n    <div class=\"handle\"></div>\r\n  </div>\r\n</div>\r\n\r\n<style>\r\n.disabled{\r\n  opacity:0.5;\r\n}\r\n</style>\r\n\r\n<script>\r\n  export default {\r\n    data: function(){\r\n      return {\r\n        on: false,\r\n        disabled: false,\r\n        color:'',\r\n        class:'',\r\n        on_text: '',\r\n        off_text: '',\r\n        size:'',\r\n        cy: ''\r\n      }\r\n    },\r\n    methods:{\r\n      toggle(){\r\n        var {on, disabled} = this.get();\r\n        if(!disabled){\r\n          on = !on;\r\n          this.set({on});\r\n          this.fire('change');\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>","<div class=\"togglebox {class}\" {style} data-cy=\"{cy}\">\r\n  <slot></slot>\r\n</div>\r\n\r\n\r\n<script>\r\n  export default {\r\n    data: function(){\r\n      return {\r\n        class:'',\r\n        style:'',\r\n        cy: ''\r\n      }\r\n    }\r\n  };\r\n</script>","<div class=\"kws-loader hero is-{color} is-{size} {large_loader ? 'is-large-loader' : '' }\" style=\"{style}\">\r\n  <div class=\"hero-body\" style=\"{type=='inline' ? 'padding:1rem':''}\">\r\n    &nbsp;\r\n  </div>\r\n</div>\r\n\r\n<script>\r\nexport default {\r\n  data: function(){\r\n    return{\r\n      color: 'transparent', //[transparent, info, danger, warning, primary]\r\n      size: 'medium',  //[large, small, medium, fullheight],\r\n      type:'',\r\n      style:'',\r\n      large_loader: false\r\n    }\r\n  }\r\n}\r\n</script>","<div class=\"message is-{color} is-{size} {classes}\" style=\"{style}\">\r\n  {#if title || has_title}\r\n    <div class=\"message-header {header_classes}\">\r\n      <slot name=\"title\"><p>{title}</p></slot>\r\n    </div>\r\n  {/if}\r\n  <div class=\"message-body {inner_classes}\" style=\"{inner_style}\">\r\n    <slot></slot>\r\n  </div>\r\n</div>\r\n\r\n<script>\r\n  export default {\r\n    data(){\r\n      return {\r\n        size:'',\r\n        color:'info',\r\n        style:'',\r\n        inner_style:'',\r\n        classes:'',\r\n        header_classes:'',\r\n        inner_classes:'',\r\n        title: null,\r\n        has_title: false\r\n      }\r\n    },\r\n    onstate({changed, current, previous}){\r\n      if(changed.type){\r\n        this.set({color: current.type})\r\n      }\r\n    }\r\n  }\r\n</script>","<div class=\"notification is-{color}\" style=\"{style}\">\r\n  {#if dismissable}\r\n    <button class=\"delete\" on:click=\"dismiss()\"></button>\r\n  {/if}\r\n  <slot></slot>\r\n</div>\r\n\r\n<script>\r\n  export default {\r\n    data(){\r\n      return {\r\n        color:'info',\r\n        style:'',\r\n        dismissable: false\r\n      }\r\n    },\r\n    onstate({changed, current, previous}){\r\n      if(changed.type){\r\n        this.set({color: current.type})\r\n      }\r\n    },\r\n    methods:{\r\n      dismiss(){\r\n        this.destroy()\r\n      }\r\n    }\r\n  }\r\n</script>","<span class=\"icon {size ? 'is-'+size : ''} {color ? 'has-text-'+color : ''} {icon_class}\" style=\"{icon_style}\">\r\n  <i class=\"icon-i {familyClass}{icon} {internal_size} {_used_inner_class}\" style=\"{_used_inner_style}\"></i>\r\n</span>\r\n\r\n<style>\r\n  .icon .gg{\r\n    transform: scale(0.75);\r\n  }\r\n  .icon .gg.fa-lg{\r\n    transform: scale(1);\r\n  }\r\n  .icon .gg.fa-2x{\r\n    transform: scale(1.5);\r\n  }\r\n  .icon .gg.fa-3x{\r\n    transform: scale(2);\r\n  }\r\n\r\n  .icon .uil{\r\n    font-size: 1.25em;\r\n  }\r\n  .icon .uil.fa-lg{\r\n    font-size: 1.5em;\r\n  }\r\n  .icon .uil.fa-2x{\r\n    font-size: 2em;\r\n  }\r\n  .icon .uil.fa-3x{\r\n    font-size: 3em;\r\n  }\r\n</style>\r\n\r\n<script>\r\nexport default {\r\n  data: function(){\r\n    return {\r\n      size: null,\r\n      color: null,\r\n      icon: '',\r\n      icon_class:'',\r\n      icon_style: '',\r\n      fa_class: null, // @deprecated\r\n      fa_style: null, // @deprecated\r\n      inner_class: null,\r\n      inner_style: null,\r\n      family: null,\r\n      _system_settings: null\r\n    }\r\n  },\r\n  computed:{\r\n    _used_inner_class({inner_class, fa_class}){\r\n      return inner_class || fa_class || '';\r\n    },\r\n    _used_inner_style({inner_style, fa_style}){\r\n      return inner_style || fa_style || '';\r\n    },\r\n    familyClass({usedFamily}){\r\n      switch(usedFamily){\r\n        case 'gg':\r\n          return 'gg gg-'\r\n        break;\r\n        case 'unicons':\r\n          return 'uil uil-'\r\n        break;\r\n        default:\r\n          return 'fa fa-'\r\n        break;\r\n      }\r\n    },\r\n    usedFamily({_system_settings, family}){\r\n      if(family){\r\n        return family;\r\n      }\r\n\r\n      let _family = 'fa';\r\n      if(_system_settings && typeof _system_settings.icon_family != 'undefined' && _system_settings.icon_family){\r\n        return _system_settings.icon_family;\r\n      }\r\n      return _family;\r\n    },\r\n    internal_size({size}){\r\n      switch (size) {\r\n        case 'small':\r\n          return '';\r\n        break;\r\n        case 'medium':\r\n          return 'fa-2x';\r\n        break;\r\n        case 'large':\r\n          return 'fa-3x';\r\n        break;\r\n        default:\r\n          return 'fa-lg'\r\n        break;\r\n      }\r\n    }\r\n  },\r\n  oncreate(){\r\n    if(this.store){\r\n      let {system_settings} = this.store.get();\r\n      setTimeout(() => {\r\n        this.set({_system_settings: system_settings});\r\n      }, 100);\r\n      return;\r\n    }\r\n  }\r\n}\r\n</script>","<div class=\"panel {collapsible ? 'collapsible' : ''} {collapsed ? 'collapsed' : ''}\" style=\"{style}\" data-cy=\"{cy}\">\r\n  {#if title != ''}\r\n  <div class=\"panel-heading\" on:click=\"toggle()\">\r\n    <div class=\"level is-mobile\">\r\n      <div class=\"level-left\">\r\n        <div class=\"level-item\">\r\n          <h2 class=\"subtitle\">{@html title}</h2>\r\n        </div>\r\n      </div>\r\n      <div class=\"level-item\">\r\n        {#if has_center}\r\n          <slot name=\"center\"></slot>\r\n        {/if}\r\n      </div>\r\n      <div class=\"level-right\">\r\n        {#if has_toolbar}\r\n        <div class=\"level-item\">\r\n          <slot name=\"toolbar\"></slot>\r\n        </div>\r\n        {/if}\r\n        <div class=\"level-item\">\r\n          <h2 class=\"subtitle is-6\">{@html subtitle}</h2>\r\n        </div>\r\n        <span class=\"collapsor level-item\">\r\n          <Icon icon=\"{collapse_icon}\" />\r\n        </span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  {/if}\r\n  <div class=\"panel-content-outer\">\r\n    <div class=\"panel-block is-clearfix\" style=\"{inner_style} {relative ? 'position:relative' : ''}\">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<script>\r\nimport {Icon} from '@kws3/helpers';\r\n\r\nexport default {\r\n  components:{Icon},\r\n  data: function(){\r\n    return {\r\n      title:'',\r\n      subtitle:'',\r\n      style:'',\r\n      inner_style:'',\r\n      cy: '',\r\n      collapse_icon: 'caret-right',\r\n      collapsible: false,\r\n      collapsed: false,\r\n      relative: false,\r\n      has_toolbar: true,\r\n      has_center: true,\r\n    }\r\n  },\r\n  methods:{\r\n    toggle(){\r\n      let {collapsible, collapsed} = this.get();\r\n      if(collapsible){\r\n        collapsed = !collapsed;\r\n        this.set({collapsed})\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>","<div class=\"modal {class} {is_active ? 'is-active' : ''}\" style=\"{style}\" data-cy=\"{cy}\">\r\n  <div class=\"modal-background\" on:click=\"fire('clickOutside')\"></div>\r\n  <div class=\"modal-content is-{size} {inner_class}\" style=\"{inner_style}\">\r\n    <div class=\"box\">\r\n      <slot></slot>\r\n    </div>\r\n  </div>\r\n  {#if closable}\r\n    <button class=\"modal-close is-large\" type=\"button\" on:click=\"fire('close')\"></button>\r\n  {/if}\r\n</div>\r\n\r\n<script>\r\n  export default {\r\n    data(){\r\n      return {\r\n        size:'',\r\n        is_active: false,\r\n        closable: true,\r\n        close_on_click_outside: false,\r\n        style:'',\r\n        inner_style:'',\r\n        class:'',\r\n        inner_class:'',\r\n        cy: ''\r\n      }\r\n    },\r\n    oncreate(){\r\n      this.on('close', () => {\r\n        this.close();\r\n      });\r\n      this.on('clickOutside', () => {\r\n        let {close_on_click_outside, closable} = this.get();\r\n        if(close_on_click_outside && closable){\r\n          this.fire('close');\r\n        }\r\n      });\r\n    },\r\n    methods:{\r\n      close(){\r\n        this.set({is_active: false});\r\n      },\r\n      open(){\r\n        this.set({is_active: true});\r\n      }\r\n    }\r\n  }\r\n</script>","<div class=\"modal {class} {is_active ? 'is-active' : ''}\" style=\"{style}\" data-cy=\"{cy}\">\r\n  <div class=\"modal-background\" on:click=\"fire('clickOutside')\"></div>\r\n  <div class=\"modal-card is-{size} {inner_class}\" style=\"{inner_style}\">\r\n    <div class=\"modal-card-head\">\r\n      <div class=\"modal-card-title\">\r\n        <slot name=\"title\">{title}</slot>\r\n      </div>\r\n      {#if closable}\r\n        <button class=\"delete\" type=\"button\" on:click=\"fire('close')\"></button>\r\n      {/if}\r\n    </div>\r\n    <div class=\"modal-card-body\">\r\n      <slot></slot>\r\n    </div>\r\n    {#if has_footer}\r\n      <div class=\"modal-card-foot\">\r\n        <slot name=\"footer\"></slot>\r\n      </div>\r\n    {/if}\r\n  </div>\r\n\r\n</div>\r\n\r\n<script>\r\n  export default {\r\n    data(){\r\n      return {\r\n        title:'',\r\n        size:'',\r\n        is_active: false,\r\n        closable: true,\r\n        close_on_click_outside: false,\r\n        has_footer: true,\r\n        style:'',\r\n        inner_style:'',\r\n        class:'',\r\n        inner_class:'',\r\n        cy: ''\r\n      }\r\n    },\r\n    oncreate(){\r\n      this.on('close', () => {\r\n        this.close();\r\n      });\r\n      this.on('clickOutside', () => {\r\n        let {close_on_click_outside, closable} = this.get();\r\n        if(close_on_click_outside && closable){\r\n          this.fire('close');\r\n        }\r\n      });\r\n    },\r\n    methods:{\r\n      close(){\r\n        this.set({is_active: false});\r\n      },\r\n      open(){\r\n        this.set({is_active: true});\r\n      }\r\n    }\r\n  }\r\n</script>","<div class=\"toggle-buttons field has-addons {class}\">\r\n  {#each options as option}\r\n    <div class=\"control {fullwidth ? 'is-expanded': ''} {inner_class}\">\r\n      <button\r\n        type=\"button\"\r\n        {disabled}\r\n        on:click=\"setValue(option.value)\"\r\n        class=\"button is-{size}  {fullwidth ? 'is-fullwidth': ''} {value == option.value ? ('is-active ' + (option.active_class ? option.active_class : active_class)) : (option.inactive_class ? option.inactive_class : inactive_class)}\"\r\n        style=\"height:auto\"\r\n      >\r\n        <span>\r\n          {#if option.icon}\r\n            <Icon icon=\"{option.icon}\" size=\"small\" icon_class=\"is-marginless\" />\r\n          {/if}\r\n          <span class=\"is-block\">{option.name}</span>\r\n          {#if option.subtitle}\r\n          <span style=\"font-size: 0.7em; display: block; margin-top: -0.3em; opacity: 0.7;\">{option.subtitle}</span>\r\n          {/if}\r\n        </span>\r\n      </button>\r\n    </div>\r\n  {/each}\r\n</div>\r\n\r\n\r\n<script>\r\n  import {Icon} from '@kws3/helpers';\r\n\r\n  export default {\r\n    components:{Icon},\r\n    data: function(){\r\n      return {\r\n        on: false,\r\n        value: null,\r\n        disabled: false,\r\n        options:[],\r\n        class:'',\r\n        inner_class:'',\r\n        active_class: 'is-primary',\r\n        inactive_class: 'is-outlined',\r\n        size: '',\r\n        fullwidth: false\r\n      }\r\n    },\r\n    methods:{\r\n      setValue(value){\r\n        this.set({value: value});\r\n        this.fire('change');\r\n      }\r\n    }\r\n  };\r\n</script>","<label class=\"checkbox kws-checkbox is-{size} is-{color} {has_icon ? 'has-icon' : ''} {inverted ? 'is-inverted' : ''} {circle ? 'is-circle' : ''} {class}\" style=\"{style}\">\r\n  <input type=\"checkbox\" {disabled} bind:checked on:change />\r\n<span class=\"kws-checkbox-label\" style=\"{label_style}\"><slot></slot></span>\r\n  {#if has_icon}\r\n    <Icon family={icon_family} {icon} size=\"small\" />\r\n  {/if}\r\n</label>\r\n\r\n\r\n<script>\r\n  import {Icon} from '@kws3/helpers';\r\n  export default {\r\n    components:{\r\n      Icon\r\n    },\r\n    computed:{\r\n      has_icon({icon}){\r\n        return icon && icon != '';\r\n      }\r\n    },\r\n    data: function(){\r\n      return {\r\n        class:'',\r\n        style:'',\r\n        label_style: '',\r\n        size: '',\r\n        color:'',\r\n        inverted: false,\r\n        circle: false,\r\n        checked: false,\r\n        icon: 'check',\r\n        icon_family: null\r\n      }\r\n    }\r\n  };\r\n</script>","<label class=\"radio kws-checkbox is-{size} is-{color} {inverted ? 'is-inverted' : ''} {circle ? 'is-circle' : ''} {class}\" style=\"{style}\">\r\n  <input type=\"radio\" {disabled} bind:group {value} on:change />\r\n  <span class=\"kws-checkbox-label\" style=\"{label_style}\"><slot></slot></span>\r\n</label>\r\n\r\n\r\n<script>\r\n  export default {\r\n    data: function(){\r\n      return {\r\n        value: null,\r\n        class:'',\r\n        style:'',\r\n        label_style: '',\r\n        size: '',\r\n        color:'',\r\n        inverted: false,\r\n        circle: false,\r\n        checked: false\r\n      }\r\n    }\r\n  };\r\n</script>","<div class=\"field has-addons\">\r\n  <div class=\"control\">\r\n    <button type=\"button\" class=\"button is-{size} is-{minus_button_color}\" style=\"box-shadow:none;\" on:click=\"count(-1)\" disabled=\"{disabled || value <= min}\">\r\n      <Icon icon=\"{minus_icon}\" size=\"small\" icon_class=\"has-text-{minus_icon_color}\"/>\r\n    </button>\r\n  </div>\r\n  <div class=\"control is-{fullwidth ? 'expanded' : 'narrow'}\">\r\n    <input\r\n      ref:input\r\n      class=\"input has-text-centered is-{size} is-{((value < min) || (value > max)) ? 'danger' : ''}\"\r\n      type=\"number\"\r\n      min=\"{min}\"\r\n      max=\"{max}\"\r\n      step=\"{step}\"\r\n      {disabled}\r\n      bind:value\r\n      on:blur=\"isBlurred()\"\r\n      on:focus=\"isFocused()\"\r\n    />\r\n  </div>\r\n  <div class=\"control\">\r\n    <button type=\"button\" class=\"button is-{size} is-{plus_button_color}\" style=\"box-shadow:none;\" on:click=\"count(+1)\" disabled=\"{disabled || value>=max}\">\r\n      <Icon icon=\"{plus_icon}\" size=\"small\" icon_class=\"has-text-{plus_icon_color}\"/>\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n<style>\r\n  input[type=number]::-webkit-inner-spin-button,\r\n  input[type=number]::-webkit-outer-spin-button {\r\n      -webkit-appearance: none;\r\n      margin: 0;\r\n  }\r\n  input[type=number]::-moz-inner-spin-button,\r\n  input[type=number]::-moz-outer-spin-button {\r\n      -moz-appearance: none;\r\n      margin: 0;\r\n  }\r\n  input[type=number]::inner-spin-button,\r\n  input[type=number]::outer-spin-button {\r\n      appearance: none;\r\n      margin: 0;\r\n  }\r\n</style>\r\n\r\n<script>\r\n  import {Icon} from '@kws3/helpers';\r\n\r\n  export default {\r\n    components: {\r\n      Icon\r\n    },\r\n    data() {\r\n      return {\r\n        size:'',\r\n        value: null,\r\n        step: 1,\r\n        min: 0,\r\n        max: 100,\r\n        disabled: false,\r\n        fullwidth: false,\r\n        minus_icon:'minus',\r\n        minus_icon_color:'danger',\r\n        minus_button_color: '',\r\n        plus_icon:'plus',\r\n        plus_icon_color:'success',\r\n        plus_button_color: '',\r\n        _has_focus: 0\r\n      }\r\n    },\r\n    oncreate(){\r\n      this.on('state', ({changed, current}) => {\r\n        if(changed.value && !current._has_focus){\r\n          this.validateInput();\r\n        }\r\n      });\r\n      this.validateInput();\r\n    },\r\n    methods:{\r\n      isFocused(){\r\n        this.set({_has_focus: true});\r\n      },\r\n      isBlurred(){\r\n        this.validateInput();\r\n        this.set({_has_focus: false});\r\n      },\r\n      count(i){\r\n        let {step, value, min} = this.get();\r\n        if(typeof value == 'undefined' || value === null) value = min;\r\n        value = (Number(value) + (i * step));\r\n        if(step % 1 != 0) value = value.toFixed(1);\r\n        this.set({value});\r\n        this.fire('change');\r\n      },\r\n      validateInput(){\r\n        let {value, min, max} = this.get();\r\n\r\n        if(typeof value == 'undefined' || value === null) value = min;\r\n\r\n        if(value < min) value = min;\r\n        if(value > max) value = max;\r\n\r\n        this.set({value});\r\n        this.fire('change');\r\n\r\n\r\n      }\r\n    }\r\n  }\r\n</script>","<div class=\"file-upload {classes} is-{_error ? 'danger' : ''} {(disabled || _is_uploading || _is_finished) ? 'is-disabled' : ''} {_is_finished ? 'is-success' : ''}\">\r\n  <div class=\"file-upload-inner\">\r\n    <div class=\"up-icon\">\r\n      {#if _is_uploading}\r\n        <span class=\"loader\"></span>\r\n      {:elseif _is_finished}\r\n        <Icon size=\"\" icon=\"check-circle\" fa_class=\"fa-lg\" />\r\n      {:else}\r\n        <Icon size=\"\" icon=\"arrow-circle-up\" fa_class=\"fa-lg\" />\r\n      {/if}\r\n    </div>\r\n    <div class=\"file\">\r\n      {#if _is_uploading}\r\n        <div class=\"upload-progress\">\r\n          <div class=\"progress-inner\">\r\n            <div class=\"bar\" style=\"width:{progress}%\"></div>\r\n          </div>\r\n        </div>\r\n        <div class=\"progress-caption\">{progress}% - Uploading...</div>\r\n      {:elseif _is_finished}\r\n        <div class=\"filename\">Upload complete!</div>\r\n      {:else}\r\n        <div class=\"filename\">{_filename}</div>\r\n      {/if}\r\n    </div>\r\n    <input ref:uploadInput type=\"file\" name=\"file\" on:change=\"updateFile()\" disabled=\"{(disabled || _is_uploading || _is_finished)}\">\r\n  </div>\r\n  <div class=\"level is-mobile\">\r\n    {#if _error}\r\n      <div class=\"level-item\" style=\"max-width:100%\">\r\n        <span class=\"help is-{_error ? 'danger' : ''}\">{_error_message}</span>\r\n      </div>\r\n    {:else}\r\n      <div class=\"level-left\">\r\n        <div class=\"level-item\">\r\n          <span class=\"help\">Max size: {maxFileSize}</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"level-item\" style=\"max-width:100%\">\r\n        <span class=\"help is-warning\">{info}</span>\r\n      </div>\r\n      <div class=\"level-right\">\r\n        <span class=\"help\">{fileTypes}</span>\r\n      </div>\r\n    {/if}\r\n  </div>\r\n</div>\r\n\r\n<script>\r\nimport { Icon } from '@kws3/helpers';\r\n\r\nvar formatFileSize = (n) => {\r\n  if(n===undefined||/\\D/.test(n)){return \"N/A\"}\r\n  if(n>1073741824){return Math.round(n/1073741824,1)+\" GB\"}\r\n  if(n>1048576){return Math.round(n/1048576,1)+\" MB\"}\r\n  if(n>1024){return Math.round(n/1024,1)+\" KB\"}\r\n  return n+\" b\"\r\n}\r\n\r\nexport default {\r\n  components:{\r\n    Icon,\r\n    },\r\n  data(){\r\n    return {\r\n      key: '',\r\n      message: 'Choose File...',\r\n      info: '',\r\n      max:5000000,\r\n      allowed:'*',\r\n      classes:'', //is-primary, is-success etc\r\n      disabled: false,\r\n      _filename:'No file selected',\r\n      _error: false,\r\n      _error_message: '',\r\n      _is_uploading: false,\r\n      _is_finished: false,\r\n      _total: 0,\r\n      _uploaded:0\r\n    };\r\n  },\r\n  computed:{\r\n    fileTypes({ allowed }){\r\n      if(allowed != '*' && typeof allowed.length != 'undefined'){\r\n        return allowed.join(', ');\r\n      }\r\n      return '';\r\n    },\r\n    progress({ _total, _uploaded }){\r\n      return Math.floor((_uploaded / _total) * 100);\r\n    },\r\n    maxFileSize({ max }){\r\n      return formatFileSize(max)\r\n    }\r\n  },\r\n  oncreate(){\r\n    this.uploadField = this.refs.uploadInput;\r\n    this.set({_filename: this.get().message});\r\n  },\r\n  methods:{\r\n    updateFile(){\r\n      if(!this.uploadField){\r\n        this.uploadField = this.refs.uploadInput;\r\n      }\r\n\r\n      var el = this.uploadField,\r\n      val = el.value,\r\n      { max, allowed }  = this.get(),\r\n      maxSize = max,\r\n      ext = '',\r\n      size = 0,\r\n      file = null,\r\n      valid = true;\r\n\r\n      this.FormData = new FormData();\r\n\r\n      this.set({\r\n        '_error': false,\r\n        '_error_message': ''\r\n      })\r\n\r\n      try{file=el.files[0];}catch(e){}\r\n\r\n      if(val === ''){\r\n        val = \"No file selected\";\r\n      }else{\r\n        if(file){\r\n          size = file.fileSize||file.size\r\n        }else{\r\n          size = 0\r\n        }\r\n        val = val.split(/[\\/\\\\]+/);\r\n        val = val[(val.length - 1)];\r\n        ext = val.split(/\\./);\r\n        ext = ext[(ext.length - 1)];\r\n        ext = ext.toLowerCase();\r\n        if(size == 0){\r\n          valid = false;\r\n          val = \"No file selected\";\r\n        }\r\n\r\n        //check if file extension is allowed\r\n        if(allowed != '*'){\r\n          if(typeof allowed.length != 'undefined'){\r\n            if(allowed.indexOf(ext) === -1){\r\n              valid = false;\r\n              this.set({\r\n                '_error': true,\r\n                '_error_message': 'Files of type '+ext+' are not allowed.\\n Allowed file types: ' + this.get().fileTypes,\r\n              });\r\n              el.value = \"\";\r\n              val = \"No file selected\";\r\n            }\r\n          }\r\n        }\r\n\r\n        //check if file size exceeds\r\n        if(maxSize > 0){\r\n          if(size > maxSize){\r\n            valid = false;\r\n            this.set({\r\n              '_error': true,\r\n              '_error_message': 'File size is too large. Maximum allowed file size is ' + formatFileSize(maxSize),\r\n            });\r\n            el.value = \"\";\r\n            val = \"No file selected\";\r\n          }\r\n        }\r\n\r\n      }\r\n\r\n      this.set({_filename: val});\r\n      if (valid) {\r\n        this.set({_total: size});\r\n        this.FormData.append(\"userfile\", file);\r\n        this.fire('file_chosen', this);\r\n      }\r\n\r\n    },\r\n    getFile(){\r\n      var {name, key, _total} = this.get();\r\n      return {\r\n        name,\r\n        key,\r\n        size: _total,\r\n        file: this.FormData\r\n      };\r\n    },\r\n    progress(uploaded_amount){\r\n      this.set({\r\n        '_is_uploading': true,\r\n        '_uploaded': uploaded_amount\r\n      });\r\n    },\r\n    uploaded(){\r\n      this.set({\r\n        '_is_uploading': false,\r\n        '_is_finished': true\r\n      });\r\n      setTimeout(() => {\r\n        this.set({\r\n          '_is_finished': false,\r\n          '_total': 0,\r\n          '_uploaded': 0,\r\n          '_filename': this.get().message\r\n        });\r\n        this.FormData = null;\r\n        this.uploadField.value = '';\r\n        this.uploadField.files = null;\r\n        this.fire('file_uploaded', this);\r\n      }, 3000)\r\n    },\r\n    error(msg){\r\n      this.set({\r\n        '_is_uploading': false,\r\n        '_error': true,\r\n        '_error_message': msg,\r\n        '_filename': this.get().message\r\n      });\r\n      this.FormData = null;\r\n      this.uploadField.value = '';\r\n      this.uploadField.files = null;\r\n      this.fire('file_upload_error', this);\r\n    }\r\n  }\r\n}\r\n</script>","<div class=\"columns is-multiline\" data-cy=\"advanced-search-form\">\r\n  {#if active_columns.length}\r\n    {#each active_columns as { name, value}, i}\r\n      <div class=\"column is-3\">\r\n        <div class=\"field has-addons\">\r\n          <div class=\"control is-expanded\">\r\n            <input class=\"input is-{size}\" type=\"text\" bind:value=\"value\" placeholder={name}>\r\n          </div>\r\n          {#if value}\r\n            <div class=\"control\">\r\n              <button type=\"button\" class=\"button is-{size} is-danger\" on:click=\"reset(i)\">\r\n                <Icon size=\"small\" icon=\"times-circle\" />\r\n              </button>\r\n            </div>\r\n          {/if}\r\n        </div>\r\n      </div>\r\n    {:else}\r\n      No columns\r\n    {/each}\r\n  {/if}\r\n  <div class=\"column\">\r\n    <div class=\"field is-grouped is-grouped-right\">\r\n      <div class=\"control\">\r\n        <SubmitButton\r\n          {size}\r\n          icon=\"search-plus\"\r\n          classes=\"is-fullwidth\"\r\n          text=\"Search\"\r\n          error_text=\"Failed to search\"\r\n          saved_text=\"Search Complete\"\r\n          bind:tracker=\"as_tracker\"\r\n          cy=\"{entity}-search-button\"\r\n        />\r\n      </div>\r\n      <div class=\"control\">\r\n        <button class=\"button is-{size} is-danger\" on:click=\"fire('resetFields', event)\">\r\n          <Icon size=\"small\" icon=\"undo\" />\r\n          <span>Reset</span>\r\n        </button>\r\n      </div>\r\n      {#if change_customer}\r\n        <div class=\"control\">\r\n          <button type=\"button\" class=\"button is-{size} is-warning\" on:click=\"set({change_customer: false})\">\r\n            <Icon size=\"small\" icon=\"times\" />\r\n            <span>Cancel</span>\r\n          </button>\r\n        </div>\r\n      {/if}\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<script>\r\n  import {Icon} from '@kws3/helpers';\r\n  import {SubmitButton} from '@kws3/buttons';\r\n  export default {\r\n    components: {\r\n      Icon, SubmitButton\r\n    },\r\n    data(){\r\n      return {\r\n        active_columns:[],\r\n        change_customer: false,\r\n      }\r\n    },\r\n    methods: {\r\n      reset(index){\r\n        var {active_columns} = this.get();\r\n        active_columns[index].value = '';\r\n        this.set({active_columns});\r\n      }\r\n    }\r\n  }\r\n</script>","<div class=\"search-wizard\" data-cy=\"{entity}-search-wizard\">\r\n  {#if has_title}\r\n    <div class=\"field has-addons\">\r\n      <div class=\"control is-expanded\">\r\n        <slot name=\"title\"></slot>\r\n      </div>\r\n      {#if has_advanced_search}\r\n        <ToggleControl style=\"padding-top:0\" cy=\"advanced-search-toggle-button\">\r\n          <label class=\"label is-{size}\">Advanced Search</label>\r\n          <Toggle {size} bind:on=is_advanced_search cy=\"toggle-button\"/>\r\n        </ToggleControl>\r\n      {/if}\r\n    </div>\r\n  {/if}\r\n\r\n  <div class=\"search-box\">\r\n    <form on:submit='getAll(event)'>\r\n      <div class=\"columns\">\r\n        <div class=\"column\">\r\n          {#if !is_advanced_search}\r\n            <div class=\"field is-grouped\">\r\n              <div class=\"control is-expanded\">\r\n                <div class=\"field has-addons\">\r\n                  <div class=\"control is-expanded\">\r\n                    <input type=\"text\" class=\"input is-{size}\" bind:value='searchString' disabled={is_advanced_search} placeholder={search_placeholder} data-cy=\"{entity}-search-input\">\r\n                  </div>\r\n                  {#if searchString}\r\n                    <div class=\"control\">\r\n                      <button type=\"button\" class=\"button is-{size} is-danger\" on:click=\"resetSearch()\">\r\n                        <Icon size=\"small\" icon=\"times-circle\" />\r\n                      </button>\r\n                    </div>\r\n                  {/if}\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"control\">\r\n                <div class=\"buttons\">\r\n                  <SubmitButton\r\n                    {size}\r\n                    icon=\"search\"\r\n                    text=\"Search\"\r\n                    error_text=\"Failed to search\"\r\n                    saved_text=\"Search Complete\"\r\n                    bind:tracker\r\n                    disabled={is_advanced_search}\r\n                    cy=\"{entity}-search-button\"\r\n                  />\r\n                  {#if customer_not_found}\r\n                    <button class=\"button is-success is-{size}\" on:click=\"set({active_pane:'add_new_customer'})\">\r\n                      <Icon icon=\"plus-circle\" size=\"small\" />\r\n                      <span>Add New Customer</span>\r\n                    </button>\r\n                  {/if}\r\n                </div>\r\n              </div>\r\n\r\n              {#if change_customer}\r\n                <div class=\"control\">\r\n                  <button type=\"button\" class=\"button is-{size} is-warning\" on:click=\"set({change_customer: false})\" data-cy=\"{entity}-search-cancel-button\">\r\n                    <Icon size=\"small\" icon=\"times\" />\r\n                    <span>Cancel</span>\r\n                  </button>\r\n                </div>\r\n              {/if}\r\n            </div>\r\n          {/if}\r\n        </div>\r\n      </div>\r\n\r\n      {#if is_advanced_search}\r\n        <AdvancedSearch bind:active_columns bind:as_tracker bind:change_customer on:resetFields {size} {entity} />\r\n      {/if}\r\n    </form>\r\n  </div>\r\n\r\n  <slot></slot>\r\n</div>\r\n\r\n<script>\r\n  import Model from '../../../models/patients';\r\n  import {Icon} from '@kws3/helpers';\r\n  import {Toggle, ToggleControl} from '@kws3/controls';\r\n  import {SubmitButton} from '@kws3/buttons';\r\n  import AdvancedSearch from './AdvancedSearch.html';\r\n\r\n  export default {\r\n    components:{\r\n      Icon, ToggleControl, Toggle,\r\n      SubmitButton,\r\n      AdvancedSearch\r\n    },\r\n    data(){\r\n      return {\r\n        Model,\r\n        meta: {},\r\n        data: {},\r\n        has_title: true,\r\n        has_advanced_search: true,\r\n        is_advanced_search: false,\r\n        change_customer: false,\r\n        searchString: '',\r\n        searchable_columns:{\r\n          'id': 'ID',\r\n          'name': 'Name',\r\n          'phone': 'Phone',\r\n          'address': 'Address',\r\n        },\r\n        active_columns: [],\r\n        size: '',\r\n        entity: 'patient',\r\n        tracker: {\r\n          saving: false,\r\n          saved: false,\r\n          error: false\r\n        },\r\n        as_tracker: {\r\n          saving: false,\r\n          saved: false,\r\n          error: false\r\n        }\r\n      }\r\n    },\r\n    computed:{\r\n      search_placeholder: ({searchable_columns}) => Object.values(searchable_columns).join(', '),\r\n      customer_not_found: ({ meta }) => meta && meta.count == 0\r\n    },\r\n    oncreate(){\r\n      this.on('resetFields', (e) => {\r\n        e.preventDefault();\r\n        this.resetASFields();\r\n      });\r\n\r\n      this.fillColumns();\r\n    },\r\n    onstate({changed, current}){\r\n      if(changed.is_advanced_search){\r\n        if(current.is_advanced_search){\r\n          this.resetASFields();\r\n        } else {\r\n          this.resetSearch();\r\n        }\r\n      }\r\n    },\r\n    methods:{\r\n      fillColumns(){\r\n        var {searchable_columns} = this.get();\r\n        var _columns = [];\r\n        for(const column in searchable_columns){\r\n          _columns.push({\r\n            name:searchable_columns[column],\r\n            field_name:column,\r\n            value: ''\r\n          });\r\n        }\r\n        this.set({active_columns: _columns});\r\n      },\r\n      proccesQuery(){\r\n        var {active_columns, searchString, is_advanced_search} = this.get();\r\n\r\n        var _q = '';\r\n\r\n        if(!is_advanced_search && searchString){\r\n          _q = active_columns.map((c, i)=>{\r\n            let pipe = i > 0 ? '|' :'';\r\n            if(c.field_name == 'id'){\r\n              return `${c.field_name}[eq]${pipe}:${searchString}`;\r\n            }\r\n            return `${c.field_name}[lk]${pipe}:${searchString}`;\r\n          }).join(',')\r\n        }\r\n\r\n        if(is_advanced_search){\r\n          _q = active_columns\r\n          .map((c)=> c.value ?  {key:c.field_name, value:c.value} : '')\r\n          .filter(Boolean)\r\n          .map((c)=>`${c.key}[lk]:${c.value}`).join(',')\r\n        }\r\n\r\n        return _q\r\n      },\r\n      getAll(e){\r\n        e && e.preventDefault();\r\n\r\n        var {is_advanced_search, Model} = this.get();\r\n        var _opts = this.proccesQuery();\r\n        var context = is_advanced_search ? 'as_tracker' : 'tracker'\r\n\r\n        if(!_opts){\r\n          return false;\r\n        }\r\n\r\n        if(e){\r\n          this.set({\r\n            [context]: {\r\n              saving: true,\r\n              saved: false,\r\n              error: false\r\n            },\r\n            p_data: []\r\n          });\r\n        }\r\n\r\n        Model && Model.getAll({limit: 20, offset: 0, q:_opts})\r\n        .then((r)=>{\r\n          \r\n          this.set({\r\n              p_data: r.response,\r\n              meta: r._meta,\r\n              is_error: false\r\n            });\r\n\r\n            if(e){\r\n              this.set({\r\n                [context]: {\r\n                  saving: false,\r\n                  saved: false,\r\n                  error: false\r\n                }\r\n              });\r\n            }\r\n        })\r\n        .catch((r) => {\r\n          var user_message = '';\r\n          if (r.response && typeof r.response.records != 'undefined'){\r\n            user_message = r.response.records.userMessage;\r\n          }\r\n          this.set({\r\n            error_message: user_message\r\n          });\r\n\r\n          if(e){\r\n            this.set({\r\n              [context]: {\r\n                saving: false,\r\n                saved: false,\r\n                error: true\r\n              }\r\n            });\r\n            setTimeout(() => {\r\n              this.set({\r\n                [context]: {\r\n                  error: false\r\n                }\r\n              });\r\n            }, 3000);\r\n          }\r\n        });\r\n      },\r\n      resetData(){\r\n        this.set({\r\n          meta:{},\r\n          data:[]\r\n        });\r\n      },\r\n      resetASFields(){\r\n        var {active_columns} = this.get();\r\n        active_columns.forEach((_,i) =>{active_columns[i].value = ''});\r\n        this.resetData();\r\n        this.set({active_columns});\r\n      },\r\n      resetSearch(){\r\n        this.resetData();\r\n        this.set({\r\n          searchString: ''\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>","{#if (typeof meta.total != 'undefined' && (meta.total == 0 || (!has_pagination && meta.total > 20)) || data.length)}\r\n  <div class=\"search-list\" data-cy=\"search-list\">\r\n    {#if (!has_pagination && meta.total > 20)}\r\n      <Message color=\"danger\">\r\n        <p class=\"has-text-centered\">\r\n          Too many results... Please narrow down your search criteria{#if has_advanced_search}, or use <b>Advanced search</b>{/if}.\r\n        </p>\r\n      </Message>\r\n    {:elseif meta.total == 0}\r\n    <SlidingPaneSet style=\"height:{pane_height}px\">\r\n      <SlidingPane active={active_pane=='not_found' } track_height on:heightChange>\r\n        <Message color=\"danger\">\r\n          <p class=\"has-text-centered is-size-6\">\r\n            No results found.\r\n          </p>\r\n        </Message>\r\n      </SlidingPane>\r\n      <SlidingPane active={active_pane=='add_new_customer' } track_height on:heightChange>\r\n        <!-- <CustomerCreate on:customerCreate/> -->\r\n      </SlidingPane>\r\n    </SlidingPaneSet>\r\n    {/if}\r\n\r\n    {#if data.length}\r\n      <ViewHOC target={targetview}\r\n        on:*=\"fire('_forwardEvent', event)\"\r\n        transition=\"{has_transition}\"\r\n        {iteration_key}\r\n        {data}\r\n        {columns}\r\n        {valueTransformers}\r\n        {styleTransformers}\r\n        {clickableRows}\r\n      />\r\n    {/if}\r\n  </div>\r\n{/if}\r\n\r\n<script>\r\n  import {createHOC} from '@kws3/helpers';\r\n  import {GridView} from '@kws3/datagrid';\r\n  import {Message} from '@kws3/helpers';\r\n  import { SlidingPaneSet, SlidingPane } from '@kws3/sliding-panes';\r\n  // import CustomerCreate from './CustomerCreate.html';\r\n\r\n  export default {\r\n    components:{\r\n      ViewHOC: createHOC(),\r\n      Message, SlidingPaneSet, SlidingPane\r\n    },\r\n    data(){\r\n      return {\r\n        targetview: GridView,\r\n        iteration_key:'id',\r\n        pane_height: 500,\r\n        active_pane: 'not_found',\r\n        meta:{},\r\n        data:[],\r\n        columns: {\r\n          'id': 'ID',\r\n          'name': 'Name',\r\n          'phone': 'Phone',\r\n          'address': 'Address'\r\n        },\r\n        valueTransformers: {\r\n          name: (v, row) => {\r\n            var ret = [row.title, row.name, row.surname].filter(i => i).join(' ');\r\n\r\n            if(row.premise){\r\n              ret += `<span class=\"is-block\">\r\n                <span class=\"tags has-addons\" style=\"margin:0\">\r\n                  <span class=\"tag is-small is-paddingless\">\r\n                    <span class=\"icon\"><i class=\"fa fa-building-o\"></i></span>\r\n                  </span>\r\n                  <span class=\"tag is-small\">${row.premise_name}</span>\r\n                </span>\r\n              </span>`;\r\n            }\r\n\r\n            return ret;\r\n          },\r\n          address: (v, row) => {\r\n            return [row.address]\r\n            .filter(Boolean)\r\n            .map(i => `<small class=\"is-block\">${i}</small>`)\r\n            .join('') +\r\n            `<span class=\"is-block\"><span class=\"tag is-small\"></span></span>`;\r\n          },\r\n          phone: (v, row) => {\r\n            let out = '';\r\n            if(row.phone && row.phone.trim() != ''){\r\n              out += row.phone;\r\n            }\r\n            if(row.mobile && row.mobile.trim() != ''){\r\n              out += `<span class=\"is-block\">\r\n                <span class=\"tags has-addons\" style=\"margin:0\">\r\n                  <span class=\"tag is-small is-paddingless\">\r\n                    <span class=\"icon\"><i class=\"fa fa-mobile fa-2x\"></i></span>\r\n                  </span>\r\n                  <span class=\"tag is-small\">${row.mobile}</span>\r\n                </span>\r\n              </span>`\r\n            }\r\n\r\n            return out;\r\n          },\r\n          email:(v) => `<small>${v}</small>`,\r\n        },\r\n        styleTransformers: {\r\n          email: () => 'word-break: break-all;'\r\n        },\r\n        has_pagination: false,\r\n        clickableRows: true,\r\n        has_advanced_search: true\r\n      }\r\n    },\r\n    computed:{\r\n      has_transition({ $settings, transition }){\r\n        if(typeof transition != 'undefined'){\r\n          return transition;\r\n        }else{\r\n          return $settings.transition;\r\n        }\r\n      },\r\n      active_pane: ({ active_pane }) => active_pane || 'not_found' \r\n    },\r\n    oncreate(){\r\n      this.on('_forwardEvent', (e) => {\r\n        this.fire(e.name, e.event);\r\n      });\r\n\r\n      this.on('heightChange', ({ height }) => {\r\n        this.set({ pane_height: height });\r\n      });\r\n    }\r\n  }\r\n</script>","<form on:submit=\"patient(event)\">\r\n  <Panel title=\"Patient\" has_toolbar={true} >\r\n    <div slot='toolbar'>\r\n      <div class=\"field\">\r\n        {#if data.patient}\r\n        <button type=\"button\" on:click=\"fire('changePatient')\" class=\"button is-text \" >\r\n          <span class=\"icon is-small\">\r\n             <i class=\"fa fa-pencil\"></i>\r\n         </span>\r\n         <span>Change patient</span>\r\n        </button>\r\n\r\n        <span class=\"tag is-success\">Patient Added</span>\r\n        {:else}\r\n        <div class=\"control\">\r\n          <label class=\"radio\">\r\n            <input type=\"radio\" bind:group=\"patient.patient_type\" value=\"old\"> OLD\r\n          </label>\r\n          <label class=\"radio\">\r\n            <input type=\"radio\" bind:group=\"patient.patient_type\" value=\"new\"> NEW\r\n          </label>\r\n          <label class=\"radio\">\r\n            <input type=\"radio\" bind:group=\"patient.patient_type\" value=\"none\"> NONE\r\n          </label>\r\n        </div>\r\n        {/if}\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        <h1 class=\"subtitle is-4\">Chief Complaint</h1>\r\n        <div class=\"field\">\r\n          <p class=\"control\">\r\n            <label class=\"label\" style=\"text-transform: capitalize;\">Search Here</label>\r\n              <SearchableSelect\r\n                data=\"{searchable_symp}\"\r\n                placeholder=\"Choose...\"\r\n                bind:_name=\"selected_all_symp\"\r\n                searchKey=\"name\"\r\n                searchValue=\"id\"\r\n              />\r\n          </p>\r\n        </div>\r\n        {#if data.cc}\r\n          <textarea class=\"textarea\" placeholder=\"CC...\" bind:value=\"data.cc\"></textarea>\r\n        {:else}\r\n          <textarea class=\"textarea\" placeholder=\"CC...\"></textarea>\r\n        {/if}\r\n      </div>\r\n\r\n      <div class=\"column\">\r\n        {#if patient.patient_type == 'old'}\r\n          {#if !data.patient}\r\n            <PatientSearch bind:active_pane bind:meta bind:p_data size=\"medium\">\r\n              <h1 slot=\"title\" class=\"subtitle is-4\">Patient Search</h1>\r\n            </PatientSearch>\r\n            <br>\r\n            <PatientSearchResults {active_pane} bind:data=\"p_data\" {meta} on:rowClick on:customerCreate />\r\n          {:else}\r\n            <PatientDetails data={data.patient} {case_id} />\r\n\r\n          {/if}\r\n        {:elseif patient.patient_type == 'new'}\r\n          <div class=\"columns\">\r\n            <div class=\"column\">\r\n              <div class=\"field\">\r\n                <p class=\"control\">\r\n                  <label class=\"label\">Name</label>\r\n                  <input class=\"input\" type=\"text\" required bind:value=\"patient.name\" />\r\n                </p>\r\n              </div>\r\n              <div class=\"field\">\r\n                <p class=\"control\">\r\n                  <label class=\"label\">Phone</label>\r\n                  <input class=\"input\" type=\"text\" bind:value=\"patient.phone\" />\r\n                </p>\r\n              </div>\r\n              <div class=\"field\">\r\n                <div class=\"control\">\r\n                  <label class=\"label\">Gender</label>\r\n                  <label class=\"radio\">\r\n                    <input type=\"radio\" bind:group=\"patient.gender\" value=\"m\"> Male\r\n                  </label>\r\n                  <label class=\"radio\">\r\n                    <input type=\"radio\" bind:group=\"patient.gender\" value=\"f\"> Female\r\n                  </label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"column\">\r\n              <div class=\"field\">\r\n                <p class=\"control\">\r\n                  <label class=\"label\">Age</label>\r\n                  <input class=\"input\" type=\"number\" required bind:value=\"patient.age\" autocomplete=\"off\" />\r\n                </p>\r\n              </div>\r\n              <div class=\"field\">\r\n                <p class=\"control\">\r\n                  <label class=\"label\">Address</label>\r\n                  <input class=\"input\" type=\"text\" bind:value=\"patient.address\" autocomplete=\"off\" />\r\n                </p>\r\n              </div>\r\n              <div class=\"field\">\r\n                <p class=\"control\">\r\n                  <label class=\"label\">&nbsp;</label>\r\n                  <SubmitButton classes=\"is-primary is-pulled-right\" icon=\"plus\" icon_size=\"small\" text=\"Add Patient\" disabled=\"{data.patient}\" bind:tracker />\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <span class=\"is-size-6 has-text-warning is-pulled-right\">This patient will be saved after saving the case history !</span><br>\r\n\r\n        {/if}\r\n      </div>\r\n    </div>\r\n\r\n  </Panel>\r\n</form>\r\n\r\n<script>\r\n  import { Panel } from '@kws3/helpers';\r\n  import { SubmitButton } from '@kws3/buttons';\r\n  import PatientSearch from '../../helpers/PatientSearch.html';\r\n  import PatientSearchResults from '../../helpers/PatientSearchResults.html';\r\n  import PatientDetails from '../../helpers/PatientDetails.html';\r\n  import SearchableSelect from '@kws3/searchable-select';\r\n\r\n  export default {\r\n    components: {\r\n      Panel, SubmitButton, PatientSearch, PatientSearchResults , PatientDetails,\r\n      SearchableSelect\r\n    },\r\n    data(){\r\n      return {\r\n        patient: {},\r\n        data: {},\r\n        meta: {},\r\n        searchable_symp: []\r\n      }\r\n    },\r\n    methods: {\r\n      patient(e){\r\n        e.preventDefault();\r\n        let {patient} = this.get();\r\n        this.fire('addPatient', patient);\r\n\r\n      }\r\n    },\r\n    oncreate(){\r\n      this.on('rowClick', ({row}) => {\r\n        this.fire('addPatient', row);\r\n\r\n      });\r\n\r\n      this.on('state', ({ changed, current, previous }) => {\r\n        let {data, selected_all_symp} = this.get()\r\n\r\n        if(current.selected_all_symp != previous.selected_all_symp){\r\n          let section = selected_all_symp.split(' -> ');\r\n          let value = section[0];\r\n\r\n          data['cc'] = data['cc'] ? data['cc']  + ', ' + value : value;\r\n          this.set({data})\r\n        }\r\n\r\n      });\r\n\r\n      this.on('changePatient', () => {\r\n        this.set({\r\n          patient: {\r\n            name: '',\r\n            age: '',\r\n            phone: '',\r\n            address: '',\r\n            patient_type: 'none'\r\n          },\r\n          data:{\r\n            patient: ''\r\n          }\r\n        })\r\n      })\r\n    }\r\n\r\n  }\r\n</script>","<Panel title=\"Sections\" has_toolbar={true} >\r\n  <div slot='toolbar'>\r\n    <ConfirmButton\r\n        text=\"Reset\"\r\n        color=\"danger\"\r\n        size=\"\"\r\n        icon=\"refresh\"\r\n        icon_only=\"{false}\"\r\n        disabled=\"{reset_disabled}\"\r\n        on:do=\"fire('reset', event)\"\r\n      />\r\n  </div>\r\n\r\n  <div class=\"columns\">\r\n    <div class=\"column\">\r\n      {#if remedies.length}\r\n      <div class=\"columns\">\r\n        <div class=\"column\">\r\n          <label class=\"label\">With Number</label>\r\n          <div class=\"field\">\r\n            <span class=\"select is-fullwidth\">\r\n              <select class=\"input\" bind:value=\"selected_section\" >\r\n                <option value=\"\">Select Type</option>\r\n                {#each filterFields as key, index }\r\n                    <option value=\"{key}\">{index+1} - {key}</option>\r\n                {/each}\r\n              </select>\r\n            </span>\r\n          </div>\r\n\r\n        </div>\r\n        <div class=\"column\">\r\n          <label class=\"label\">Without Number</label>\r\n          <div class=\"field\">\r\n            <span class=\"select is-fullwidth\">\r\n              <select class=\"input\" bind:value=\"selected_section\" >\r\n                <option value=\"\">Select Type</option>\r\n                {#each filterFields as key, index }\r\n                    <option value=\"{key}\">{key}</option>\r\n                {/each}\r\n              </select>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"columns\">\r\n        <div class=\"column\">\r\n          <div class=\"buttons\">\r\n            {#each filterFields as key }\r\n                <button type=\"button\" class=\"button is-medium is-{ (key == selected_section) ? 'success' : data[key] ? '' : 'info' } \" on:click=\"set({ selected_section: key })\" style=\"text-transform: capitalize; margin-left: .6rem; margin-bottom: .6rem;\">\r\n                  {#if data[key] }\r\n                    <span class=\"icon is-small\"><i class=\"fa fa-check\"></i></span>\r\n                  {/if}\r\n                  <span>{key}</span>\r\n                </button>\r\n            {/each}\r\n            </div>\r\n\r\n        </div>\r\n      </div>\r\n      {/if}\r\n    </div>\r\n\r\n  </div>\r\n\r\n</Panel>\r\n\r\n<script>\r\n  import { Icon, Notification, Panel, Message } from '@kws3/helpers';\r\n  import { SubmitButton, ConfirmButton } from '@kws3/buttons';\r\n\r\n\r\n  export default {\r\n    components: {\r\n      Panel, ConfirmButton\r\n    },\r\n    data(){\r\n      return {\r\n        remedies: [],\r\n        filterFields: [],\r\n        data: {},\r\n        selected_section: '',\r\n        reset_disabled: false,\r\n      }\r\n    }\r\n  }\r\n</script>"],"names":["active","class","style","v_center","h_center","track_height","[object Object]","this","refs","slideInner","init","setTimeout","pollForRender","fireSizeChange","get","rAF","h1","scrollHeight","h2","clientHeight","fire","height","Math","max","changed","current","_height","vertical","on","disabled","color","on_text","off_text","size","cy","set","toggle","type","large_loader","inner_style","classes","header_classes","inner_classes","title","has_title","previous","dismissable","destroy","dismiss","inner_class","fa_class","fa_style","usedFamily","_system_settings","family","icon_family","icon","icon_class","icon_style","store","system_settings","familyClass","internal_size","_used_inner_class","_used_inner_style","subtitle","collapse_icon","collapsible","collapsed","relative","has_toolbar","has_center","is_active","closable","close_on_click_outside","close","has_footer","value","options","active_class","inactive_class","fullwidth","setValue","option","length","name","label_style","inverted","circle","checked","has_icon","group","step","min","minus_icon","minus_icon_color","minus_button_color","plus_icon","plus_icon_color","plus_button_color","_has_focus","validateInput","i","Number","toFixed","count","isBlurred","isFocused","formatFileSize","n","undefined","test","round","allowed","join","_total","_uploaded","floor","key","message","info","_filename","_error","_error_message","_is_uploading","_is_finished","uploadField","uploadInput","el","val","maxSize","ext","file","valid","FormData","files","e","fileSize","split","toLowerCase","indexOf","fileTypes","append","uploaded_amount","msg","updateFile","progress","maxFileSize","active_columns","change_customer","index","reset","entity","as_tracker","event","searchable_columns","Object","values","meta","Model","data","has_advanced_search","is_advanced_search","searchString","id","phone","address","tracker","saving","saved","error","_columns","column","push","field_name","_q","map","c","pipe","filter","Boolean","preventDefault","_opts","proccesQuery","context","p_data","getAll","limit","offset","q","then","r","response","_meta","is_error","catch","user_message","records","userMessage","error_message","forEach","_","resetData","resetASFields","fillColumns","resetSearch","search_placeholder","customer_not_found","active_pane","createHOC","$settings","transition","targetview","GridView","iteration_key","pane_height","columns","valueTransformers","v","row","ret","surname","premise","premise_name","out","trim","mobile","email","styleTransformers","has_pagination","clickableRows","total","has_transition","patient","searchable_symp","selected_all_symp","age","patient_type","cc","gender","case_id","remedies","filterFields","selected_section","reset_disabled"],"mappings":"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"}