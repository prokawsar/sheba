{"version":3,"file":"chunk-b9cc4683.js","sources":["../../../src/components/views/helpers/Tabs.html","../../../src/components/views/search/helpers/SearchResult.html","../../../src/components/views/search/helpers/Sections.html","../../../src/utils/search.js"],"sourcesContent":["<PageTabBar {getTotalSpace} {getAvailableSpace} type=\"boxed\" alignment=\"centered\">\r\n  {#each tabs as tab}\r\n    <li class={(tab.name == active_tab) ? 'is-active ' : ''}>\r\n      <a href={tab.link ? tab.link : 'javascript:void(0)'} on:click=\"set({active_tab: tab.name})\">\r\n        <Icon size=\"small\" icon={tab.icon} />\r\n        <span>{tab.title}</span>\r\n      </a>\r\n    </li>\r\n  {/each}\r\n</PageTabBar>\r\n\r\n<script>\r\n  import { Icon } from '@kws3/helpers';\r\n  import PageTabBar from '../../helpers/PageTabBar.html';\r\n\r\n  export default {\r\n    components: {\r\n      Icon,\r\n      PageTabBar\r\n    },\r\n    computed: {\r\n      tabs : ({ link, tabs, id, is_detailed_route }) => {\r\n        if(link)\r\n        {\r\n          tabs.forEach(e => {\r\n            if(e.default_route) {\r\n              e.link = e.is_detailed_route ? `javascript:void(0)` : `${link}/${id}/${e.default_route}`;\r\n            } else {\r\n              e.link = e.default_route ? `javascript:void(0)` : `${link}/${id}/${e.name}`;\r\n            }\r\n          });\r\n          return tabs;\r\n        }\r\n        return tabs;\r\n      },\r\n      is_detailed_route: ({ $nav }) => {\r\n        if ($nav && typeof $nav.params[1] != 'undefined') {\r\n          return $nav.params[1];\r\n        }\r\n        return false;\r\n      },\r\n    },\r\n    data() {\r\n      return {\r\n        getTotalSpace(tabbar) {\r\n          var totalSpace = tabbar.children[0].clientWidth;\r\n          return totalSpace;\r\n        },\r\n        getAvailableSpace(tabbar, totalSpace) {\r\n          var availableSpace = tabbar.clientWidth;\r\n          return availableSpace;\r\n        },\r\n        tab_list: {},\r\n        active_tab: 'details'\r\n      }\r\n    }\r\n  }\r\n</script>","<table class=\"table is-narrow\">\r\n  <thead>\r\n    <tr>\r\n      <th>Symptoms</th>\r\n      <th></th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    {#if selected_symptom != ''}\r\n      {#each loadSymptoms[selected_symptom] as data}\r\n        {#if Array.isArray(data)}\r\n          {#each data as symp}\r\n            <tr>\r\n              <td>{symp}</td>\r\n              <td class=\"is-icon\" ><span class=\"icon\" style=\"cursor: pointer;\" ><i class=\"fa fa-arrow-right\"></i></span>\r\n              </td>\r\n            </tr>\r\n          {/each}\r\n        {:else}\r\n        <tr class=\"transible\">\r\n          <td class=\"\" >{data}</td>\r\n          <td class=\"is-icon\" ><span class=\"icon\" style=\"cursor: pointer;\" ><i class=\"fa fa-arrow-right\"></i></span>\r\n          </td>\r\n        </tr>\r\n        {/if}\r\n      {/each}\r\n    {/if}\r\n  </tbody>\r\n</table>\r\n\r\n<script>\r\n\r\n  export default {\r\n    data(){\r\n      return {\r\n        selected_symptom: '',\r\n        loadSymptoms: []\r\n      }\r\n    }\r\n  }\r\n</script>","<Panel title=\"Sections\" has_toolbar={true} >\r\n  <div slot='toolbar'>\r\n    <ConfirmButton\r\n        text=\"Reset\"\r\n        color=\"danger\"\r\n        size=\"\"\r\n        icon=\"refresh\"\r\n        icon_only=\"{false}\"\r\n        disabled=\"{reset_disabled}\"\r\n        on:do=\"fire('reset', event)\"\r\n      />\r\n  </div>\r\n\r\n  <div class=\"columns\">\r\n    <div class=\"column\">\r\n      {#if remedies.length}\r\n      <div class=\"columns\">\r\n        <div class=\"column\">\r\n          <label class=\"label\">With Number</label>\r\n          <div class=\"field\">\r\n            <span class=\"select is-fullwidth\">\r\n              <select class=\"input\" bind:value=\"selected_section\" >\r\n                <option value=\"\">Select Type</option>\r\n                {#each filterFields as key, index }\r\n                    <option value=\"{key}\">{index+1} - {key}</option>\r\n                {/each}\r\n              </select>\r\n            </span>\r\n          </div>\r\n\r\n        </div>\r\n        <div class=\"column\">\r\n          <label class=\"label\">Without Number</label>\r\n          <div class=\"field\">\r\n            <span class=\"select is-fullwidth\">\r\n              <select class=\"input\" bind:value=\"selected_section\" >\r\n                <option value=\"\">Select Type</option>\r\n                {#each filterFields as key, index }\r\n                    <option value=\"{key}\">{key}</option>\r\n                {/each}\r\n              </select>\r\n            </span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"columns\">\r\n        <div class=\"column\">\r\n          <div class=\"buttons\">\r\n            {#each filterFields as key }\r\n                <button type=\"button\" class=\"button is-medium is-{ (key == selected_section) ? 'success' : data[key] ? '' : 'info' } \" on:click=\"set({ selected_section: key })\" style=\"text-transform: capitalize; margin-left: .6rem; margin-bottom: .6rem;\">\r\n                  {#if data[key] }\r\n                    <span class=\"icon is-small\"><i class=\"fa fa-check\"></i></span>\r\n                  {/if}\r\n                  <span>{key}</span>\r\n                </button>\r\n            {/each}\r\n            </div>\r\n\r\n        </div>\r\n      </div>\r\n      {/if}\r\n    </div>\r\n\r\n  </div>\r\n\r\n</Panel>\r\n\r\n<script>\r\n  import { Icon, Notification, Panel, Message } from '@kws3/helpers';\r\n  import { SubmitButton, ConfirmButton } from '@kws3/buttons';\r\n\r\n\r\n  export default {\r\n    components: {\r\n      Panel, ConfirmButton\r\n    },\r\n    data(){\r\n      return {\r\n        remedies: [],\r\n        filterFields: [],\r\n        data: {},\r\n        selected_section: '',\r\n        reset_disabled: false,\r\n      }\r\n    }\r\n  }\r\n</script>","/*\r\nreturn resut as array of objects\r\n[\r\n  {\r\n    id: remedy id,\r\n    name: remedy name,\r\n    mark: remedy gets matched mark\r\n    fields: matched fields name and queries\r\n  }\r\n]\r\n*/\r\nexport default function(data, remedies){\r\n  let _payload = [],\r\n      matched_remedies = [],\r\n      omitted_field = [ 'id', 'name', 'created', 'modified', 'deleted', 'patient', 'treatments', 'book_references', 'total_data_size'];\r\n\r\n  //reducing null fields from payload\r\n  for(let [key, value] of Object.entries(data)) {\r\n    if(value && !omitted_field.includes(key)){\r\n      _payload[key] = value.split(',').filter( (e) => {\r\n        return e != null && e.trim() != '';\r\n      })\r\n    }\r\n  }\r\n  // console.log(_payload)\r\n\r\n  for(let [key, values] of Object.entries(_payload)) { // values are array of symptoms\r\n    values.forEach( (value) => {\r\n      remedies.forEach( (remedy) => {\r\n        if(remedy[key] != '' && remedy[key] ){\r\n          remedy[key].split(',').forEach( (symptom) =>{ // matching with each symptoms for remedy\r\n\r\n            if( value.trim() != '' && symptom.trim().includes(value.trim())){\r\n              var is_remedy_exist = matched_remedies.find(obj => {\r\n                return obj.name === remedy['name']\r\n              })\r\n\r\n              if(is_remedy_exist){\r\n                let objIndex = matched_remedies.findIndex((obj => obj.id == is_remedy_exist.id));\r\n                matched_remedies[objIndex].mark++;\r\n                if(!matched_remedies[objIndex].fields[key]){\r\n                  matched_remedies[objIndex].fields[key] = [];\r\n                  matched_remedies[objIndex].fields[key].push({\r\n                    matched: symptom.trim(),\r\n                    query: value.trim()\r\n                  });\r\n                }else{\r\n                  matched_remedies[objIndex].fields[key].push({\r\n                    matched: symptom.trim(),\r\n                    query: value.trim()\r\n                  });\r\n                }\r\n              }else{\r\n                let fields = {};\r\n                fields[key] = [];\r\n                fields[key].push({\r\n                  matched: symptom.trim(),\r\n                  query: value.trim()\r\n                });\r\n\r\n                matched_remedies.push({\r\n                  id: remedy.id,\r\n                  name: remedy.name,\r\n                  mark: 1,\r\n                  fields\r\n                })\r\n              }\r\n              // if( matched_remedies.hasOwnProperty(remedy['name']) ){\r\n              //   matched_remedies[remedy['name']].mark++;\r\n\r\n              //   if( !matched_remedies[remedy['name']].fields[key] ){\r\n              //     matched_remedies[remedy['name']].fields[key] = [];\r\n              //   }\r\n              //   matched_remedies[remedy['name']].fields[key].push({\r\n              //     matched: symptom.trim(),\r\n              //     query: value.trim()\r\n              //   });\r\n\r\n              // }else{\r\n              //   matched_remedies[remedy['name']] = {};\r\n              //   matched_remedies[remedy['name']].id = remedy['id'];\r\n              //   matched_remedies[remedy['name']].mark = 1;\r\n\r\n              //   matched_remedies[remedy['name']].fields = {};\r\n              //   matched_remedies[remedy['name']].fields[key] = [];\r\n              //   matched_remedies[remedy['name']].fields[key].push({\r\n              //     matched: symptom.trim(),\r\n              //     query: value.trim()\r\n              //   });\r\n\r\n              // }\r\n            }\r\n          })\r\n        }\r\n\r\n      })\r\n    })\r\n  }\r\n  return matched_remedies;\r\n}"],"names":["link","tabs","id","is_detailed_route","forEach","e","default_route","name","$nav","params","getTotalSpace","tabbar","children","clientWidth","getAvailableSpace","totalSpace","tab_list","active_tab","set","tab","length","title","icon","selected_symptom","loadSymptoms","data","symp","Array","isArray","remedies","filterFields","selected_section","reset_disabled","key","fire","event","index","_payload","matched_remedies","omitted_field","value","Object","entries","includes","split","filter","trim","values","remedy","symptom","is_remedy_exist","find","obj","objIndex","findIndex","mark","fields","push","matched","query"],"mappings":"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"}