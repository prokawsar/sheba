var K_ENV="prod",K_ENV_DEV="dev",K_ENV_TEST="test",K_ENV_PROD="prod";import{A as addListener,a as append,b as assign,u as createComment,d as createElement,e as createFragment,f as createText,v as destroyEach,g as detachNode,h as flush,i as init,j as insert,l as proto,m as removeFromStore,B as removeListener,w as setData,n as Icon,Y as selectOption,Z as selectValue,C as setAttribute,D as setStyle,y as Notification,x as Panel,o as Message}from"./chunk-b74ece54.js";import{a as SubmitButton,c as ConfirmButton}from"./chunk-a0c19dba.js";import{a as PageTabBar}from"./chunk-6760c5c7.js";function tabs({link:e,tabs:t,id:a,is_detailed_route:n}){return e?(t.forEach(t=>{t.default_route?t.link=t.is_detailed_route?"javascript:void(0)":`${e}/${a}/${t.default_route}`:t.link=t.default_route?"javascript:void(0)":`${e}/${a}/${t.name}`}),t):t}function is_detailed_route({$nav:e}){return!(!e||void 0===e.params[1])&&e.params[1]}function data(){return{getTotalSpace:e=>e.children[0].clientWidth,getAvailableSpace:(e,t)=>e.clientWidth,tab_list:{},active_tab:"details"}}function click_handler(e){const{component:t,ctx:a}=this._svelte;t.set({active_tab:a.tab.name})}function get_each_context(e,t,a){const n=Object.create(e);return n.tab=t[a],n}function create_main_fragment(e,t){for(var a,n=t.tabs,c=[],r=0;r<n.length;r+=1)c[r]=create_each_block(e,get_each_context(t,n,r));var s={getTotalSpace:t.getTotalSpace,getAvailableSpace:t.getAvailableSpace,type:"boxed",alignment:"centered"},l=new PageTabBar({root:e.root,store:e.store,slots:{default:createFragment()},data:s});return{c(){for(var e=0;e<c.length;e+=1)c[e].c();a=createComment(),l._fragment.c()},m(e,t){for(var n=0;n<c.length;n+=1)c[n].m(l._slotted.default,null);append(l._slotted.default,a),l._mount(e,t)},p(t,r){if(t.tabs||t.active_tab){n=r.tabs;for(var s=0;s<n.length;s+=1){const l=get_each_context(r,n,s);c[s]?c[s].p(t,l):(c[s]=create_each_block(e,l),c[s].c(),c[s].m(a.parentNode,a))}for(;s<c.length;s+=1)c[s].d(1);c.length=n.length}var o={};t.getTotalSpace&&(o.getTotalSpace=r.getTotalSpace),t.getAvailableSpace&&(o.getAvailableSpace=r.getAvailableSpace),l._set(o)},d(e){destroyEach(c,e),l.destroy(e)}}}function create_each_block(e,t){var a,n,c,r,s,l,o,i,d=t.tab.title,_={size:"small",icon:t.tab.icon},m=new Icon({root:e.root,store:e.store,data:_});return{c(){a=createElement("li"),n=createElement("a"),m._fragment.c(),c=createText("\r\n        "),r=createElement("span"),s=createText(d),o=createText("\r\n    "),n._svelte={component:e,ctx:t},addListener(n,"click",click_handler),n.href=l=t.tab.link?t.tab.link:"javascript:void(0)",a.className=i=t.tab.name==t.active_tab?"is-active ":""},m(e,t){insert(e,a,t),append(a,n),m._mount(n,null),append(n,c),append(n,r),append(r,s),append(a,o)},p(e,c){t=c;var r={};e.tabs&&(r.icon=t.tab.icon),m._set(r),e.tabs&&d!==(d=t.tab.title)&&setData(s,d),n._svelte.ctx=t,e.tabs&&l!==(l=t.tab.link?t.tab.link:"javascript:void(0)")&&(n.href=l),(e.tabs||e.active_tab)&&i!==(i=t.tab.name==t.active_tab?"is-active ":"")&&(a.className=i)},d(e){e&&detachNode(a),m.destroy(),removeListener(n,"click",click_handler)}}}function Tabs(e){init(this,e),this._state=assign(assign(this.store._init(["nav"]),data()),e.data),this.store._add(this,["nav"]),this._recompute({$nav:1,link:1,tabs:1,id:1,is_detailed_route:1},this._state),this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}function data$1(){return{selected_symptom:"",loadSymptoms:[]}}function get_each_context_1(e,t,a){const n=Object.create(e);return n.symp=t[a],n}function get_each_context$1(e,t,a){const n=Object.create(e);return n.data=t[a],n}function create_main_fragment$1(e,t){var a,n,c,r,s=""!=t.selected_symptom&&create_if_block(e,t);return{c(){a=createElement("table"),(n=createElement("thead")).innerHTML="<tr><th>Symptoms</th>\n\t\t\t      <th></th></tr>",c=createText("\r\n  "),r=createElement("tbody"),s&&s.c(),a.className="table is-narrow"},m(e,t){insert(e,a,t),append(a,n),append(a,c),append(a,r),s&&s.m(r,null)},p(t,a){""!=a.selected_symptom?s?s.p(t,a):((s=create_if_block(e,a)).c(),s.m(r,null)):s&&(s.d(1),s=null)},d(e){e&&detachNode(a),s&&s.d()}}}function create_if_block(e,t){for(var a,n=t.loadSymptoms[t.selected_symptom],c=[],r=0;r<n.length;r+=1)c[r]=create_each_block$1(e,get_each_context$1(t,n,r));return{c(){for(var e=0;e<c.length;e+=1)c[e].c();a=createComment()},m(e,t){for(var n=0;n<c.length;n+=1)c[n].m(e,t);insert(e,a,t)},p(t,r){if(t.Array||t.loadSymptoms||t.selected_symptom){n=r.loadSymptoms[r.selected_symptom];for(var s=0;s<n.length;s+=1){const l=get_each_context$1(r,n,s);c[s]?c[s].p(t,l):(c[s]=create_each_block$1(e,l),c[s].c(),c[s].m(a.parentNode,a))}for(;s<c.length;s+=1)c[s].d(1);c.length=n.length}},d(e){destroyEach(c,e),e&&detachNode(a)}}}function create_else_block(e,t){var a,n,c,r,s,l,o=t.data;return{c(){a=createElement("tr"),n=createElement("td"),c=createText(o),r=createText("\r\n          "),(s=createElement("td")).innerHTML='<span class="icon" style="cursor: pointer;"><i class="fa fa-arrow-right"></i></span>',l=createText("\r\n        "),n.className="",s.className="is-icon",a.className="transible"},m(e,t){insert(e,a,t),append(a,n),append(n,c),append(a,r),append(a,s),append(a,l)},p(e,t){(e.loadSymptoms||e.selected_symptom)&&o!==(o=t.data)&&setData(c,o)},d(e){e&&detachNode(a)}}}function create_if_block_1(e,t){for(var a,n=t.data,c=[],r=0;r<n.length;r+=1)c[r]=create_each_block_1(e,get_each_context_1(t,n,r));return{c(){for(var e=0;e<c.length;e+=1)c[e].c();a=createComment()},m(e,t){for(var n=0;n<c.length;n+=1)c[n].m(e,t);insert(e,a,t)},p(t,r){if(t.loadSymptoms||t.selected_symptom){n=r.data;for(var s=0;s<n.length;s+=1){const l=get_each_context_1(r,n,s);c[s]?c[s].p(t,l):(c[s]=create_each_block_1(e,l),c[s].c(),c[s].m(a.parentNode,a))}for(;s<c.length;s+=1)c[s].d(1);c.length=n.length}},d(e){destroyEach(c,e),e&&detachNode(a)}}}function create_each_block_1(e,t){var a,n,c,r,s,l,o=t.symp;return{c(){a=createElement("tr"),n=createElement("td"),c=createText(o),r=createText("\r\n              "),(s=createElement("td")).innerHTML='<span class="icon" style="cursor: pointer;"><i class="fa fa-arrow-right"></i></span>',l=createText("\r\n            "),s.className="is-icon"},m(e,t){insert(e,a,t),append(a,n),append(n,c),append(a,r),append(a,s),append(a,l)},p(e,t){(e.loadSymptoms||e.selected_symptom)&&o!==(o=t.symp)&&setData(c,o)},d(e){e&&detachNode(a)}}}function create_each_block$1(e,t){var a;function n(e){return e.Array.isArray(e.data)?create_if_block_1:create_else_block}var c=n(t),r=c(e,t);return{c(){r.c(),a=createComment()},m(e,t){r.m(e,t),insert(e,a,t)},p(t,s){c===(c=n(s))&&r?r.p(t,s):(r.d(1),(r=c(e,s)).c(),r.m(a.parentNode,a))},d(e){r.d(e),e&&detachNode(a)}}}function SearchResult(e){init(this,e),this._state=assign(assign({Array:Array},data$1()),e.data),this._intro=!0,this._fragment=create_main_fragment$1(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function data$2(){return{remedies:[],filterFields:[],data:{},selected_section:"",reset_disabled:!1}}function click_handler$1(e){const{component:t,ctx:a}=this._svelte;t.set({selected_section:a.key})}function get_each2_context(e,t,a){const n=Object.create(e);return n.key=t[a],n}function get_each1_context(e,t,a){const n=Object.create(e);return n.key=t[a],n.index=a,n}function get_each0_context(e,t,a){const n=Object.create(e);return n.key=t[a],n.index=a,n}function create_main_fragment$2(e,t){var a,n,c,r,s={text:"Reset",color:"danger",size:"",icon:"refresh",icon_only:!1,disabled:t.reset_disabled},l=new ConfirmButton({root:e.root,store:e.store,data:s});l.on("do",function(t){e.fire("reset",t)});var o=t.remedies.length&&create_if_block$1(e,t),i=new Panel({root:e.root,store:e.store,slots:{default:createFragment(),toolbar:createFragment()},data:{title:"Sections",has_toolbar:!0}});return{c(){a=createElement("div"),l._fragment.c(),n=createText("\r\n\r\n  "),c=createElement("div"),r=createElement("div"),o&&o.c(),i._fragment.c(),setAttribute(a,"slot","toolbar"),r.className="column",c.className="columns"},m(e,t){append(i._slotted.toolbar,a),l._mount(a,null),append(i._slotted.default,n),append(i._slotted.default,c),append(c,r),o&&o.m(r,null),i._mount(e,t)},p(t,a){var n={};t.reset_disabled&&(n.disabled=a.reset_disabled),l._set(n),a.remedies.length?o?o.p(t,a):((o=create_if_block$1(e,a)).c(),o.m(r,null)):o&&(o.d(1),o=null)},d(e){l.destroy(),o&&o.d(),i.destroy(e)}}}function create_if_block$1(e,t){for(var a,n,c,r,s,l,o,i,d,_,m,p,h,u,f,g,b,v,k,y,x=!1,E=!1,N=t.filterFields,T=[],$=0;$<N.length;$+=1)T[$]=create_each_block_2(e,get_each0_context(t,N,$));function S(){x=!0,e.set({selected_section:selectValue(o)}),x=!1}var F=t.filterFields,j=[];for($=0;$<F.length;$+=1)j[$]=create_each_block_1$1(e,get_each1_context(t,F,$));function A(){E=!0,e.set({selected_section:selectValue(f)}),E=!1}var L=t.filterFields,O=[];for($=0;$<L.length;$+=1)O[$]=create_each_block$2(e,get_each2_context(t,L,$));return{c(){a=createElement("div"),n=createElement("div"),(c=createElement("label")).textContent="With Number",r=createText("\r\n          "),s=createElement("div"),l=createElement("span"),o=createElement("select"),(i=createElement("option")).textContent="Select Type";for(var x=0;x<T.length;x+=1)T[x].c();d=createText("\r\n        "),_=createElement("div"),(m=createElement("label")).textContent="Without Number",p=createText("\r\n          "),h=createElement("div"),u=createElement("span"),f=createElement("select"),(g=createElement("option")).textContent="Select Type";for(x=0;x<j.length;x+=1)j[x].c();b=createText("\r\n\r\n      "),v=createElement("div"),k=createElement("div"),y=createElement("div");for(x=0;x<O.length;x+=1)O[x].c();c.className="label",i.__value="",i.value=i.__value,addListener(o,"change",S),"selected_section"in t||e.root._beforecreate.push(S),o.className="input",l.className="select is-fullwidth",s.className="field",n.className="column",m.className="label",g.__value="",g.value=g.__value,addListener(f,"change",A),"selected_section"in t||e.root._beforecreate.push(A),f.className="input",u.className="select is-fullwidth",h.className="field",_.className="column",a.className="columns",y.className="buttons",k.className="column",v.className="columns"},m(e,x){insert(e,a,x),append(a,n),append(n,c),append(n,r),append(n,s),append(s,l),append(l,o),append(o,i);for(var E=0;E<T.length;E+=1)T[E].m(o,null);selectOption(o,t.selected_section),append(a,d),append(a,_),append(_,m),append(_,p),append(_,h),append(h,u),append(u,f),append(f,g);for(E=0;E<j.length;E+=1)j[E].m(f,null);selectOption(f,t.selected_section),insert(e,b,x),insert(e,v,x),append(v,k),append(k,y);for(E=0;E<O.length;E+=1)O[E].m(y,null)},p(t,a){if(t.filterFields){N=a.filterFields;for(var n=0;n<N.length;n+=1){const c=get_each0_context(a,N,n);T[n]?T[n].p(t,c):(T[n]=create_each_block_2(e,c),T[n].c(),T[n].m(o,null))}for(;n<T.length;n+=1)T[n].d(1);T.length=N.length}if(!x&&t.selected_section&&selectOption(o,a.selected_section),t.filterFields){F=a.filterFields;for(n=0;n<F.length;n+=1){const c=get_each1_context(a,F,n);j[n]?j[n].p(t,c):(j[n]=create_each_block_1$1(e,c),j[n].c(),j[n].m(f,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=F.length}if(!E&&t.selected_section&&selectOption(f,a.selected_section),t.filterFields||t.selected_section||t.data){L=a.filterFields;for(n=0;n<L.length;n+=1){const c=get_each2_context(a,L,n);O[n]?O[n].p(t,c):(O[n]=create_each_block$2(e,c),O[n].c(),O[n].m(y,null))}for(;n<O.length;n+=1)O[n].d(1);O.length=L.length}},d(e){e&&detachNode(a),destroyEach(T,e),removeListener(o,"change",S),destroyEach(j,e),removeListener(f,"change",A),e&&(detachNode(b),detachNode(v)),destroyEach(O,e)}}}function create_each_block_2(e,t){var a,n,c,r,s,l=t.index+1,o=t.key;return{c(){a=createElement("option"),n=createText(l),c=createText(" - "),r=createText(o),a.__value=s=t.key,a.value=a.__value},m(e,t){insert(e,a,t),append(a,n),append(a,c),append(a,r)},p(e,t){e.filterFields&&o!==(o=t.key)&&setData(r,o),e.filterFields&&s!==(s=t.key)&&(a.__value=s),a.value=a.__value},d(e){e&&detachNode(a)}}}function create_each_block_1$1(e,t){var a,n,c,r=t.key;return{c(){a=createElement("option"),n=createText(r),a.__value=c=t.key,a.value=a.__value},m(e,t){insert(e,a,t),append(a,n)},p(e,t){e.filterFields&&r!==(r=t.key)&&setData(n,r),e.filterFields&&c!==(c=t.key)&&(a.__value=c),a.value=a.__value},d(e){e&&detachNode(a)}}}function create_if_block_1$1(e,t){var a;return{c(){(a=createElement("span")).innerHTML='<i class="fa fa-check"></i>',a.className="icon is-small"},m(e,t){insert(e,a,t)},d(e){e&&detachNode(a)}}}function create_each_block$2(e,t){var a,n,c,r,s,l,o=t.key,i=t.data[t.key]&&create_if_block_1$1(e,t);return{c(){a=createElement("button"),i&&i.c(),n=createText("\r\n                  "),c=createElement("span"),r=createText(o),s=createText("\r\n                "),a._svelte={component:e,ctx:t},addListener(a,"click",click_handler$1),a.type="button",a.className=l="button is-medium is-"+(t.key==t.selected_section?"success":t.data[t.key]?"":"info")+" ",setStyle(a,"text-transform","capitalize"),setStyle(a,"margin-left",".6rem"),setStyle(a,"margin-bottom",".6rem")},m(e,t){insert(e,a,t),i&&i.m(a,null),append(a,n),append(a,c),append(c,r),append(a,s)},p(c,s){(t=s).data[t.key]?i||((i=create_if_block_1$1(e,t)).c(),i.m(a,n)):i&&(i.d(1),i=null),c.filterFields&&o!==(o=t.key)&&setData(r,o),a._svelte.ctx=t,(c.filterFields||c.selected_section||c.data)&&l!==(l="button is-medium is-"+(t.key==t.selected_section?"success":t.data[t.key]?"":"info")+" ")&&(a.className=l)},d(e){e&&detachNode(a),i&&i.d(),removeListener(a,"click",click_handler$1)}}}function Sections(e){init(this,e),this._state=assign(data$2(),e.data),this._intro=!0,this._fragment=create_main_fragment$2(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}function _search(e,t){let a=[],n=[],c=["id","name","created","modified","deleted","patient","treatments","book_references","total_data_size"];for(let[t,n]of Object.entries(e))n&&!c.includes(t)&&(a[t]=n.split(",").filter(e=>null!=e&&""!=e.trim()));for(let[e,c]of Object.entries(a))c.forEach(a=>{t.forEach(t=>{""!=t[e]&&t[e]&&t[e].split(",").forEach(c=>{if(""!=a.trim()&&c.trim().includes(a.trim())){var r=n.find(e=>e.name===t.name);if(r){let t=n.findIndex(e=>e.id==r.id);n[t].mark++,n[t].fields[e]?n[t].fields[e].push({matched:c.trim(),query:a.trim()}):(n[t].fields[e]=[],n[t].fields[e].push({matched:c.trim(),query:a.trim()}))}else{let r={};r[e]=[],r[e].push({matched:c.trim(),query:a.trim()}),n.push({id:t.id,name:t.name,mark:1,fields:r})}}})})});return n}assign(Tabs.prototype,proto),Tabs.prototype._recompute=function(e,t){e.$nav&&this._differs(t.is_detailed_route,t.is_detailed_route=is_detailed_route(t))&&(e.is_detailed_route=!0),(e.link||e.tabs||e.id||e.is_detailed_route)&&this._differs(t.tabs,t.tabs=tabs(t))&&(e.tabs=!0)},assign(SearchResult.prototype,proto),assign(Sections.prototype,proto);export{Sections as a,_search as b,Tabs as c};
//# sourceMappingURL=chunk-b9cc4683.js.map
