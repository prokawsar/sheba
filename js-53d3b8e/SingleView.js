var K_ENV="prod",K_ENV_DEV="dev",K_ENV_TEST="test",K_ENV_PROD="prod";import{w as addListener,a as append,b as assign,c as assignTrue,z as createComment,d as createElement,e as createFragment,f as createText,A as destroyEach,g as detachNode,h as flush,i as init,j as insert,l as proto,m as removeFromStore,x as removeListener,y as setAttribute,B as setData,C as setStyle,n as Icon,E as Notification,D as Panel,o as Message,q as ViewScaffold,r as PageTitle}from"./chunk-10c73911.js";import{b as SubmitButton}from"./chunk-fd52a1b9.js";import{a as Remedies}from"./chunk-8a0ef651.js";function entityId({$nav:e}){return e&&e.params[0]}function data(){return{is_loading:!0,is_error:!1,error_message:"",data:{},meta:{},omitted_field:["id","name","created","modified","deleted","patient","treatments"],tracker:{saving:!1,saved:!1,error:!1},page:{title:"View Remedy",subtitle:"Modify Remedy details",icon:"building-o",icon_badge:"pencil"}}}var methods={load(){var{entityId:e}=this.get();this.set({is_loading:!0,is_error:!1}),Remedies.getOne(e).then(e=>{this.set({is_loading:!1,meta:e._meta,data:e.response})}).catch(e=>{var t="";void 0!==e&&void 0!==e.response&&void 0!==e.response.records&&(t=e.response.records.userMessage),this.set({is_error:!0,is_loading:!1,error_message:t})})}};function oncreate(){var{entityId:e}=this.get();this.on("state",({changed:e,current:t,previous:a})=>{if(e.$nav){var{$nav:r}=t;"SingleView"==r.activeView&&this.load()}}),this.load()}function get_each_context(e,t,a){const r=Object.create(e);return r.key=t[a][0],r.value=t[a][1],r.i=a,r}function create_main_fragment(e,t){var a,r,n,s,o,i,d,l=new Icon({root:e.root,store:e.store,data:{icon:"long-arrow-left",size:"small"}}),c={page:t.page},m=new PageTitle({root:e.root,store:e.store,slots:{default:createFragment()},data:c}),p=t.tracker.error&&create_if_block_2(e,t),_=!t.is_loading&&create_if_block(e,t),u={is_loading:t.is_loading,is_error:t.is_error,error_message:t.error_message},f=new ViewScaffold({root:e.root,store:e.store,slots:{default:createFragment()},data:u});return{c(){a=createElement("div"),r=createElement("a"),l._fragment.c(),n=createText("\r\n      "),(s=createElement("span")).textContent="Back to All Remedies",m._fragment.c(),o=createText("\r\n\r\n  "),p&&p.c(),i=createText("\r\n\r\n    "),_&&_.c(),d=createComment(),f._fragment.c(),r.className="button is-info is-inverted is-pulled-right",r.href="#remedies",a.className="page-content"},m(e,t){insert(e,a,t),append(m._slotted.default,r),l._mount(r,null),append(r,n),append(r,s),m._mount(a,null),append(a,o),p&&p.m(f._slotted.default,null),append(f._slotted.default,i),_&&_.m(f._slotted.default,null),append(f._slotted.default,d),f._mount(a,null)},p(t,a){var r={};t.page&&(r.page=a.page),m._set(r),a.tracker.error?p?p.p(t,a):((p=create_if_block_2(e,a)).c(),p.m(i.parentNode,i)):p&&(p.d(1),p=null),a.is_loading?_&&(_.d(1),_=null):_?_.p(t,a):((_=create_if_block(e,a)).c(),_.m(d.parentNode,d));var n={};t.is_loading&&(n.is_loading=a.is_loading),t.is_error&&(n.is_error=a.is_error),t.error_message&&(n.error_message=a.error_message),f._set(n)},d(e){e&&detachNode(a),l.destroy(),m.destroy(),p&&p.d(),_&&_.d(),f.destroy()}}}function create_if_block_2(e,t){var a,r=new Notification({root:e.root,store:e.store,slots:{default:createFragment()},data:{type:"danger"}});return{c(){a=createText(t.error_message),r._fragment.c()},m(e,t){append(r._slotted.default,a),r._mount(e,t)},p(e,t){e.error_message&&setData(a,t.error_message)},d(e){r.destroy(e)}}}function create_if_block(e,t){var a,r,n,s,o,i,d,l,c,m,p,_,u,f,g,h,v,b,y=!1;function N(){y=!0,t.data.name=g.value,e.set({data:t.data}),y=!1}for(var E=t.Object.entries(t.data),x=[],k=0;k<E.length;k+=1)x[k]=create_each_block(e,get_each_context(t,E,k));var T=new Panel({root:e.root,store:e.store,slots:{default:createFragment(),toolbar:createFragment()},data:{title:"Remedy Details",has_toolbar:!0}});function w(t){e.fire("save",t)}return{c(){a=createElement("form"),r=createElement("div"),n=createElement("a"),(s=createElement("span")).innerHTML='<i class="fa fa-pencil"></i>',o=createText(" "),(i=createElement("span")).textContent="Edit",l=createText("\r\n\r\n          "),c=createElement("div"),m=createElement("div"),p=createElement("div"),_=createElement("p"),(u=createElement("label")).textContent="Name",f=createText("\r\n                  "),g=createElement("input"),h=createText("\r\n\r\n          "),v=createElement("div"),b=createElement("div");for(var e=0;e<x.length;e+=1)x[e].c();T._fragment.c(),s.className="icon",n.className="button is-primary",n.href=d="#remedies/view/"+t.entityId,setAttribute(r,"slot","toolbar"),r.className="is-pulled-right",u.className="label",addListener(g,"input",N),g.className="input is-medium",setAttribute(g,"type","text"),g.required=!0,g.readOnly=!0,_.className="control",p.className="field",m.className="column",c.className="columns",b.className="column",v.className="columns",addListener(a,"submit",w)},m(e,d){insert(e,a,d),append(T._slotted.toolbar,r),append(r,n),append(n,s),append(n,o),append(n,i),append(T._slotted.default,l),append(T._slotted.default,c),append(c,m),append(m,p),append(p,_),append(_,u),append(_,f),append(_,g),g.value=t.data.name,append(T._slotted.default,h),append(T._slotted.default,v),append(v,b);for(var y=0;y<x.length;y+=1)x[y].m(b,null);T._mount(a,null)},p(a,r){if(t=r,a.entityId&&d!==(d="#remedies/view/"+t.entityId)&&(n.href=d),!y&&a.data&&(g.value=t.data.name),a.Object||a.data||a.omitted_field){E=t.Object.entries(t.data);for(var s=0;s<E.length;s+=1){const r=get_each_context(t,E,s);x[s]?x[s].p(a,r):(x[s]=create_each_block(e,r),x[s].c(),x[s].m(b,null))}for(;s<x.length;s+=1)x[s].d(1);x.length=E.length}},d(e){e&&detachNode(a),removeListener(g,"input",N),destroyEach(x,e),T.destroy(),removeListener(a,"submit",w)}}}function create_if_block_1(e,t){var a,r,n,s,o,i,d,l,c,m,p,_,u=t.i-1,f=t.key,g=t.value?t.value:"No data",h=new Message({root:e.root,store:e.store,slots:{default:createFragment()},data:{color:"is-light"}});return{c(){a=createElement("div"),r=createElement("div"),n=createElement("p"),s=createText(u),o=createText(" - "),i=createElement("u"),d=createText(f),l=createText("\r\n                    "),c=createElement("div"),m=createElement("p"),p=createText(g),h._fragment.c(),_=createText("\r\n                  "),n.className="title is-5",setStyle(n,"text-transform","capitalize"),r.className="column is-3",m.className="subtitle is-5",c.className="column",a.className="columns"},m(e,t){insert(e,a,t),append(a,r),append(r,n),append(n,s),append(n,o),append(n,i),append(i,d),append(a,l),append(a,c),append(h._slotted.default,m),append(m,p),h._mount(c,null),append(a,_)},p(e,t){(e.Object||e.data)&&f!==(f=t.key)&&setData(d,f),(e.Object||e.data)&&g!==(g=t.value?t.value:"No data")&&setData(p,g)},d(e){e&&detachNode(a),h.destroy()}}}function create_each_block(e,t){var a,r=t.value&&!t.omitted_field.includes(t.key)&&create_if_block_1(e,t);return{c(){r&&r.c(),a=createComment()},m(e,t){r&&r.m(e,t),insert(e,a,t)},p(t,n){n.value&&!n.omitted_field.includes(n.key)?r?r.p(t,n):((r=create_if_block_1(e,n)).c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},d(e){r&&r.d(e),e&&detachNode(a)}}}function SingleView(e){init(this,e),this._state=assign(assign(assign({Object:Object},this.store._init(["nav"])),data()),e.data),this.store._add(this,["nav"]),this._recompute({$nav:1},this._state),this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment(this,this._state),this.root._oncreate.push(()=>{oncreate.call(this),this.fire("update",{changed:assignTrue({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}assign(SingleView.prototype,proto),assign(SingleView.prototype,methods),SingleView.prototype._recompute=function(e,t){e.$nav&&this._differs(t.entityId,t.entityId=entityId(t))&&(e.entityId=!0)};export default SingleView;
//# sourceMappingURL=SingleView.js.map
