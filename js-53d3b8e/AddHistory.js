var K_ENV="prod",K_ENV_DEV="dev",K_ENV_TEST="test",K_ENV_PROD="prod";import{w as addListener,a as append,b as assign,c as assignTrue,z as createComment,d as createElement,e as createFragment,f as createText,A as destroyEach,g as detachNode,h as flush,i as init,j as insert,l as proto,m as removeFromStore,x as removeListener,X as selectOption,Y as selectValue,y as setAttribute,B as setData,C as setStyle,n as Icon,E as Notification,D as Panel,o as Message,q as ViewScaffold,r as PageTitle}from"./chunk-10c73911.js";import{a as Router}from"./chunk-47ccaf79.js";import{a as SearchableSelect}from"./chunk-84272e14.js";import{b as SubmitButton,a as ConfirmButton}from"./chunk-fd52a1b9.js";import{a as Remedies}from"./chunk-8a0ef651.js";import{a as Model}from"./chunk-2f526612.js";import{a as RemedyFound}from"./chunk-11cbabe4.js";import{a as PatientAdd,b as PatientSearch}from"./chunk-3737e248.js";import"./chunk-18c2ec65.js";import"./chunk-b404a42b.js";import"./chunk-d48a9a71.js";function disabled({data:e,tracker:t}){return t.saving||t.saved||!Object.keys(e).length||!e.patient}function has_searched({remedy_found:e}){return Object.keys(e).length}function user_role({$user:e}){return e&&e.role}function filterFields({remedies:e,omitted_field:t,data:a}){let r=["built","constitution","diathesis","miasm","temperament","temperature_and_weather","thermal_sensitivity","sensation","tendency_take_cold","desires","aversions","birth_history_milestones","tissues","stages_and_states","attacks_and_side","ailments_from","affections","clinical","modalities","mental_state_and_disorders","appearance_and_behavior","attention_and_concentration","expression","consciousness","mood_and_affect","memory","speech","thoughts_and_ideas","perception","intelligence","judgment","fear_and_live_alone","boring","peaceful","anger","hobby","habit","addiction","nutrition","anaemia","cyanosis","dehydration","jaundice","pulse","breathing","peculiar_rare_symptoms"],s=[];if(e.length){for(let[a,n]of Object.entries(e[0]))r.includes(a)||t.includes(a)||s.push(a);return s.push(...r),s}}function loadSymptoms({remedies:e}){let t=[];for(let a in e){Object.entries(e[a]).forEach(([e,a])=>{t[e]=[]});break}for(let a in e){let r=e[a];Object.entries(r).forEach(([e,a])=>{a&&"string"==typeof a&&t[e].push(a.split(","))})}return t}function searchable_withkey({loadSymptoms:e}){let t=[],a=0;return Object.entries(e).forEach(([r,s])=>{let n=e[r];t[r]=[];for(let e in n)if(Array.isArray(n[e]))for(let s in n[e])t[r].push({id:a++,name:n[e][s]})}),t}function searchable_symp({loadSymptoms:e}){let t=[],a=0;for(let r in e){let s=e[r];for(let e in s)if(Array.isArray(s[e]))for(let r in s[e])t.push({id:a++,name:s[e][r]})}return t}function data(){return{is_loading:!1,is_error:!1,error_message:"",is_active_case_modal:!1,selected_symptom:"",selected_symp:"",selected_keyed_symp:"",result_symptoms:"",remedies:{},data:{},remedy_found:{},omitted_field:["id","name","created","modified","deleted","patient","treatments"],patient:{name:"",age:"",gender:"",phone:"",address:"",patient_type:"none"},tracker:{saving:!1,saved:!1,error:!1},page:{title:"Add Case History",icon:"vcard-o",icon_badge:"plus"},valid:!1}}var methods={loadRemedies(){Remedies.getAll({limit:1e3}).then(e=>{this.set({remedies:e.response})}).catch(e=>{console.log(e)})},reset(e){e&&e.doing(),this.set({data:{}}),this.set({remedy_found:{}}),e&&e.done()},back(){this.set({remedy_found:{}}),this.set({result_symptoms:{}})},select_symptom(e){this.set({selected_symptom:e})},showSymptoms(e){this.set({result_symptoms:e.symptoms,field_name:e.field})},saveHistory(){let{data:e}=this.get();this.set({tracker:{saving:!0,saved:!1,error:!1}}),Model.create(e).then(e=>{this.set({tracker:{saving:!1,saved:!0,error:!1}}),setTimeout(()=>{this.set({tracker:{saved:!1}}),this.reset(),Router.navigate("history")},1500)}).catch(e=>{"406"==e.response.records.errorCode?this.set({error_message:e.response.records.userMessage}):this.set({error_message:"There was an error adding history"}),this.set({tracker:{saving:!1,saved:!1,error:!0}}),setTimeout(()=>{this.set({tracker:{error:!1}})},3e3)})},search(e){e.preventDefault();var{data:t,valid:a,remedies:r}=this.get();let s=[],n={};console.log(t),this.set({tracker:{saving:!0,saved:!1,error:!1}});for(let[e,a]of Object.entries(t))a&&"patient"!=e&&(s[e]=a.split(","));for(let[e,t]of Object.entries(s))t.forEach(t=>{r.forEach(a=>{""!=a[e]&&a[e]&&a[e].split(",").forEach(r=>{r.trim()===t.trim()&&""!=t.trim()&&(n.hasOwnProperty(a.name)?(n[a.name].mark++,n[a.name].field+=", "+e,n[a.name].symptoms+=", "+t.trim()):(n[a.name]={},n[a.name].field=e,n[a.name].mark=1,n[a.name].symptoms=t.trim()))})})});this.set({remedy_found:n}),setTimeout(()=>{this.set({tracker:{saved:!1}}),Router.navigate("search")},1500)}};function oncreate(){this.on("state",({changed:e,current:t,previous:a})=>{let{data:r,selected_symptom:s}=this.get();t.selected_keyed_symp!=a.selected_keyed_symp&&(r[s]=r[s]?r[s]+", "+t.selected_keyed_symp:t.selected_keyed_symp,this.set({data:r}))}),this.on("addPatient",e=>{let{data:t}=this.get();t.patient=e,this.set({data:t})}),this.on("showSymptoms",e=>{this.showSymptoms(e)}),this.loadRemedies()}function click_handler(e){const{component:t,ctx:a}=this._svelte;t.select_symptom(a.key)}function get_each2_context(e,t,a){const r=Object.create(e);return r.key=t[a],r}function get_each1_context_1(e,t,a){const r=Object.create(e);return r.key=t[a],r.index=a,r}function get_each0_context_1(e,t,a){const r=Object.create(e);return r.key=t[a],r.index=a,r}function get_each1_context(e,t,a){const r=Object.create(e);return r.key=t[a][0],r.value=t[a][1],r.i=a,r}function get_each0_context(e,t,a){const r=Object.create(e);return r.key=t[a][0],r.value=t[a][1],r.i=a,r}function create_main_fragment(e,t){var a,r,s,n,o,c,d,l,i,m,_,p,u={},h={page:t.page},f=new PageTitle({root:e.root,store:e.store,slots:{default:createFragment()},data:h}),y=t.tracker.error&&create_if_block_5(e,t),b={};void 0!==t.patient&&(b.patient=t.patient,u.patient=!0),void 0!==t.data&&(b.data=t.data,u.data=!0);var g=new PatientAdd({root:e.root,store:e.store,data:b,_bind(t,a){var r={};!u.patient&&t.patient&&(r.patient=a.patient),!u.data&&t.data&&(r.data=a.data),e._set(r),u={}}});e.root._beforecreate.push(()=>{g._bind({patient:1,data:1},g.get())}),g.on("addPatient",function(t){e.fire("addPatient",t)});var v=!t.has_searched&&create_if_block_3(e,t),k=t.has_searched&&create_if_block_2(e,t),x=new ConfirmButton({root:e.root,store:e.store,data:{text:"Reset",color:"danger",size:"",icon:"refresh",icon_only:!1,disabled:!1}});x.on("do",function(t){e.reset(t)});var E=t.remedies.length&&create_if_block(e,t),N=new Panel({root:e.root,store:e.store,slots:{default:createFragment(),toolbar:createFragment()},data:{title:"Sections",has_toolbar:!0}}),T={is_loading:t.is_loading,is_error:t.is_error,error_message:t.error_message},S=new ViewScaffold({root:e.root,store:e.store,slots:{default:createFragment()},data:T});return{c(){a=createElement("div"),f._fragment.c(),r=createText("\r\n\r\n  "),y&&y.c(),s=createText("\r\n\r\n    "),g._fragment.c(),n=createText("\r\n    "),o=createElement("br"),c=createText("\r\n  "),v&&v.c(),d=createText("\r\n\r\n  "),k&&k.c(),l=createText("\r\n\r\n\r\n  "),i=createElement("div"),x._fragment.c(),m=createText("\r\n\r\n    "),_=createElement("div"),p=createElement("div"),E&&E.c(),N._fragment.c(),S._fragment.c(),setAttribute(i,"slot","toolbar"),p.className="column",_.className="columns",a.className="page-content"},m(e,t){insert(e,a,t),f._mount(a,null),append(a,r),y&&y.m(S._slotted.default,null),append(S._slotted.default,s),g._mount(S._slotted.default,null),append(S._slotted.default,n),append(S._slotted.default,o),append(S._slotted.default,c),v&&v.m(S._slotted.default,null),append(S._slotted.default,d),k&&k.m(S._slotted.default,null),append(S._slotted.default,l),append(N._slotted.toolbar,i),x._mount(i,null),append(N._slotted.default,m),append(N._slotted.default,_),append(_,p),E&&E.m(p,null),N._mount(S._slotted.default,null),S._mount(a,null)},p(a,r){t=r;var n={};a.page&&(n.page=t.page),f._set(n),t.tracker.error?y?y.p(a,t):((y=create_if_block_5(e,t)).c(),y.m(s.parentNode,s)):y&&(y.d(1),y=null);var o={};!u.patient&&a.patient&&(o.patient=t.patient,u.patient=void 0!==t.patient),!u.data&&a.data&&(o.data=t.data,u.data=void 0!==t.data),g._set(o),u={},t.has_searched?v&&(v.d(1),v=null):v?v.p(a,t):((v=create_if_block_3(e,t)).c(),v.m(d.parentNode,d)),t.has_searched?k?k.p(a,t):((k=create_if_block_2(e,t)).c(),k.m(l.parentNode,l)):k&&(k.d(1),k=null),t.remedies.length?E?E.p(a,t):((E=create_if_block(e,t)).c(),E.m(p,null)):E&&(E.d(1),E=null);var c={};a.is_loading&&(c.is_loading=t.is_loading),a.is_error&&(c.is_error=t.is_error),a.error_message&&(c.error_message=t.error_message),S._set(c)},d(e){e&&detachNode(a),f.destroy(),y&&y.d(),g.destroy(),v&&v.d(),k&&k.d(),x.destroy(),E&&E.d(),N.destroy(),S.destroy()}}}function create_if_block_5(e,t){var a,r=new Notification({root:e.root,store:e.store,slots:{default:createFragment()},data:{type:"danger"}});return{c(){a=createText(t.error_message),r._fragment.c()},m(e,t){append(r._slotted.default,a),r._mount(e,t)},p(e,t){e.error_message&&setData(a,t.error_message)},d(e){r.destroy(e)}}}function create_if_block_3(e,t){for(var a,r,s,n,o,c,d,l,i,m,_,p,u,h,f,y,b,g,v,k,x,E,N,T,S,j,O,w,F,C,A,L,D,P,V,H,R,z,K,M,B=!1,$=!1,W={},q={},I={},X=t.Object.entries(t.data),Y=[],G=0;G<X.length;G+=1)Y[G]=create_each_block_4(e,get_each0_context(t,X,G));var J=new Message({root:e.root,store:e.store,slots:{default:createFragment()},data:{title:"Records",color:"light"}}),Q=t.Object.entries(t.data),U=[];for(G=0;G<Q.length;G+=1)U[G]=create_each_block_3(e,get_each1_context(t,Q,G));function Z(){B=!0,e.set({selected_symptom:selectValue(i)}),B=!1}function ee(){$=!0,t.data[t.selected_symptom]=b.value,e.set({data:t.data,selected_symptom:t.selected_symptom,Object:t.Object}),$=!1}var te={data:t.searchable_withkey[t.selected_symptom],placeholder:"Choose...",searchKey:"name",searchValue:"id"};void 0!==t.selected_keyed_symp&&(te._name=t.selected_keyed_symp,W._name=!0);var ae=new SearchableSelect({root:e.root,store:e.store,data:te,_bind(t,a){var r={};!W._name&&t._name&&(r.selected_keyed_symp=a._name),e._set(r),W={}}});e.root._beforecreate.push(()=>{ae._bind({_name:1},ae.get())});var re={data:t.searchable_symp,placeholder:"Choose...",searchKey:"name",searchValue:"id"};void 0!==t.selected_symp&&(re._name=t.selected_symp,q._name=!0);var se=new SearchableSelect({root:e.root,store:e.store,data:re,_bind(t,a){var r={};!q._name&&t._name&&(r.selected_symp=a._name),e._set(r),q={}}});e.root._beforecreate.push(()=>{se._bind({_name:1},se.get())});var ne={classes:"is-primary is-medium is-pulled-right",icon:"save",icon_size:"small",text:"Save History"};void 0!==t.disabled&&(ne.disabled=t.disabled,I.disabled=!0),void 0!==t.tracker&&(ne.tracker=t.tracker,I.tracker=!0);var oe=new SubmitButton({root:e.root,store:e.store,data:ne,_bind(t,a){var r={};!I.disabled&&t.disabled&&(r.disabled=a.disabled),!I.tracker&&t.tracker&&(r.tracker=a.tracker),e._set(r),I={}}});e.root._beforecreate.push(()=>{oe._bind({disabled:1,tracker:1},oe.get())});var ce=new Panel({root:e.root,store:e.store,slots:{default:createFragment()},data:{title:"Patient Symptoms",has_toolbar:!0}});function de(t){e.saveHistory(t)}return{c(){a=createElement("form"),r=createElement("div"),s=createElement("div");for(var B=0;B<Y.length;B+=1)Y[B].c();n=createComment(),J._fragment.c(),o=createText("\r\n          \r\n          "),c=createElement("div"),d=createElement("div"),l=createElement("span"),i=createElement("select"),(m=createElement("option")).textContent="Select Type";for(B=0;B<U.length;B+=1)U[B].c();_=createText("\r\n\r\n            "),p=createElement("div"),u=createElement("p"),h=createElement("label"),f=createText(t.selected_symptom),y=createText("\r\n                "),b=createElement("textarea"),v=createText("\r\n          "),k=createElement("div"),(x=createElement("p")).textContent="Suggestions",E=createText("\r\n\r\n            "),N=createElement("div"),T=createElement("p"),S=createElement("label"),j=createText(t.selected_symptom),O=createText(" Symptoms in the System"),w=createText("\r\n                  "),ae._fragment.c(),F=createText("\r\n\r\n            "),C=createElement("div"),A=createElement("p"),(L=createElement("label")).textContent="All Symptoms in the System",D=createText("\r\n                  "),se._fragment.c(),P=createText("\r\n            "),V=createElement("div"),H=createElement("p"),(R=createElement("label")).textContent="Â ",z=createText("\r\n                "),oe._fragment.c(),ce._fragment.c(),K=createText("\r\n      "),M=createElement("br"),s.className="column",m.__value="",m.value=m.__value,addListener(i,"change",Z),"selected_symptom"in t||e.root._beforecreate.push(Z),i.className="input",l.className="select is-fullwidth",d.className="field",h.className="label",setStyle(h,"text-transform","capitalize"),addListener(b,"input",ee),b.className="textarea",b.placeholder=g=t.selected_symptom+"...",setStyle(b,"height","15rem"),u.className="control",p.className="field",c.className="column",x.className="title is-5",S.className="label",setStyle(S,"text-transform","capitalize"),T.className="control",N.className="field",L.className="label",setStyle(L,"text-transform","capitalize"),A.className="control",C.className="field",R.className="label",H.className="control",V.className="field",k.className="column",r.className="columns",addListener(a,"submit",de)},m(e,g){insert(e,a,g),append(ce._slotted.default,r),append(r,s);for(var B=0;B<Y.length;B+=1)Y[B].m(J._slotted.default,null);append(J._slotted.default,n),J._mount(s,null),append(r,o),append(r,c),append(c,d),append(d,l),append(l,i),append(i,m);for(B=0;B<U.length;B+=1)U[B].m(i,null);selectOption(i,t.selected_symptom),append(c,_),append(c,p),append(p,u),append(u,h),append(h,f),append(u,y),append(u,b),b.value=t.data[t.selected_symptom],append(r,v),append(r,k),append(k,x),append(k,E),append(k,N),append(N,T),append(T,S),append(S,j),append(S,O),append(T,w),ae._mount(T,null),append(k,F),append(k,C),append(C,A),append(A,L),append(A,D),se._mount(A,null),append(k,P),append(k,V),append(V,H),append(H,R),append(H,z),oe._mount(H,null),ce._mount(a,null),insert(e,K,g),insert(e,M,g)},p(a,r){if(t=r,a.Object||a.data){X=t.Object.entries(t.data);for(var s=0;s<X.length;s+=1){const r=get_each0_context(t,X,s);Y[s]?Y[s].p(a,r):(Y[s]=create_each_block_4(e,r),Y[s].c(),Y[s].m(n.parentNode,n))}for(;s<Y.length;s+=1)Y[s].d(1);Y.length=X.length}if(a.omitted_field||a.Object||a.data){Q=t.Object.entries(t.data);for(s=0;s<Q.length;s+=1){const r=get_each1_context(t,Q,s);U[s]?U[s].p(a,r):(U[s]=create_each_block_3(e,r),U[s].c(),U[s].m(i,null))}for(;s<U.length;s+=1)U[s].d(1);U.length=Q.length}!B&&a.selected_symptom&&selectOption(i,t.selected_symptom),a.selected_symptom&&setData(f,t.selected_symptom),$||!a.data&&!a.selected_symptom||(b.value=t.data[t.selected_symptom]),a.selected_symptom&&g!==(g=t.selected_symptom+"...")&&(b.placeholder=g),a.selected_symptom&&setData(j,t.selected_symptom);var o={};(a.searchable_withkey||a.selected_symptom)&&(o.data=t.searchable_withkey[t.selected_symptom]),!W._name&&a.selected_keyed_symp&&(o._name=t.selected_keyed_symp,W._name=void 0!==t.selected_keyed_symp),ae._set(o),W={};var c={};a.searchable_symp&&(c.data=t.searchable_symp),!q._name&&a.selected_symp&&(c._name=t.selected_symp,q._name=void 0!==t.selected_symp),se._set(c),q={};var d={};!I.disabled&&a.disabled&&(d.disabled=t.disabled,I.disabled=void 0!==t.disabled),!I.tracker&&a.tracker&&(d.tracker=t.tracker,I.tracker=void 0!==t.tracker),oe._set(d),I={}},d(e){e&&detachNode(a),destroyEach(Y,e),J.destroy(),destroyEach(U,e),removeListener(i,"change",Z),removeListener(b,"input",ee),ae.destroy(),se.destroy(),oe.destroy(),ce.destroy(),removeListener(a,"submit",de),e&&(detachNode(K),detachNode(M))}}}function create_each_block_4(e,t){var a,r,s,n,o,c,d,l=t.key,i=t.value;return{c(){a=createElement("p"),r=createElement("span"),s=createText(l),n=createText(": "),o=createText(i),c=createText(" "),d=createElement("br"),r.className="has-text-weight-bold is-size-5"},m(e,t){insert(e,a,t),append(a,r),append(r,s),append(a,n),append(a,o),insert(e,c,t),insert(e,d,t)},p(e,t){(e.Object||e.data)&&l!==(l=t.key)&&setData(s,l),(e.Object||e.data)&&i!==(i=t.value)&&setData(o,i)},d(e){e&&(detachNode(a),detachNode(c),detachNode(d))}}}function create_if_block_4(e,t){var a,r,s,n=t.key;return{c(){a=createElement("option"),r=createText(n),a.__value=s=t.key,a.value=a.__value},m(e,t){insert(e,a,t),append(a,r)},p(e,t){(e.Object||e.data)&&n!==(n=t.key)&&setData(r,n),(e.Object||e.data)&&s!==(s=t.key)&&(a.__value=s),a.value=a.__value},d(e){e&&detachNode(a)}}}function create_each_block_3(e,t){var a,r=!t.omitted_field.includes(t.key)&&create_if_block_4(e,t);return{c(){r&&r.c(),a=createComment()},m(e,t){r&&r.m(e,t),insert(e,a,t)},p(t,s){s.omitted_field.includes(s.key)?r&&(r.d(1),r=null):r?r.p(t,s):((r=create_if_block_4(e,s)).c(),r.m(a.parentNode,a))},d(e){r&&r.d(e),e&&detachNode(a)}}}function create_if_block_2(e,t){var a,r,s={},n={field_name:t.field_name,result_symptoms:t.result_symptoms};void 0!==t.tracker&&(n.tracker=t.tracker,s.tracker=!0),void 0!==t.remedy_found&&(n.remedy_found=t.remedy_found,s.remedy_found=!0);var o=new RemedyFound({root:e.root,store:e.store,data:n,_bind(t,a){var r={};!s.tracker&&t.tracker&&(r.tracker=a.tracker),!s.remedy_found&&t.remedy_found&&(r.remedy_found=a.remedy_found),e._set(r),s={}}});return e.root._beforecreate.push(()=>{o._bind({tracker:1,remedy_found:1},o.get())}),o.on("back",function(t){e.back()}),o.on("showSymptoms",function(t){e.fire("showSymptoms",t)}),o.on("saveHistory",function(t){e.saveHistory()}),{c(){o._fragment.c(),a=createText("\r\n  "),r=createElement("br")},m(e,t){o._mount(e,t),insert(e,a,t),insert(e,r,t)},p(e,a){t=a;var r={};e.field_name&&(r.field_name=t.field_name),e.result_symptoms&&(r.result_symptoms=t.result_symptoms),!s.tracker&&e.tracker&&(r.tracker=t.tracker,s.tracker=void 0!==t.tracker),!s.remedy_found&&e.remedy_found&&(r.remedy_found=t.remedy_found,s.remedy_found=void 0!==t.remedy_found),o._set(r),s={}},d(e){o.destroy(e),e&&(detachNode(a),detachNode(r))}}}function create_if_block(e,t){for(var a,r,s,n,o,c,d,l,i,m,_,p,u,h,f,y,b,g,v,k,x=!1,E=!1,N=t.filterFields,T=[],S=0;S<N.length;S+=1)T[S]=create_each_block_2(e,get_each0_context_1(t,N,S));function j(){x=!0,e.set({selected_symptom:selectValue(d)}),x=!1}var O=t.filterFields,w=[];for(S=0;S<O.length;S+=1)w[S]=create_each_block_1(e,get_each1_context_1(t,O,S));function F(){E=!0,e.set({selected_symptom:selectValue(f)}),E=!1}var C=t.filterFields,A=[];for(S=0;S<C.length;S+=1)A[S]=create_each_block(e,get_each2_context(t,C,S));return{c(){a=createElement("div"),r=createElement("div"),(s=createElement("label")).textContent="With Number",n=createText("\r\n            "),o=createElement("div"),c=createElement("span"),d=createElement("select"),(l=createElement("option")).textContent="Select Type";for(var x=0;x<T.length;x+=1)T[x].c();i=createText("\r\n          "),m=createElement("div"),(_=createElement("label")).textContent="Without Number",p=createText("\r\n            "),u=createElement("div"),h=createElement("span"),f=createElement("select"),(y=createElement("option")).textContent="Select Type";for(x=0;x<w.length;x+=1)w[x].c();b=createText("\r\n\r\n        "),g=createElement("div"),v=createElement("div"),k=createElement("div");for(x=0;x<A.length;x+=1)A[x].c();s.className="label",l.__value="",l.value=l.__value,addListener(d,"change",j),"selected_symptom"in t||e.root._beforecreate.push(j),d.className="input",c.className="select is-fullwidth",o.className="field",r.className="column",_.className="label",y.__value="",y.value=y.__value,addListener(f,"change",F),"selected_symptom"in t||e.root._beforecreate.push(F),f.className="input",h.className="select is-fullwidth",u.className="field",m.className="column",a.className="columns",k.className="buttons",v.className="column",g.className="columns"},m(e,x){insert(e,a,x),append(a,r),append(r,s),append(r,n),append(r,o),append(o,c),append(c,d),append(d,l);for(var E=0;E<T.length;E+=1)T[E].m(d,null);selectOption(d,t.selected_symptom),append(a,i),append(a,m),append(m,_),append(m,p),append(m,u),append(u,h),append(h,f),append(f,y);for(E=0;E<w.length;E+=1)w[E].m(f,null);selectOption(f,t.selected_symptom),insert(e,b,x),insert(e,g,x),append(g,v),append(v,k);for(E=0;E<A.length;E+=1)A[E].m(k,null)},p(t,a){if(t.filterFields){N=a.filterFields;for(var r=0;r<N.length;r+=1){const s=get_each0_context_1(a,N,r);T[r]?T[r].p(t,s):(T[r]=create_each_block_2(e,s),T[r].c(),T[r].m(d,null))}for(;r<T.length;r+=1)T[r].d(1);T.length=N.length}if(!x&&t.selected_symptom&&selectOption(d,a.selected_symptom),t.filterFields){O=a.filterFields;for(r=0;r<O.length;r+=1){const s=get_each1_context_1(a,O,r);w[r]?w[r].p(t,s):(w[r]=create_each_block_1(e,s),w[r].c(),w[r].m(f,null))}for(;r<w.length;r+=1)w[r].d(1);w.length=O.length}if(!E&&t.selected_symptom&&selectOption(f,a.selected_symptom),t.filterFields||t.selected_symptom||t.data){C=a.filterFields;for(r=0;r<C.length;r+=1){const s=get_each2_context(a,C,r);A[r]?A[r].p(t,s):(A[r]=create_each_block(e,s),A[r].c(),A[r].m(k,null))}for(;r<A.length;r+=1)A[r].d(1);A.length=C.length}},d(e){e&&detachNode(a),destroyEach(T,e),removeListener(d,"change",j),destroyEach(w,e),removeListener(f,"change",F),e&&(detachNode(b),detachNode(g)),destroyEach(A,e)}}}function create_each_block_2(e,t){var a,r,s,n,o,c=t.index+1,d=t.key;return{c(){a=createElement("option"),r=createText(c),s=createText(" - "),n=createText(d),a.__value=o=t.key,a.value=a.__value},m(e,t){insert(e,a,t),append(a,r),append(a,s),append(a,n)},p(e,t){e.filterFields&&d!==(d=t.key)&&setData(n,d),e.filterFields&&o!==(o=t.key)&&(a.__value=o),a.value=a.__value},d(e){e&&detachNode(a)}}}function create_each_block_1(e,t){var a,r,s,n=t.key;return{c(){a=createElement("option"),r=createText(n),a.__value=s=t.key,a.value=a.__value},m(e,t){insert(e,a,t),append(a,r)},p(e,t){e.filterFields&&n!==(n=t.key)&&setData(r,n),e.filterFields&&s!==(s=t.key)&&(a.__value=s),a.value=a.__value},d(e){e&&detachNode(a)}}}function create_if_block_1(e,t){var a;return{c(){(a=createElement("span")).innerHTML='<i class="fa fa-check"></i>',a.className="icon is-small"},m(e,t){insert(e,a,t)},d(e){e&&detachNode(a)}}}function create_each_block(e,t){var a,r,s,n,o,c,d=t.key,l=t.data[t.key]&&create_if_block_1(e,t);return{c(){a=createElement("button"),l&&l.c(),r=createText("\r\n                    "),s=createElement("span"),n=createText(d),o=createText("\r\n                  "),a._svelte={component:e,ctx:t},addListener(a,"click",click_handler),a.type="button",a.className=c="button is-medium is-"+(t.key==t.selected_symptom?"success":t.data[t.key]?"":"info")+" ",setStyle(a,"text-transform","capitalize"),setStyle(a,"margin-left",".6rem"),setStyle(a,"margin-bottom",".6rem")},m(e,t){insert(e,a,t),l&&l.m(a,null),append(a,r),append(a,s),append(s,n),append(a,o)},p(s,o){(t=o).data[t.key]?l||((l=create_if_block_1(e,t)).c(),l.m(a,r)):l&&(l.d(1),l=null),s.filterFields&&d!==(d=t.key)&&setData(n,d),a._svelte.ctx=t,(s.filterFields||s.selected_symptom||s.data)&&c!==(c="button is-medium is-"+(t.key==t.selected_symptom?"success":t.data[t.key]?"":"info")+" ")&&(a.className=c)},d(e){e&&detachNode(a),l&&l.d(),removeListener(a,"click",click_handler)}}}function AddHistory(e){init(this,e),this._state=assign(assign(assign({Object:Object},this.store._init(["user"])),data()),e.data),this.store._add(this,["user"]),this._recompute({data:1,tracker:1,remedy_found:1,$user:1,remedies:1,omitted_field:1,loadSymptoms:1},this._state),this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment(this,this._state),this.root._oncreate.push(()=>{oncreate.call(this),this.fire("update",{changed:assignTrue({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}assign(AddHistory.prototype,proto),assign(AddHistory.prototype,methods),AddHistory.prototype._recompute=function(e,t){(e.data||e.tracker)&&this._differs(t.disabled,t.disabled=disabled(t))&&(e.disabled=!0),e.remedy_found&&this._differs(t.has_searched,t.has_searched=has_searched(t))&&(e.has_searched=!0),e.$user&&this._differs(t.user_role,t.user_role=user_role(t))&&(e.user_role=!0),(e.remedies||e.omitted_field||e.data)&&this._differs(t.filterFields,t.filterFields=filterFields(t))&&(e.filterFields=!0),e.remedies&&this._differs(t.loadSymptoms,t.loadSymptoms=loadSymptoms(t))&&(e.loadSymptoms=!0),e.loadSymptoms&&(this._differs(t.searchable_withkey,t.searchable_withkey=searchable_withkey(t))&&(e.searchable_withkey=!0),this._differs(t.searchable_symp,t.searchable_symp=searchable_symp(t))&&(e.searchable_symp=!0))};export default AddHistory;
//# sourceMappingURL=AddHistory.js.map
