{"version":3,"file":"Histories.js","sources":["../../../src/components/views/casehistory/Histories.html"],"sourcesContent":["\r\n<div class=\"page-content\">\r\n\r\n  <PageTitle page=\"{page}\"></PageTitle>\r\n\r\n  <ViewScaffold {is_loading} {is_error} {error_message}>\r\n\r\n      <DataList\r\n      {Model}\r\n      {View}\r\n      {entity_name}\r\n      {route_prefix}\r\n      {has_additional_buttons}\r\n      {search_placeholder}\r\n      bind:is_loading\r\n      bind:is_error\r\n      bind:error_message\r\n      bind:data\r\n      bind:meta\r\n      {columns}\r\n      {searchStringTransformer}\r\n      {valueTransformers}\r\n      {classTransformers}\r\n      {styleTransformers}\r\n      {clickableRows}\r\n      on:rowClick\r\n      >\r\n      <a  slot=\"additionalButtons\" href=\"#history/add\" class=\"button is-success\">\r\n        <Icon size=\"small\" icon=\"plus-circle\" /><span>Add Case History</span>\r\n      </a>\r\n      </DataList>\r\n\r\n  </ViewScaffold>\r\n\r\n</div>\r\n\r\n<script>\r\n\r\n  import Model from '../../../models/histories';\r\n  import { Icon } from '@kws3/helpers';\r\n  import Router from '../../../services/router';\r\n  import niceDate from '../../../utils/niceDate.js';\r\n\r\n  export default {\r\n    components:{\r\n      Icon,\r\n      ViewScaffold: '../../helpers/ViewScaffold.html',\r\n      DataList: '../../helpers/DataList.html',\r\n      PageTitle: '../../helpers/PageTitle.html',\r\n\r\n    },\r\n    helpers: {\r\n      niceDate\r\n    },\r\n    data(){\r\n      return {\r\n        model_set: false,\r\n        is_loading: true,\r\n        is_error: false,\r\n        error_message: '',\r\n        meta:{},\r\n        data:[],\r\n        Model,\r\n        View: '_COMPONENT_',\r\n        entity_name: 'History',\r\n        route_prefix: 'history/',\r\n        has_additional_buttons: true,\r\n        clickableRows: true,\r\n        columns:{\r\n          'id': 'ID',\r\n          'p_id':' Patient ID',\r\n          'name': 'Patient Name',\r\n          'created': 'Last Visited Date',\r\n        },\r\n        search_placeholder: 'Name',\r\n        page:{\r\n          title: 'Case Histories',\r\n          icon: 'building-o',\r\n          subtitle: 'Case Histories in this System'\r\n        },\r\n        searchStringTransformer: (q) => {\r\n          var qparts = q.split('~'),\r\n          query = [];\r\n\r\n          if(qparts[0] != ''){\r\n            query.push('name[lk]:'+qparts[0]);\r\n          }\r\n\r\n          qparts.shift();\r\n          for(var i = 0; i < qparts.length; i++){\r\n            var _q = qparts[i],\r\n            qpp = _q.split(':');\r\n            if(_q != '' && typeof qpp[1] != 'undefined' && qpp[1] != ''){\r\n              query.push(qpp[0] + '[eq]:' + qpp[1]);\r\n            }\r\n          }\r\n\r\n          return query.join(',');\r\n        },\r\n        valueTransformers:{\r\n          p_id(v, row){\r\n            return row.patient.id\r\n          },\r\n          name(v, row) {\r\n            return row.patient.name\r\n          },\r\n          created(v, row) {\r\n            return niceDate(row.created)\r\n          }\r\n        },\r\n        classTransformers:{\r\n          link(){\r\n            return 'is-icon';\r\n          }\r\n        },\r\n        styleTransformers:{},\r\n      }\r\n    },\r\n    computed: {},\r\n    oncreate(){\r\n      this.on('rowClick', ({row}) => {\r\n        Router.navigate(`history/view/${row.id}`);\r\n      });\r\n    }\r\n  }\r\n</script>"],"names":["model_set","is_loading","is_error","error_message","meta","data","Model","View","entity_name","route_prefix","has_additional_buttons","clickableRows","columns","id","p_id","name","created","search_placeholder","page","title","icon","subtitle","searchStringTransformer","q","qparts","split","query","push","shift","i","length","_q","qpp","join","valueTransformers","v","row","patient","niceDate","classTransformers","link","styleTransformers","this","on","Router","navigate"],"mappings":"6iBA2CA,gBAYM,MAAO,CACLA,WAAW,EACXC,YAAY,EACZC,UAAU,EACVC,cAAe,GACfC,KAAK,GACLC,KAAK,GACLC,MAAAA,MACAC,KAAM,YACNC,YAAa,UACbC,aAAc,WACdC,wBAAwB,EACxBC,eAAe,EACfC,QAAQ,CACNC,GAAM,KACNC,KAAO,cACPC,KAAQ,eACRC,QAAW,qBAEbC,mBAAoB,OACpBC,KAAK,CACHC,MAAO,iBACPC,KAAM,aACNC,SAAU,iCAEZC,wBAA0BC,IACxB,IAAIC,EAASD,EAAEE,MAAM,KACrBC,EAAQ,GAEQ,IAAbF,EAAO,IACRE,EAAMC,KAAK,YAAYH,EAAO,IAGhCA,EAAOI,QACP,IAAI,IAAIC,EAAI,EAAGA,EAAIL,EAAOM,OAAQD,IAAI,CACpC,IAAIE,EAAKP,EAAOK,GAChBG,EAAMD,EAAGN,MAAM,KACN,IAANM,QAA6B,IAAVC,EAAI,IAA+B,IAAVA,EAAI,IACjDN,EAAMC,KAAKK,EAAI,GAAK,QAAUA,EAAI,IAItC,OAAON,EAAMO,KAAK,MAEpBC,kBAAkB,CAChBpB,KAAI,CAACqB,EAAGC,IACCA,EAAIC,QAAQxB,GAErBE,KAAI,CAACoB,EAAGC,IACCA,EAAIC,QAAQtB,KAErBC,QAAO,CAACmB,EAAGC,IACFE,SAASF,EAAIpB,UAGxBuB,kBAAkB,CAChBC,KAAI,IACK,WAGXC,kBAAkB,wBAKpBC,KAAKC,GAAG,WAAY,EAAEP,IAAAA,MACpBQ,OAAOC,yBAAyBT,EAAIvB,sEAtHxBK,oJAKbZ,aACAC,mBACAC,2BACAC,sCACAC,4CACAO,6BAMAL,kCACAU,4CACAY,sCACAK,sCACAE,kCACA9B,0BAVIV,4BAAAA,uCACAC,wBAAAA,mCACAC,kCAAAA,6CACAE,gBAAAA,2BACAD,gBAAAA,ilBAbMH,sBAAaC,yBAAWC,+nBAFrBe,6CAKbZ,yBACAC,sCACAC,+CACAC,oEACAC,sEACAO,4CAMAL,iEACAU,qEACAY,+DACAK,+DACAE,uDACA9B,4DAVIV,mCAAAA,mDACAC,+BAAAA,gEACAC,yCAAAA,0CACAE,uBAAAA,iCACAD,uBAAAA,4DAbMH,sCAAaC,8CAAWC"}