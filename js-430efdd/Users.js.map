{"version":3,"file":"Users.js","sources":["../../../src/components/helpers/TileViewItem.html","../../../src/components/views/Users.html"],"sourcesContent":["<div class=\"card\" data-cy=\"card-item\">\r\n  <div class=\"card-content\">\r\n    {#if isVisible('link')}\r\n    <a class=\"edit-icon {classNames('link', row)}\" href=\"{transforms('link', row)}\" style=\"{styles('link', row)}\" data-cy=\"edit-icon\">\r\n      <Icon size=\"small\" icon=\"pencil\" />\r\n    </a>\r\n    {/if}\r\n    <div class=\"media\">\r\n      {#if isVisible('img')}\r\n      <div class=\"media-left\">\r\n        {#if transforms('icon', row)}\r\n          <Icon icon={transforms('icon', row)} size=\"large\" />\r\n        {:else}\r\n          <figure class=\"image is-64x64\">\r\n            <img src=\"{transforms('img', row)}\" alt=\"\" style=\"{styles('img', row)}\" class=\"{classNames('img', row)}\">\r\n          </figure>\r\n        {/if}\r\n      </div>\r\n      {/if}\r\n      <div class=\"media-content\">\r\n        {#if isVisible('title')}\r\n        <p class=\"{classNames('title', row)}\" style=\"{styles('title', row)}\">{@html transforms('title', row)}</p>\r\n        {/if}\r\n        {#if isVisible('subtitle')}\r\n        <p class=\"{classNames('subtitle', row)}\" style=\"margin-bottom:1px;{styles('subtitle', row)}\">{@html transforms('subtitle', row)}</p>\r\n        {/if}\r\n        {#if isVisible('description')}\r\n        <p>\r\n          <small class=\"{classNames('description', row)}\" style=\"{styles('description', row)}\">{@html transforms('description', row)}</small>\r\n        </p>\r\n        {/if}\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<style>\r\n  .card-content {\r\n    position: relative;\r\n  }\r\n  .edit-icon {\r\n    position: absolute;\r\n    right: 5px;\r\n    top: 5px;\r\n  }\r\n</style>\r\n\r\n<script>\r\n  import { Icon } from '@kws3/helpers';\r\n  export default {\r\n    components:{\r\n      Icon,\r\n    },\r\n    data(){\r\n      return {\r\n        row:{},\r\n        isVisible:{},\r\n        transforms:{},\r\n        classNames:{},\r\n        styles:{}\r\n      }\r\n    }\r\n  }\r\n</script>","\r\n<div class=\"page-content\">\r\n\r\n  <PageTitle page=\"{page}\"></PageTitle>\r\n\r\n  <ViewScaffold {is_loading} {is_error} {error_message}>\r\n\r\n\r\n      <DataList\r\n        view_type=\"tile\"\r\n        per_row=\"3\"\r\n\r\n        {Model}\r\n        {View}\r\n        {entity_name}\r\n        {route_prefix}\r\n        {has_additional_buttons}\r\n        {search_placeholder}\r\n        bind:is_loading\r\n        bind:is_error\r\n        bind:error_message\r\n        bind:data\r\n        bind:meta\r\n        {columns}\r\n        {searchStringTransformer}\r\n        {valueTransformers}\r\n        {classTransformers}\r\n        {styleTransformers}\r\n        {tileItemComponent}\r\n      >\r\n        <a slot=\"additionalButtons\" href=\"#users/add\" class=\"button is-success\" data-cy=\"add-user\" ><Icon size=\"small\" icon=\"plus-circle\" /> <span>Add User</span></a>\r\n      </DataList>\r\n\r\n    </ViewScaffold>\r\n\r\n</div>\r\n\r\n<script>\r\n\r\n  import Model from '../../models/users';\r\n  import { Icon } from '@kws3/helpers';\r\n  import TileViewItem from '../helpers/TileViewItem.html';\r\n  export default {\r\n    components:{\r\n      DataList: '../helpers/DataList.html',\r\n      ViewScaffold: '../helpers/ViewScaffold.html',\r\n      Icon,\r\n      PageTitle: '../helpers/PageTitle.html'\r\n    },\r\n    data(){\r\n      return {\r\n        tileItemComponent: TileViewItem,\r\n        is_loading: true,\r\n        is_error: false,\r\n        error_message: '',\r\n        meta:{},\r\n        data:[],\r\n        Model: Model,\r\n        View: '_COMPONENT_',\r\n        entity_name: 'Users',\r\n        route_prefix: 'users/',\r\n        has_additional_buttons: true,\r\n        search_placeholder:'Name, surname or email',\r\n        columns:'',\r\n        page:{\r\n          title: '_COMPONENT_',\r\n          icon: 'vcard-o',\r\n          subtitle: 'All users in the system'\r\n        },\r\n        searchStringTransformer: (q) => {\r\n\r\n          var qparts = q.split('~'),\r\n          query = [];\r\n\r\n          if(qparts[0] != ''){\r\n            query.push('name[lk]:'+qparts[0]+',surname[lk]|:'+qparts[0]+',email[lk]|:'+qparts[0]+',username[lk]|:'+qparts[0]);\r\n          }\r\n\r\n          qparts.shift();\r\n          for(var i = 0; i < qparts.length; i++){\r\n            var _q = qparts[i],\r\n            qpp = _q.split(':');\r\n            if(_q != '' && typeof qpp[1] != 'undefined' && qpp[1] != ''){\r\n              query.push(qpp[0] + '[eq]:' + qpp[1]);\r\n            }\r\n          }\r\n\r\n          return query.join(',');\r\n        },\r\n        valueTransformers:{\r\n          title(v, row){\r\n            if(!row.surname) row.surname = ''\r\n            return row.name + ' ' + row.surname;\r\n          },\r\n          subtitle(v, row){\r\n            return row.username;\r\n          },\r\n          description(v, row) {\r\n            var roles = {\r\n              'SA': 'Administrator',\r\n              'SU': 'User',\r\n            }\r\n            return roles[row.role] ? roles[row.role] : '';\r\n          },\r\n          link(v, row){\r\n            return '#users/view/'+row.id;\r\n          },\r\n          img(v, row){\r\n            return row.avatarurl;\r\n          },\r\n          icon(v, row){\r\n            return false;\r\n          }\r\n        },\r\n        classTransformers:{\r\n          subtitle(){\r\n            return 'subtitle is-6';\r\n          }\r\n        },\r\n        styleTransformers:{}\r\n      }\r\n    }\r\n  }\r\n</script>"],"names":["row","isVisible","transforms","classNames","styles","tileItemComponent","TileViewItem","is_loading","is_error","error_message","meta","data","Model","View","entity_name","route_prefix","has_additional_buttons","search_placeholder","columns","page","title","icon","subtitle","searchStringTransformer","q","qparts","split","query","push","shift","i","length","_q","qpp","join","valueTransformers","v","surname","name","username","[object Object]","roles","SA","SU","role","link","id","img","avatarurl","classTransformers","styleTransformers"],"mappings":"2fAsDM,MAAO,CACLA,IAAI,GACJC,UAAU,GACVC,WAAW,GACXC,WAAW,GACXC,OAAO,+DAzDNH,UAAU,oCAMRA,UAAU,mCAYRA,UAAU,qCAGVA,UAAU,wCAGVA,UAAU,4mBAxBdA,UAAU,kFAMRA,UAAU,iFAYRA,UAAU,mFAGVA,UAAU,sFAGVA,UAAU,iWAvBEE,WAAW,SAAQH,kCAAcE,WAAW,SAAQF,yBAAeI,OAAO,SAAQJ,0HAAlFG,WAAW,SAAQH,yEAAcE,WAAW,SAAQF,8CAAeI,OAAO,SAAQJ,6HAO9FE,WAAW,SAAQF,wXAITE,WAAW,QAAOF,kCAAsBI,OAAO,QAAOJ,qBAAeG,WAAW,QAAOH,8HAAvFE,WAAW,QAAOF,6CAAsBI,OAAO,QAAOJ,2DAAeG,WAAW,QAAOH,gHAHxFE,WAAW,SAAQF,qKAAnBE,WAAW,SAAQF,mFAU2CE,WAAW,UAASF,qDAArFG,WAAW,UAASH,2CAAeI,OAAO,UAASJ,iFAAcE,WAAW,UAASF,uDAArFG,WAAW,UAASH,qEAAeI,OAAO,UAASJ,gGAGsCE,WAAW,aAAYF,qDAAhHG,WAAW,aAAYH,0DAAiCI,OAAO,aAAYJ,kFAAcE,WAAW,aAAYF,uDAAhHG,WAAW,aAAYH,+FAAiCI,OAAO,aAAYJ,6EAIQE,WAAW,gBAAeF,8EAAvGG,WAAW,gBAAeH,2CAAeI,OAAO,gBAAeJ,6FAAcE,WAAW,gBAAeF,uDAAvGG,WAAW,gBAAeH,qEAAeI,OAAO,gBAAeJ,2QCcxF,kBAQM,MAAO,CACLK,kBAAmBC,aACnBC,YAAY,EACZC,UAAU,EACVC,cAAe,GACfC,KAAK,GACLC,KAAK,GACLC,MAAOA,MACPC,KAAM,QACNC,YAAa,QACbC,aAAc,SACdC,wBAAwB,EACxBC,mBAAmB,yBACnBC,QAAQ,GACRC,KAAK,CACHC,MAAO,QACPC,KAAM,UACNC,SAAU,2BAEZC,wBAA0BC,IAExB,IAAIC,EAASD,EAAEE,MAAM,KACrBC,EAAQ,GAEQ,IAAbF,EAAO,IACRE,EAAMC,KAAK,YAAYH,EAAO,GAAG,iBAAiBA,EAAO,GAAG,eAAeA,EAAO,GAAG,kBAAkBA,EAAO,IAGhHA,EAAOI,QACP,IAAI,IAAIC,EAAI,EAAGA,EAAIL,EAAOM,OAAQD,IAAI,CACpC,IAAIE,EAAKP,EAAOK,GAChBG,EAAMD,EAAGN,MAAM,KACN,IAANM,QAA6B,IAAVC,EAAI,IAA+B,IAAVA,EAAI,IACjDN,EAAMC,KAAKK,EAAI,GAAK,QAAUA,EAAI,IAItC,OAAON,EAAMO,KAAK,MAEpBC,kBAAkB,CAChBf,MAAK,CAACgB,EAAGpC,KACHA,EAAIqC,UAASrC,EAAIqC,QAAU,IACxBrC,EAAIsC,KAAO,IAAMtC,EAAIqC,SAE9Bf,SAAQ,CAACc,EAAGpC,IACHA,EAAIuC,SAEbC,YAAYJ,EAAGpC,GACb,IAAIyC,EAAQ,CACVC,GAAM,gBACNC,GAAM,QAER,OAAOF,EAAMzC,EAAI4C,MAAQH,EAAMzC,EAAI4C,MAAQ,IAE7CC,KAAI,CAACT,EAAGpC,IACC,eAAeA,EAAI8C,GAE5BC,IAAG,CAACX,EAAGpC,IACEA,EAAIgD,UAEb3B,KAAI,CAACe,EAAGpC,KACC,GAGXiD,kBAAkB,CAChB3B,SAAQ,IACC,iBAGX4B,kBAAkB,sEApHN/B,iLASXP,aACAC,mBACAC,2BACAC,sCACAC,4CACAC,6BAMAC,kCACAK,4CACAY,sCACAc,sCACAC,sCACA7C,8BAVIE,4BAAAA,uCACAC,wBAAAA,mCACAC,kCAAAA,6CACAE,gBAAAA,2BACAD,gBAAAA,8hBAjBIH,sBAAaC,yBAAWC,2qBAFrBU,6CASXP,yBACAC,sCACAC,+CACAC,oEACAC,sEACAC,4CAMAC,iEACAK,qEACAY,+DACAc,+DACAC,+DACA7C,gEAVIE,mCAAAA,mDACAC,+BAAAA,gEACAC,yCAAAA,0CACAE,uBAAAA,iCACAD,uBAAAA,4DAjBIH,sCAAaC,8CAAWC"}