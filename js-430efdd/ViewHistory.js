var K_ENV="prod",K_ENV_DEV="dev",K_ENV_TEST="test",K_ENV_PROD="prod";import{w as addListener,a as append,b as assign,z as createComment,d as createElement,e as createFragment,f as createText,A as destroyEach,g as detachNode,h as flush,i as init,j as insert,l as proto,m as removeFromStore,x as removeListener,B as setData,n as Icon,c as assignTrue,y as setAttribute,E as Notification,D as Panel,o as Message,q as ViewScaffold,r as PageTitle,X as selectOption,Y as selectValue,C as setStyle}from"./chunk-ce2fee6f.js";import{a as Router}from"./chunk-0860a2de.js";import{a as SearchableSelect}from"./chunk-a7963841.js";import{b as SubmitButton,a as ConfirmButton}from"./chunk-d9e89df1.js";import{a as PageTabBar}from"./chunk-603cb736.js";import{a as Remedies}from"./chunk-dc7fa8bb.js";import{a as Model}from"./chunk-f6589328.js";import{a as RemedyFound,b as SlidingPaneSet,c as SlidingPane}from"./chunk-94ac463e.js";import"./chunk-03be7602.js";import{a as PatientDetails}from"./chunk-c4148b8a.js";function tabs({link:e,tabs:t,id:a,is_detailed_route:r}){return e?(t.forEach(t=>{t.default_route?t.link=t.is_detailed_route?"javascript:void(0)":`${e}/${a}/${t.default_route}`:t.link=t.default_route?"javascript:void(0)":`${e}/${a}/${t.name}`}),t):t}function is_detailed_route({$nav:e}){return console.log(e),!(!e||void 0===e.params[1])&&e.params[1]}function data(){return{getTotalSpace:e=>e.children[0].clientWidth,getAvailableSpace:(e,t)=>e.clientWidth,tab_list:{},active_tab:"details"}}function click_handler(e){const{component:t,ctx:a}=this._svelte;t.set({active_tab:a.tab.name})}function get_each_context(e,t,a){const r=Object.create(e);return r.tab=t[a],r}function create_main_fragment(e,t){for(var a,r=t.tabs,s=[],n=0;n<r.length;n+=1)s[n]=create_each_block(e,get_each_context(t,r,n));var o={getTotalSpace:t.getTotalSpace,getAvailableSpace:t.getAvailableSpace,type:"boxed",alignment:"centered"},i=new PageTabBar({root:e.root,store:e.store,slots:{default:createFragment()},data:o});return{c(){for(var e=0;e<s.length;e+=1)s[e].c();a=createComment(),i._fragment.c()},m(e,t){for(var r=0;r<s.length;r+=1)s[r].m(i._slotted.default,null);append(i._slotted.default,a),i._mount(e,t)},p(t,n){if(t.tabs||t.active_tab){r=n.tabs;for(var o=0;o<r.length;o+=1){const i=get_each_context(n,r,o);s[o]?s[o].p(t,i):(s[o]=create_each_block(e,i),s[o].c(),s[o].m(a.parentNode,a))}for(;o<s.length;o+=1)s[o].d(1);s.length=r.length}var c={};t.getTotalSpace&&(c.getTotalSpace=n.getTotalSpace),t.getAvailableSpace&&(c.getAvailableSpace=n.getAvailableSpace),i._set(c)},d(e){destroyEach(s,e),i.destroy(e)}}}function create_each_block(e,t){var a,r,s,n,o,i,c,l,d=t.tab.title,_={size:"small",icon:t.tab.icon},m=new Icon({root:e.root,store:e.store,data:_});return{c(){a=createElement("li"),r=createElement("a"),m._fragment.c(),s=createText("\r\n        "),n=createElement("span"),o=createText(d),c=createText("\r\n    "),r._svelte={component:e,ctx:t},addListener(r,"click",click_handler),r.href=i=t.tab.link?t.tab.link:"javascript:void(0)",a.className=l=t.tab.name==t.active_tab?"is-active ":""},m(e,t){insert(e,a,t),append(a,r),m._mount(r,null),append(r,s),append(r,n),append(n,o),append(a,c)},p(e,s){t=s;var n={};e.tabs&&(n.icon=t.tab.icon),m._set(n),e.tabs&&d!==(d=t.tab.title)&&setData(o,d),r._svelte.ctx=t,e.tabs&&i!==(i=t.tab.link?t.tab.link:"javascript:void(0)")&&(r.href=i),(e.tabs||e.active_tab)&&l!==(l=t.tab.name==t.active_tab?"is-active ":"")&&(a.className=l)},d(e){e&&detachNode(a),m.destroy(),removeListener(r,"click",click_handler)}}}function Tabs(e){init(this,e),this._state=assign(assign(this.store._init(["nav"]),data()),e.data),this.store._add(this,["nav"]),this._recompute({$nav:1,link:1,tabs:1,id:1,is_detailed_route:1},this._state),this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}function entityId({$nav:e}){return e&&e.params[0]}function filterFields({remedies:e,omitted_field:t}){let a=["built","constitution","diathesis","miasm","temperament","temperature_and_weather","thermal_sensitivity","sensation","tendency_take_cold","desires","aversions","birth_history_milestones","tissues","stages_and_states","attacks_and_side","ailments_from","affections","clinical","modalities","mental_state_and_disorders","appearance_and_behavior","attention_and_concentration","expression","consciousness","mood_and_affect","memory","speech","thoughts_and_ideas","perception","intelligence","judgment","fear_and_live_alone","boring","peaceful","anger","hobby","habit","addiction","nutrition","anaemia","cyanosis","dehydration","jaundice","pulse","breathing","peculiar_rare_symptoms"],r=[];if(e.length){for(let[s,n]of Object.entries(e[0]))a.includes(s)||t.includes(s)||r.push(s);return r.push(...a),r}}function loadSymptoms({remedies:e}){let t=[];for(let a in e){Object.entries(e[a]).forEach(([e,a])=>{t[e]=[]});break}for(let a in e){let r=e[a];Object.entries(r).forEach(([e,a])=>{a&&"string"==typeof a&&t[e].push(a.split(","))})}return t}function data$1(){return{is_loading:!1,is_error:!1,error_message:"",selected_symptom:"",selected_symp:"",selected_keyed_symp:"",result_symptoms:"",remedies:{},data:{},meta:{},remedy_found:{},omitted_field:["id","name","created","modified","deleted","patient","treatments"],tracker:{saving:!1,saved:!1,error:!1},page:{title:"View Case History",subtitle:"Case History details",icon:"building-o",icon_badge:"pencil"}}}assign(Tabs.prototype,proto),Tabs.prototype._recompute=function(e,t){e.$nav&&this._differs(t.is_detailed_route,t.is_detailed_route=is_detailed_route(t))&&(e.is_detailed_route=!0),(e.link||e.tabs||e.id||e.is_detailed_route)&&this._differs(t.tabs,t.tabs=tabs(t))&&(e.tabs=!0)};var methods={load(){var{entityId:e}=this.get();this.set({is_loading:!0,is_error:!1}),Model&&Model.getOne(e).then(e=>{console.log(e),this.set({is_loading:!1,meta:e._meta,data:e.response})}).catch(e=>{var t="";void 0!==e&&void 0!==e.response&&void 0!==e.response.records&&(t=e.response.records.userMessage),this.set({is_error:!0,is_loading:!1,error_message:t})})},loadRemedies(){Remedies.getAll({limit:1e3}).then(e=>{this.set({remedies:e.response})}).catch(e=>{console.log(e)})},save(){var{data:e,entityId:t,tracker:a}=this.get();this.set({tracker:{saving:!0,saved:!1,error:!1}}),Model.save(t,e).then(e=>{this.set({data:e.response,tracker:{saving:!1,saved:!0,error:!1}}),setTimeout(()=>{a.saved=!1,this.set({tracker:a})},1500)}).catch(e=>{console.log(e),this.set({error_message:"There was an error updating premise"}),this.set({tracker:{saving:!1,saved:!1,error:!0}}),setTimeout(()=>{this.set({tracker:{error:!1}})},1500)})}};function oncreate(){var{entityId:e}=this.get();this.load()}function get_each_context$1(e,t,a){const r=Object.create(e);return r.key=t[a][0],r.value=t[a][1],r.i=a,r}function create_main_fragment$1(e,t){for(var a,r,s,n,o,i,c,l,d=t.data.patient&&create_if_block_1(e,t),_=t.Object.entries(t.data),m=[],p=0;p<_.length;p+=1)m[p]=create_each_block$1(e,get_each_context$1(t,_,p));var h=new Message({root:e.root,store:e.store,slots:{default:createFragment()},data:{title:"Records",color:"light"}}),u=new Panel({root:e.root,store:e.store,slots:{default:createFragment(),toolbar:createFragment()},data:{title:"Patient symptoms",has_toolbar:!0}}),f={is_loading:t.is_loading,is_error:t.is_error,error_message:t.error_message},g=new ViewScaffold({root:e.root,store:e.store,slots:{default:createFragment()},data:f});return{c(){a=createElement("div"),r=createElement("div"),s=createText("\r\n\r\n    "),n=createElement("div"),o=createElement("div"),d&&d.c(),i=createText("\r\n      "),c=createElement("div");for(var e=0;e<m.length;e+=1)m[e].c();l=createComment(),h._fragment.c(),u._fragment.c(),g._fragment.c(),setAttribute(r,"slot","toolbar"),o.className="column",c.className="column",n.className="columns",a.className="page-content"},m(e,t){insert(e,a,t),append(u._slotted.toolbar,r),append(u._slotted.default,s),append(u._slotted.default,n),append(n,o),d&&d.m(o,null),append(n,i),append(n,c);for(var _=0;_<m.length;_+=1)m[_].m(h._slotted.default,null);append(h._slotted.default,l),h._mount(c,null),u._mount(g._slotted.default,null),g._mount(a,null)},p(t,a){if(a.data.patient?d?d.p(t,a):((d=create_if_block_1(e,a)).c(),d.m(o,null)):d&&(d.d(1),d=null),t.Object||t.data||t.omitted_field){_=a.Object.entries(a.data);for(var r=0;r<_.length;r+=1){const s=get_each_context$1(a,_,r);m[r]?m[r].p(t,s):(m[r]=create_each_block$1(e,s),m[r].c(),m[r].m(l.parentNode,l))}for(;r<m.length;r+=1)m[r].d(1);m.length=_.length}var s={};t.is_loading&&(s.is_loading=a.is_loading),t.is_error&&(s.is_error=a.is_error),t.error_message&&(s.error_message=a.error_message),g._set(s)},d(e){e&&detachNode(a),d&&d.d(),destroyEach(m,e),h.destroy(),u.destroy(),g.destroy()}}}function create_if_block_1(e,t){var a,r,s={data:t.data.patient},n=new PatientDetails({root:e.root,store:e.store,data:s});return{c(){(a=createElement("p")).textContent="Patient Details",r=createText("\r\n\r\n          "),n._fragment.c(),a.className="title is-5"},m(e,t){insert(e,a,t),insert(e,r,t),n._mount(e,t)},p(e,t){var a={};e.data&&(a.data=t.data.patient),n._set(a)},d(e){e&&(detachNode(a),detachNode(r)),n.destroy(e)}}}function create_if_block(e,t){var a,r,s,n,o,i,c,l=t.key,d=t.value;return{c(){a=createElement("p"),r=createElement("span"),s=createText(l),n=createText(": "),o=createText(d),i=createText(" "),c=createElement("br"),r.className="has-text-weight-bold is-size-5"},m(e,t){insert(e,a,t),append(a,r),append(r,s),append(a,n),append(a,o),insert(e,i,t),insert(e,c,t)},p(e,t){(e.Object||e.data)&&l!==(l=t.key)&&setData(s,l),(e.Object||e.data)&&d!==(d=t.value)&&setData(o,d)},d(e){e&&(detachNode(a),detachNode(i),detachNode(c))}}}function create_each_block$1(e,t){var a,r=t.value&&!t.omitted_field.includes(t.key)&&create_if_block(e,t);return{c(){r&&r.c(),a=createComment()},m(e,t){r&&r.m(e,t),insert(e,a,t)},p(t,s){s.value&&!s.omitted_field.includes(s.key)?r?r.p(t,s):((r=create_if_block(e,s)).c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},d(e){r&&r.d(e),e&&detachNode(a)}}}function ViewHistoryStatic(e){init(this,e),this._state=assign(assign(assign({Object:Object},this.store._init(["nav"])),data$1()),e.data),this.store._add(this,["nav"]),this._recompute({$nav:1,remedies:1,omitted_field:1},this._state),this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment$1(this,this._state),this.root._oncreate.push(()=>{oncreate.call(this),this.fire("update",{changed:assignTrue({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}function entityId$1({$nav:e}){return e&&e.params[0]}function filterFields$1({remedies:e,omitted_field:t}){let a=["built","constitution","diathesis","miasm","temperament","temperature_and_weather","thermal_sensitivity","sensation","tendency_take_cold","desires","aversions","birth_history_milestones","tissues","stages_and_states","attacks_and_side","ailments_from","affections","clinical","modalities","mental_state_and_disorders","appearance_and_behavior","attention_and_concentration","expression","consciousness","mood_and_affect","memory","speech","thoughts_and_ideas","perception","intelligence","judgment","fear_and_live_alone","boring","peaceful","anger","hobby","habit","addiction","nutrition","anaemia","cyanosis","dehydration","jaundice","pulse","breathing","peculiar_rare_symptoms"],r=[];if(e.length){for(let[s,n]of Object.entries(e[0]))a.includes(s)||t.includes(s)||r.push(s);return r.push(...a),r}}function loadSymptoms$1({remedies:e}){let t=[];for(let a in e){Object.entries(e[a]).forEach(([e,a])=>{t[e]=[]});break}for(let a in e){let r=e[a];Object.entries(r).forEach(([e,a])=>{a&&"string"==typeof a&&t[e].push(a.split(","))})}return t}function searchable_withkey({loadSymptoms:e}){let t=[],a=0;return Object.entries(e).forEach(([r,s])=>{let n=e[r];t[r]=[];for(let e in n)if(Array.isArray(n[e]))for(let s in n[e])t[r].push({id:a++,name:n[e][s]})}),t}function data$2(){return{is_loading:!1,is_error:!1,error_message:"",selected_symptom:"",selected_symp:"",selected_keyed_symp:"",result_symptoms:"",remedies:{},data:{},meta:{},remedy_found:{},omitted_field:["id","name","created","modified","deleted","patient","treatments"],tracker:{saving:!1,saved:!1,error:!1},page:{title:"View Case History",subtitle:"Case History details",icon:"building-o",icon_badge:"pencil"}}}assign(ViewHistoryStatic.prototype,proto),assign(ViewHistoryStatic.prototype,methods),ViewHistoryStatic.prototype._recompute=function(e,t){e.$nav&&this._differs(t.entityId,t.entityId=entityId(t))&&(e.entityId=!0),(e.remedies||e.omitted_field)&&this._differs(t.filterFields,t.filterFields=filterFields(t))&&(e.filterFields=!0),e.remedies&&this._differs(t.loadSymptoms,t.loadSymptoms=loadSymptoms(t))&&(e.loadSymptoms=!0)};var methods$1={select_symptom(e){this.set({selected_symptom:e})},load(){var{entityId:e}=this.get();this.set({is_loading:!0,is_error:!1}),Model&&Model.getOne(e).then(e=>{console.log(e),this.set({is_loading:!1,meta:e._meta,data:e.response})}).catch(e=>{var t="";void 0!==e&&void 0!==e.response&&void 0!==e.response.records&&(t=e.response.records.userMessage),this.set({is_error:!0,is_loading:!1,error_message:t})})},loadRemedies(){Remedies.getAll({limit:1e3}).then(e=>{this.set({remedies:e.response})}).catch(e=>{console.log(e)})},save(){var{data:e,entityId:t,tracker:a}=this.get();this.set({tracker:{saving:!0,saved:!1,error:!1}}),Model.save(t,e).then(e=>{this.set({data:e.response,tracker:{saving:!1,saved:!0,error:!1}}),setTimeout(()=>{a.saved=!1,this.set({tracker:a})},1500)}).catch(e=>{console.log(e),this.set({error_message:"There was an error updating premise"}),this.set({tracker:{saving:!1,saved:!1,error:!0}}),setTimeout(()=>{this.set({tracker:{error:!1}})},1500)})}};function oncreate$1(){var{entityId:e}=this.get();this.on("state",({changed:e,current:t,previous:a})=>{if(e.$nav){var{$nav:r}=t;"ViewHistoryEdit"==r.activeView&&this.load()}}),this.load(),this.loadRemedies()}function click_handler$1(e){const{component:t,ctx:a}=this._svelte;t.select_symptom(a.key)}function get_each2_context(e,t,a){const r=Object.create(e);return r.key=t[a],r}function get_each1_context(e,t,a){const r=Object.create(e);return r.key=t[a],r.index=a,r}function get_each0_context(e,t,a){const r=Object.create(e);return r.key=t[a],r.index=a,r}function get_each_context$2(e,t,a){const r=Object.create(e);return r.key=t[a][0],r.value=t[a][1],r.i=a,r}function create_main_fragment$2(e,t){var a,r,s,n,o,i,c,l,d=t.tracker.error&&create_if_block_5(e,t),_=0===t.Object.keys(t.remedy_found).length&&create_if_block_3(e,t),m=0!==t.Object.keys(t.remedy_found).length&&create_if_block_2(e,t),p=new ConfirmButton({root:e.root,store:e.store,data:{text:"Reset",color:"danger",size:"",icon:"refresh",icon_only:!1,disabled:!0}});p.on("do",function(t){e.reset(t)});var h=t.remedies.length&&create_if_block$1(e,t),u=new Panel({root:e.root,store:e.store,slots:{default:createFragment(),toolbar:createFragment()},data:{title:"Cases",has_toolbar:!0}}),f={is_loading:t.is_loading,is_error:t.is_error,error_message:t.error_message},g=new ViewScaffold({root:e.root,store:e.store,slots:{default:createFragment()},data:f});return{c(){a=createElement("div"),d&&d.c(),r=createText("\r\n    \r\n  "),_&&_.c(),s=createText("\r\n\r\n  "),m&&m.c(),n=createText("\r\n\r\n  "),o=createElement("div"),p._fragment.c(),i=createText("\r\n\r\n    "),c=createElement("div"),l=createElement("div"),h&&h.c(),u._fragment.c(),g._fragment.c(),setAttribute(o,"slot","toolbar"),l.className="column",c.className="columns",a.className="page-content"},m(e,t){insert(e,a,t),d&&d.m(g._slotted.default,null),append(g._slotted.default,r),_&&_.m(g._slotted.default,null),append(g._slotted.default,s),m&&m.m(g._slotted.default,null),append(g._slotted.default,n),append(u._slotted.toolbar,o),p._mount(o,null),append(u._slotted.default,i),append(u._slotted.default,c),append(c,l),h&&h.m(l,null),u._mount(g._slotted.default,null),g._mount(a,null)},p(t,a){a.tracker.error?d?d.p(t,a):((d=create_if_block_5(e,a)).c(),d.m(r.parentNode,r)):d&&(d.d(1),d=null),0===a.Object.keys(a.remedy_found).length?_?_.p(t,a):((_=create_if_block_3(e,a)).c(),_.m(s.parentNode,s)):_&&(_.d(1),_=null),0!==a.Object.keys(a.remedy_found).length?m||((m=create_if_block_2(e,a)).c(),m.m(n.parentNode,n)):m&&(m.d(1),m=null),a.remedies.length?h?h.p(t,a):((h=create_if_block$1(e,a)).c(),h.m(l,null)):h&&(h.d(1),h=null);var o={};t.is_loading&&(o.is_loading=a.is_loading),t.is_error&&(o.is_error=a.is_error),t.error_message&&(o.error_message=a.error_message),g._set(o)},d(e){e&&detachNode(a),d&&d.d(),_&&_.d(),m&&m.d(),p.destroy(),h&&h.d(),u.destroy(),g.destroy()}}}function create_if_block_5(e,t){var a,r=new Notification({root:e.root,store:e.store,slots:{default:createFragment()},data:{type:"danger"}});return{c(){a=createText(t.error_message),r._fragment.c()},m(e,t){append(r._slotted.default,a),r._mount(e,t)},p(e,t){e.error_message&&setData(a,t.error_message)},d(e){r.destroy(e)}}}function create_if_block_3(e,t){for(var a,r,s,n,o,i,c,l,d,_,m,p,h,u,f,g,v,b,y,k,x,E,N,T,$,S,w,j,F,O,V,C,H,I,D,L,A,P=!1,M=!1,R={},z={},B={},K=t.Object.entries(t.data),W=[],q=0;q<K.length;q+=1)W[q]=create_each_block_3(e,get_each_context$2(t,K,q));function X(){P=!0,e.set({selected_symptom:selectValue(i)}),P=!1}function Y(){M=!0,t.data[t.selected_symptom]=u.value,e.set({data:t.data,selected_symptom:t.selected_symptom,Object:t.Object}),M=!1}var G={data:t.searchable_withkey[t.selected_symptom],placeholder:"Choose...",searchKey:"name",searchValue:"id"};void 0!==t.selected_keyed_symp&&(G._name=t.selected_keyed_symp,R._name=!0);var J=new SearchableSelect({root:e.root,store:e.store,data:G,_bind(t,a){var r={};!R._name&&t._name&&(r.selected_keyed_symp=a._name),e._set(r),R={}}});e.root._beforecreate.push(()=>{J._bind({_name:1},J.get())});var Q={data:t.searchable_symp,placeholder:"Choose...",searchKey:"name",searchValue:"id"};void 0!==t.selected_symp&&(Q._name=t.selected_symp,z._name=!0);var U=new SearchableSelect({root:e.root,store:e.store,data:Q,_bind(t,a){var r={};!z._name&&t._name&&(r.selected_symp=a._name),e._set(r),z={}}});e.root._beforecreate.push(()=>{U._bind({_name:1},U.get())});var Z={disabled:!0,classes:"is-primary is-medium is-pulled-right",icon:"search",icon_size:"small",text:"Search"};void 0!==t.tracker&&(Z.tracker=t.tracker,B.tracker=!0);var ee=new SubmitButton({root:e.root,store:e.store,data:Z,_bind(t,a){var r={};!B.tracker&&t.tracker&&(r.tracker=a.tracker),e._set(r),B={}}});e.root._beforecreate.push(()=>{ee._bind({tracker:1},ee.get())});var te=new Panel({root:e.root,store:e.store,slots:{default:createFragment()},data:{title:"Patient Symptoms",has_toolbar:!0}});function ae(t){e.search(t)}return{c(){a=createElement("form"),r=createElement("div"),s=createElement("div"),n=createElement("div"),o=createElement("span"),i=createElement("select"),(c=createElement("option")).textContent="Select Type";for(var P=0;P<W.length;P+=1)W[P].c();l=createText("\r\n\r\n            "),d=createElement("div"),_=createElement("p"),m=createElement("label"),p=createText(t.selected_symptom),h=createText("\r\n                "),u=createElement("textarea"),g=createText("\r\n          "),v=createElement("div"),(b=createElement("p")).textContent="Suggestions",y=createText("\r\n\r\n            "),k=createElement("div"),x=createElement("p"),E=createElement("label"),N=createText(t.selected_symptom),T=createText(" Symptoms in the System"),$=createText("\r\n                  "),J._fragment.c(),S=createText("\r\n\r\n            "),w=createElement("div"),j=createElement("p"),(F=createElement("label")).textContent="All Symptoms in the System",O=createText("\r\n                  "),U._fragment.c(),V=createText("\r\n            "),C=createElement("div"),H=createElement("p"),(I=createElement("label")).textContent=" ",D=createText("\r\n                "),ee._fragment.c(),te._fragment.c(),L=createText("\r\n      "),A=createElement("br"),c.__value="",c.value=c.__value,addListener(i,"change",X),"selected_symptom"in t||e.root._beforecreate.push(X),i.className="input",o.className="select is-fullwidth",n.className="field",m.className="label",setStyle(m,"text-transform","capitalize"),addListener(u,"input",Y),u.className="textarea",u.placeholder=f=t.selected_symptom+"...",setStyle(u,"height","15rem"),_.className="control",d.className="field",s.className="column",b.className="title is-5",E.className="label",setStyle(E,"text-transform","capitalize"),x.className="control",k.className="field",F.className="label",setStyle(F,"text-transform","capitalize"),j.className="control",w.className="field",I.className="label",H.className="control",C.className="field",v.className="column",r.className="columns",addListener(a,"submit",ae)},m(e,f){insert(e,a,f),append(te._slotted.default,r),append(r,s),append(s,n),append(n,o),append(o,i),append(i,c);for(var P=0;P<W.length;P+=1)W[P].m(i,null);selectOption(i,t.selected_symptom),append(s,l),append(s,d),append(d,_),append(_,m),append(m,p),append(_,h),append(_,u),u.value=t.data[t.selected_symptom],append(r,g),append(r,v),append(v,b),append(v,y),append(v,k),append(k,x),append(x,E),append(E,N),append(E,T),append(x,$),J._mount(x,null),append(v,S),append(v,w),append(w,j),append(j,F),append(j,O),U._mount(j,null),append(v,V),append(v,C),append(C,H),append(H,I),append(H,D),ee._mount(H,null),te._mount(a,null),insert(e,L,f),insert(e,A,f)},p(a,r){if(t=r,a.omitted_field||a.Object||a.data){K=t.Object.entries(t.data);for(var s=0;s<K.length;s+=1){const r=get_each_context$2(t,K,s);W[s]?W[s].p(a,r):(W[s]=create_each_block_3(e,r),W[s].c(),W[s].m(i,null))}for(;s<W.length;s+=1)W[s].d(1);W.length=K.length}!P&&a.selected_symptom&&selectOption(i,t.selected_symptom),a.selected_symptom&&setData(p,t.selected_symptom),M||!a.data&&!a.selected_symptom||(u.value=t.data[t.selected_symptom]),a.selected_symptom&&f!==(f=t.selected_symptom+"...")&&(u.placeholder=f),a.selected_symptom&&setData(N,t.selected_symptom);var n={};(a.searchable_withkey||a.selected_symptom)&&(n.data=t.searchable_withkey[t.selected_symptom]),!R._name&&a.selected_keyed_symp&&(n._name=t.selected_keyed_symp,R._name=void 0!==t.selected_keyed_symp),J._set(n),R={};var o={};a.searchable_symp&&(o.data=t.searchable_symp),!z._name&&a.selected_symp&&(o._name=t.selected_symp,z._name=void 0!==t.selected_symp),U._set(o),z={};var c={};!B.tracker&&a.tracker&&(c.tracker=t.tracker,B.tracker=void 0!==t.tracker),ee._set(c),B={}},d(e){e&&detachNode(a),destroyEach(W,e),removeListener(i,"change",X),removeListener(u,"input",Y),J.destroy(),U.destroy(),ee.destroy(),te.destroy(),removeListener(a,"submit",ae),e&&(detachNode(L),detachNode(A))}}}function create_if_block_4(e,t){var a,r,s,n=t.key;return{c(){a=createElement("option"),r=createText(n),a.__value=s=t.key,a.value=a.__value},m(e,t){insert(e,a,t),append(a,r)},p(e,t){(e.Object||e.data)&&n!==(n=t.key)&&setData(r,n),(e.Object||e.data)&&s!==(s=t.key)&&(a.__value=s),a.value=a.__value},d(e){e&&detachNode(a)}}}function create_each_block_3(e,t){var a,r=!t.omitted_field.includes(t.key)&&create_if_block_4(e,t);return{c(){r&&r.c(),a=createComment()},m(e,t){r&&r.m(e,t),insert(e,a,t)},p(t,s){s.omitted_field.includes(s.key)?r&&(r.d(1),r=null):r?r.p(t,s):((r=create_if_block_4(e,s)).c(),r.m(a.parentNode,a))},d(e){r&&r.d(e),e&&detachNode(a)}}}function create_if_block_2(e,t){var a;return{c(){a=createElement("br")},m(e,t){insert(e,a,t)},d(e){e&&detachNode(a)}}}function create_if_block$1(e,t){for(var a,r,s,n,o,i,c,l,d,_,m,p,h,u,f,g,v,b,y,k,x=!1,E=!1,N=t.filterFields,T=[],$=0;$<N.length;$+=1)T[$]=create_each_block_2(e,get_each0_context(t,N,$));function S(){x=!0,e.set({selected_symptom:selectValue(c)}),x=!1}var w=t.filterFields,j=[];for($=0;$<w.length;$+=1)j[$]=create_each_block_1(e,get_each1_context(t,w,$));function F(){E=!0,e.set({selected_symptom:selectValue(f)}),E=!1}var O=t.filterFields,V=[];for($=0;$<O.length;$+=1)V[$]=create_each_block$2(e,get_each2_context(t,O,$));return{c(){a=createElement("div"),r=createElement("div"),(s=createElement("label")).textContent="With Number",n=createText("\r\n            "),o=createElement("div"),i=createElement("span"),c=createElement("select"),(l=createElement("option")).textContent="Select Type";for(var x=0;x<T.length;x+=1)T[x].c();d=createText("\r\n          "),_=createElement("div"),(m=createElement("label")).textContent="Without Number",p=createText("\r\n            "),h=createElement("div"),u=createElement("span"),f=createElement("select"),(g=createElement("option")).textContent="Select Type";for(x=0;x<j.length;x+=1)j[x].c();v=createText("\r\n\r\n        "),b=createElement("div"),y=createElement("div"),k=createElement("div");for(x=0;x<V.length;x+=1)V[x].c();s.className="label",l.__value="",l.value=l.__value,addListener(c,"change",S),"selected_symptom"in t||e.root._beforecreate.push(S),c.className="input",i.className="select is-fullwidth",o.className="field",r.className="column",m.className="label",g.__value="",g.value=g.__value,addListener(f,"change",F),"selected_symptom"in t||e.root._beforecreate.push(F),f.className="input",u.className="select is-fullwidth",h.className="field",_.className="column",a.className="columns",k.className="buttons",y.className="column",b.className="columns"},m(e,x){insert(e,a,x),append(a,r),append(r,s),append(r,n),append(r,o),append(o,i),append(i,c),append(c,l);for(var E=0;E<T.length;E+=1)T[E].m(c,null);selectOption(c,t.selected_symptom),append(a,d),append(a,_),append(_,m),append(_,p),append(_,h),append(h,u),append(u,f),append(f,g);for(E=0;E<j.length;E+=1)j[E].m(f,null);selectOption(f,t.selected_symptom),insert(e,v,x),insert(e,b,x),append(b,y),append(y,k);for(E=0;E<V.length;E+=1)V[E].m(k,null)},p(t,a){if(t.filterFields){N=a.filterFields;for(var r=0;r<N.length;r+=1){const s=get_each0_context(a,N,r);T[r]?T[r].p(t,s):(T[r]=create_each_block_2(e,s),T[r].c(),T[r].m(c,null))}for(;r<T.length;r+=1)T[r].d(1);T.length=N.length}if(!x&&t.selected_symptom&&selectOption(c,a.selected_symptom),t.filterFields){w=a.filterFields;for(r=0;r<w.length;r+=1){const s=get_each1_context(a,w,r);j[r]?j[r].p(t,s):(j[r]=create_each_block_1(e,s),j[r].c(),j[r].m(f,null))}for(;r<j.length;r+=1)j[r].d(1);j.length=w.length}if(!E&&t.selected_symptom&&selectOption(f,a.selected_symptom),t.filterFields||t.selected_symptom||t.data){O=a.filterFields;for(r=0;r<O.length;r+=1){const s=get_each2_context(a,O,r);V[r]?V[r].p(t,s):(V[r]=create_each_block$2(e,s),V[r].c(),V[r].m(k,null))}for(;r<V.length;r+=1)V[r].d(1);V.length=O.length}},d(e){e&&detachNode(a),destroyEach(T,e),removeListener(c,"change",S),destroyEach(j,e),removeListener(f,"change",F),e&&(detachNode(v),detachNode(b)),destroyEach(V,e)}}}function create_each_block_2(e,t){var a,r,s,n,o,i=t.index+1,c=t.key;return{c(){a=createElement("option"),r=createText(i),s=createText(" - "),n=createText(c),a.__value=o=t.key,a.value=a.__value},m(e,t){insert(e,a,t),append(a,r),append(a,s),append(a,n)},p(e,t){e.filterFields&&c!==(c=t.key)&&setData(n,c),e.filterFields&&o!==(o=t.key)&&(a.__value=o),a.value=a.__value},d(e){e&&detachNode(a)}}}function create_each_block_1(e,t){var a,r,s,n=t.key;return{c(){a=createElement("option"),r=createText(n),a.__value=s=t.key,a.value=a.__value},m(e,t){insert(e,a,t),append(a,r)},p(e,t){e.filterFields&&n!==(n=t.key)&&setData(r,n),e.filterFields&&s!==(s=t.key)&&(a.__value=s),a.value=a.__value},d(e){e&&detachNode(a)}}}function create_if_block_1$1(e,t){var a;return{c(){(a=createElement("span")).innerHTML='<i class="fa fa-check"></i>',a.className="icon is-small"},m(e,t){insert(e,a,t)},d(e){e&&detachNode(a)}}}function create_each_block$2(e,t){var a,r,s,n,o,i,c=t.key,l=t.data[t.key]&&create_if_block_1$1(e,t);return{c(){a=createElement("button"),l&&l.c(),r=createText("\r\n                    "),s=createElement("span"),n=createText(c),o=createText("\r\n                  "),a._svelte={component:e,ctx:t},addListener(a,"click",click_handler$1),a.type="button",a.className=i="button is-medium is-"+(t.key==t.selected_symptom?"success":t.data[t.key]?"":"info")+" ",setStyle(a,"text-transform","capitalize"),setStyle(a,"margin-left",".6rem"),setStyle(a,"margin-bottom",".6rem")},m(e,t){insert(e,a,t),l&&l.m(a,null),append(a,r),append(a,s),append(s,n),append(a,o)},p(s,o){(t=o).data[t.key]?l||((l=create_if_block_1$1(e,t)).c(),l.m(a,r)):l&&(l.d(1),l=null),s.filterFields&&c!==(c=t.key)&&setData(n,c),a._svelte.ctx=t,(s.filterFields||s.selected_symptom||s.data)&&i!==(i="button is-medium is-"+(t.key==t.selected_symptom?"success":t.data[t.key]?"":"info")+" ")&&(a.className=i)},d(e){e&&detachNode(a),l&&l.d(),removeListener(a,"click",click_handler$1)}}}function ViewHistoryEdit(e){init(this,e),this._state=assign(assign(assign({Object:Object},this.store._init(["nav"])),data$2()),e.data),this.store._add(this,["nav"]),this._recompute({$nav:1,remedies:1,omitted_field:1,loadSymptoms:1},this._state),this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment$2(this,this._state),this.root._oncreate.push(()=>{oncreate$1.call(this),this.fire("update",{changed:assignTrue({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}function entityId$2({$nav:e}){return e&&e.params[0]}function data$3(){return{is_loading:!1,is_error:!1,error_message:"",pane_height:500,data:{},meta:{},tracker:{saving:!1,saved:!1,error:!1},page:{title:"View Case History",subtitle:"Case History details",icon:"building-o",icon_badge:"pencil"},active_tab:"static_view",tabs:[{icon:"info-circle",name:"static_view",title:"Static"},{icon:"pencil",name:"edit_view",title:"Edit Case History"}]}}assign(ViewHistoryEdit.prototype,proto),assign(ViewHistoryEdit.prototype,methods$1),ViewHistoryEdit.prototype._recompute=function(e,t){e.$nav&&this._differs(t.entityId,t.entityId=entityId$1(t))&&(e.entityId=!0),(e.remedies||e.omitted_field)&&this._differs(t.filterFields,t.filterFields=filterFields$1(t))&&(e.filterFields=!0),e.remedies&&this._differs(t.loadSymptoms,t.loadSymptoms=loadSymptoms$1(t))&&(e.loadSymptoms=!0),e.loadSymptoms&&this._differs(t.searchable_withkey,t.searchable_withkey=searchable_withkey(t))&&(e.searchable_withkey=!0)};var methods$2={};function oncreate$2(){this.on("heightChange",({height:e})=>{this.set({pane_height:e})});var{entityId:e}=this.get();this.on("state",({changed:e,current:t,previous:a})=>{console.log(t)})}function create_main_fragment$3(e,t){var a,r,s,n,o,i,c,l,d={},_=new Icon({root:e.root,store:e.store,data:{icon:"long-arrow-left",size:"small"}}),m={page:t.page},p=new PageTitle({root:e.root,store:e.store,slots:{default:createFragment()},data:m}),h={tabs:t.tabs};void 0!==t.active_tab&&(h.active_tab=t.active_tab,d.active_tab=!0);var u=new Tabs({root:e.root,store:e.store,data:h,_bind(t,a){var r={};!d.active_tab&&t.active_tab&&(r.active_tab=a.active_tab),e._set(r),d={}}});e.root._beforecreate.push(()=>{u._bind({active_tab:1},u.get())});var f="static_view"==t.active_tab&&create_if_block_1$2(e,t),g="edit_view"==t.active_tab&&create_if_block$2(e,t),v={is_loading:t.is_loading,is_error:t.is_error,error_message:t.error_message,class:"has-fullpage-tabs has-multilevel-tabs"},b=new ViewScaffold({root:e.root,store:e.store,slots:{default:createFragment()},data:v});return{c(){a=createElement("div"),r=createElement("a"),_._fragment.c(),s=createText("\r\n      "),(n=createElement("span")).textContent="Back to All Histories",p._fragment.c(),o=createText("\r\n\r\n  "),u._fragment.c(),i=createText("\r\n\r\n    \r\n        \r\n        "),f&&f.c(),c=createText("\r\n      \r\n        \r\n        "),g&&g.c(),l=createComment(),b._fragment.c(),r.className="button is-info is-pulled-right",r.href="#history",a.className="page-content"},m(e,t){insert(e,a,t),append(p._slotted.default,r),_._mount(r,null),append(r,s),append(r,n),p._mount(a,null),append(a,o),u._mount(b._slotted.default,null),append(b._slotted.default,i),f&&f.m(b._slotted.default,null),append(b._slotted.default,c),g&&g.m(b._slotted.default,null),append(b._slotted.default,l),b._mount(a,null)},p(a,r){t=r;var s={};a.page&&(s.page=t.page),p._set(s);var n={};a.tabs&&(n.tabs=t.tabs),!d.active_tab&&a.active_tab&&(n.active_tab=t.active_tab,d.active_tab=void 0!==t.active_tab),u._set(n),d={},"static_view"==t.active_tab?f?f.p(a,t):((f=create_if_block_1$2(e,t)).c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null),"edit_view"==t.active_tab?g?g.p(a,t):((g=create_if_block$2(e,t)).c(),g.m(l.parentNode,l)):g&&(g.d(1),g=null);var o={};a.is_loading&&(o.is_loading=t.is_loading),a.is_error&&(o.is_error=t.is_error),a.error_message&&(o.error_message=t.error_message),b._set(o)},d(e){e&&detachNode(a),_.destroy(),p.destroy(),u.destroy(),f&&f.d(),g&&g.d(),b.destroy()}}}function create_if_block_1$2(e,t){var a={},r={};void 0!==t.is_error&&(r.is_error=t.is_error,a.is_error=!0),void 0!==t.error_message&&(r.error_message=t.error_message,a.error_message=!0);var s=new ViewHistoryStatic({root:e.root,store:e.store,data:r,_bind(t,r){var s={};!a.is_error&&t.is_error&&(s.is_error=r.is_error),!a.error_message&&t.error_message&&(s.error_message=r.error_message),e._set(s),a={}}});return e.root._beforecreate.push(()=>{s._bind({is_error:1,error_message:1},s.get())}),{c(){s._fragment.c()},m(e,t){s._mount(e,t)},p(e,r){t=r;var n={};!a.is_error&&e.is_error&&(n.is_error=t.is_error,a.is_error=void 0!==t.is_error),!a.error_message&&e.error_message&&(n.error_message=t.error_message,a.error_message=void 0!==t.error_message),s._set(n),a={}},d(e){s.destroy(e)}}}function create_if_block$2(e,t){var a={},r={};void 0!==t.is_error&&(r.is_error=t.is_error,a.is_error=!0),void 0!==t.error_message&&(r.error_message=t.error_message,a.error_message=!0);var s=new ViewHistoryEdit({root:e.root,store:e.store,data:r,_bind(t,r){var s={};!a.is_error&&t.is_error&&(s.is_error=r.is_error),!a.error_message&&t.error_message&&(s.error_message=r.error_message),e._set(s),a={}}});return e.root._beforecreate.push(()=>{s._bind({is_error:1,error_message:1},s.get())}),{c(){s._fragment.c()},m(e,t){s._mount(e,t)},p(e,r){t=r;var n={};!a.is_error&&e.is_error&&(n.is_error=t.is_error,a.is_error=void 0!==t.is_error),!a.error_message&&e.error_message&&(n.error_message=t.error_message,a.error_message=void 0!==t.error_message),s._set(n),a={}},d(e){s.destroy(e)}}}function ViewHistory(e){init(this,e),this._state=assign(assign(this.store._init(["nav"]),data$3()),e.data),this.store._add(this,["nav"]),this._recompute({$nav:1},this._state),this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment$3(this,this._state),this.root._oncreate.push(()=>{oncreate$2.call(this),this.fire("update",{changed:assignTrue({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}assign(ViewHistory.prototype,proto),assign(ViewHistory.prototype,methods$2),ViewHistory.prototype._recompute=function(e,t){e.$nav&&this._differs(t.entityId,t.entityId=entityId$2(t))&&(e.entityId=!0)};export default ViewHistory;
//# sourceMappingURL=ViewHistory.js.map
