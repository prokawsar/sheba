{"version":3,"file":"SingleView.js","sources":["../../../src/components/views/remedies/helpers/SingleView.html"],"sourcesContent":["<div class=\"page-content\">\r\n\r\n  <PageTitle page=\"{page}\">\r\n    <a class=\"button is-info is-inverted is-pulled-right\" href=\"#remedies\">\r\n      <Icon icon=\"long-arrow-left\" size=\"small\" />\r\n      <span>Back to All Remedies</span>\r\n    </a>\r\n  </PageTitle>\r\n\r\n  <ViewScaffold {is_loading} {is_error} {error_message}>\r\n\r\n    {#if tracker.error}\r\n      <Notification type=\"danger\">{error_message}</Notification>\r\n    {/if}\r\n\r\n    {#if !is_loading}\r\n      <form on:submit=\"fire('save', event)\">\r\n        <Panel title=\"Remedy Details\" has_toolbar={true}>\r\n          <div slot='toolbar' class=\"is-pulled-right\">\r\n            <a class=\"button is-primary\" href=\"#remedies/view/{entityId}\"><span class=\"icon\"><i class=\"fa fa-pencil\"></i></span> <span>Edit</span></a>\r\n          </div>\r\n\r\n          <div class=\"columns\">\r\n            <div class=\"column\">\r\n\r\n              <div class=\"field\">\r\n                <p class=\"control\">\r\n                  <label class=\"label\">Name</label>\r\n                  <input class=\"input is-medium\" type=\"text\" required bind:value=\"data.name\" readonly />\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"columns\">\r\n            <div class=\"column\">\r\n              {#each Object.entries(data) as [key, value], i}\r\n                {#if value && !omitted_field.includes(key) }\r\n                  <div class=\"columns\">\r\n                    <div class=\"column is-3\">\r\n                      <p class=\"title is-5\" style=\"text-transform: capitalize;\">{i-1} - <u>{key} </u></p>\r\n                    </div>\r\n                    <div class=\"column\">\r\n                      <Message color=\"is-light\">\r\n                        <p class=\"subtitle is-5\">{value ? value : 'No data'}</p>\r\n                      </Message>\r\n                    </div>\r\n                  </div>\r\n                {/if}\r\n              {/each}\r\n            </div>\r\n\r\n          </div>\r\n        </Panel>\r\n      </form>\r\n    {/if}\r\n\r\n  </ViewScaffold>\r\n</div>\r\n\r\n<script>\r\n  import Model from '../../../../models/remedies';\r\n  import {Icon, Notification, Panel, Message} from '@kws3/helpers';\r\n  import { SubmitButton } from '@kws3/buttons';\r\n\r\n  export default {\r\n    components: {\r\n      ViewScaffold: '../../../helpers/ViewScaffold.html',\r\n      PageTitle: '../../../helpers/PageTitle.html',\r\n      Notification,\r\n      Icon, Panel, Message,\r\n\r\n    },\r\n    data() {\r\n      return {\r\n        is_loading: true,\r\n        is_error: false,\r\n        error_message: '',\r\n        data: {},\r\n        meta: {},\r\n        omitted_field: [ 'id', 'name', 'created', 'modified', 'deleted', 'patient', 'treatments'],\r\n        tracker: {\r\n          saving: false,\r\n          saved: false,\r\n          error: false,\r\n        },\r\n        page: {\r\n          title: 'View Remedy',\r\n          subtitle: 'Modify Remedy details',\r\n          icon: 'building-o',\r\n          icon_badge: 'pencil'\r\n        },\r\n      }\r\n    },\r\n    computed: {\r\n      entityId: ({ $nav }) => $nav && $nav.params[0],\r\n    },\r\n    oncreate() {\r\n      var { entityId } = this.get();\r\n\r\n      this.on('state', ({ changed, current, previous }) => {\r\n        if (changed['$nav']) {\r\n          var { $nav } = current;\r\n          if ($nav.activeView == '_COMPONENT_') {\r\n            this.load();\r\n          }\r\n        }\r\n      });\r\n\r\n      this.load();\r\n    },\r\n    methods: {\r\n      load() {\r\n        var { entityId } = this.get();\r\n\r\n        this.set({\r\n          'is_loading': true,\r\n          'is_error': false\r\n        });\r\n\r\n        Model.getOne(entityId)\r\n        .then((r) => {\r\n\r\n          this.set({\r\n            'is_loading': false,\r\n            'meta': r._meta,\r\n            'data': r.response\r\n          });\r\n\r\n        })\r\n        .catch((r) => {\r\n          var user_message = '';\r\n          if (typeof r != 'undefined' && typeof r.response != 'undefined' && typeof r.response.records != 'undefined') {\r\n            user_message = r.response.records.userMessage;\r\n          }\r\n          this.set({\r\n            'is_error': true,\r\n            'is_loading': false,\r\n            'error_message': user_message\r\n          });\r\n        });\r\n      },\r\n    }\r\n  }\r\n</script>"],"names":["$nav","params","is_loading","is_error","error_message","data","meta","omitted_field","tracker","saving","saved","error","page","title","subtitle","icon","icon_badge","[object Object]","entityId","this","get","set","Model","getOne","then","r","_meta","response","catch","user_message","records","userMessage","on","changed","current","previous","activeView","load","name","Object","entries","length","fire","event","i","key","value","includes"],"mappings":"mkBAiEA,mBA8BiBA,KAAEA,WAAWA,GAAQA,EAAKC,OAAO,mBArB5C,MAAO,CACLC,YAAY,EACZC,UAAU,EACVC,cAAe,GACfC,KAAM,GACNC,KAAM,GACNC,cAAe,CAAE,KAAM,OAAQ,UAAW,WAAY,UAAW,UAAW,cAC5EC,QAAS,CACPC,QAAQ,EACRC,OAAO,EACPC,OAAO,GAETC,KAAM,CACJC,MAAO,cACPC,SAAU,wBACVC,KAAM,aACNC,WAAY,uBAqBT,CACPC,OACE,IAAIC,SAAEA,GAAaC,KAAKC,MAExBD,KAAKE,IAAI,CACPnB,YAAc,EACdC,UAAY,IAGdmB,SAAMC,OAAOL,GACZM,KAAMC,IAELN,KAAKE,IAAI,CACPnB,YAAc,EACdI,KAAQmB,EAAEC,MACVrB,KAAQoB,EAAEE,aAIbC,MAAOH,IACN,IAAII,EAAe,QACH,IAALJ,QAAyC,IAAdA,EAAEE,eAAwD,IAAtBF,EAAEE,SAASG,UACnFD,EAAeJ,EAAEE,SAASG,QAAQC,aAEpCZ,KAAKE,IAAI,CACPlB,UAAY,EACZD,YAAc,EACdE,cAAiByB,4BAxCvB,IAAIX,SAAEA,GAAaC,KAAKC,MAExBD,KAAKa,GAAG,QAAS,EAAGC,QAAAA,EAASC,QAAAA,EAASC,SAAAA,MACpC,GAAIF,EAAc,KAAG,CACnB,IAAIjC,KAAEA,GAASkC,EACQ,cAAnBlC,EAAKoC,YACPjB,KAAKkB,UAKXlB,KAAKkB,gQA3GSzB,+FASXJ,QAAa,mCAIZN,iDANOA,sBAAaC,yBAAWC,gxBAPrBQ,kBASXJ,QAAQG,2FAIPT,mIANOA,sCAAaC,8CAAWC,8QAGNA,uHAAAA,mIAgB+CC,KAAKiC,mDAQlEC,OAAOC,UAAQnC,mBAApBoC,6MAnBmC,qBAD5BC,KAAK,OAAQC,qpBAG2BzB,slBASmBb,KAAKiC,6LATxBpB,6CASmBb,KAAKiC,6CAQlEC,OAAOC,UAAQnC,sBAApBoC,8JAAAA,uLAIiEG,EAAE,MAASC,QAI1CC,QAAQA,MAAQ,syBAJ0BD,gDAI1CC,QAAQA,MAAQ,wGAP7CA,UAAUvC,cAAcwC,WAASF,+GAAjCC,UAAUvC,cAAcwC,WAASF"}