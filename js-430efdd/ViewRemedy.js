var K_ENV="prod",K_ENV_DEV="dev",K_ENV_TEST="test",K_ENV_PROD="prod";import{w as addListener,a as append,b as assign,c as assignTrue,z as createComment,d as createElement,e as createFragment,f as createText,A as destroyEach,g as detachNode,h as flush,i as init,j as insert,l as proto,m as removeFromStore,x as removeListener,X as selectOption,Y as selectValue,y as setAttribute,B as setData,C as setStyle,n as Icon,E as Notification,D as Panel,o as Message,q as ViewScaffold,r as PageTitle}from"./chunk-ce2fee6f.js";import{a as SearchableSelect}from"./chunk-a7963841.js";import{b as SubmitButton}from"./chunk-d9e89df1.js";import{a as Remedies}from"./chunk-dc7fa8bb.js";function entityId({$nav:e}){return e&&e.params[0]}function is_reference({selected_symptom:e}){return"book_references"==e}function data(){return{is_loading:!0,is_error:!1,error_message:"",selected_symptom:"",data:{},meta:{},omitted_field:["id","name","created","modified","deleted","patient","treatments"],book_references:[{name:"Condensed M.M - C. Hering",id:"Condensed M.M - C. Hering"},{name:"Textbook of M.M - A. Lippe",id:"Textbook of M.M - A. Lippe"},{name:"M.M Pura - S. Hahnemann",id:"M.M Pura - S. Hahnemann"},{name:"Notes - Dr. Mazed",id:"Notes - Dr. Mazed"}],tracker:{saving:!1,saved:!1,error:!1},page:{title:"View Remedy",subtitle:"Modify Remedy details",icon:"building-o",icon_badge:"pencil"}}}var methods={select_symptom(e){let{input_field:t}=this.refs;t.focus(),this.set({selected_symptom:e})},load(){var{entityId:e}=this.get();this.set({is_loading:!0,is_error:!1}),Remedies.getOne(e).then(e=>{this.set({is_loading:!1,meta:e._meta,data:e.response})}).catch(e=>{var t="";void 0!==e&&void 0!==e.response&&void 0!==e.response.records&&(t=e.response.records.userMessage),this.set({is_error:!0,is_loading:!1,error_message:t})})},save(){var{data:e,entityId:t,tracker:a}=this.get();this.set({tracker:{saving:!0,saved:!1,error:!1}}),Remedies.save(t,e).then(e=>{this.set({data:e.response,tracker:{saving:!1,saved:!0,error:!1}}),setTimeout(()=>{a.saved=!1,this.set({tracker:a})},1500)}).catch(e=>{this.set({error_message:"There was an error updating remedy"}),this.set({tracker:{saving:!1,saved:!1,error:!0}}),setTimeout(()=>{this.set({tracker:{error:!1}})},1500)})}};function oncreate(){var{entityId:e}=this.get();this.on("state",({changed:e,current:t,previous:a})=>{let{data:r,selected_symptom:s}=this.get();t.selected_keyed_symp!=a.selected_keyed_symp&&(r[s]=r[s]?r[s]+", "+t.selected_keyed_symp:t.selected_keyed_symp,this.set({data:r}))}),this.on("save",e=>{e.preventDefault();var{data:t}=this.get();""!=t.name&&(this.set({data:t}),this.save())}),this.load()}function get_each1_context(e,t,a){const r=Object.create(e);return r.key=t[a][0],r.value=t[a][1],r.i=a,r}function click_handler(e){const{component:t,ctx:a}=this._svelte;t.select_symptom(a.key)}function get_each0_context(e,t,a){const r=Object.create(e);return r.key=t[a][0],r.value=t[a][1],r.i=a,r}function create_main_fragment(e,t){var a,r,s,n,c,o,d,l=new Icon({root:e.root,store:e.store,data:{icon:"long-arrow-left",size:"small"}}),i={page:t.page},m=new PageTitle({root:e.root,store:e.store,slots:{default:createFragment()},data:i}),_=t.tracker.error&&create_if_block_5(e,t),p=!t.is_loading&&create_if_block(e,t),u={is_loading:t.is_loading,is_error:t.is_error,error_message:t.error_message},f=new ViewScaffold({root:e.root,store:e.store,slots:{default:createFragment()},data:u});return{c(){a=createElement("div"),r=createElement("a"),l._fragment.c(),s=createText("\r\n      "),(n=createElement("span")).textContent="Back to All Remedies",m._fragment.c(),c=createText("\r\n\r\n  "),_&&_.c(),o=createText("\r\n\r\n    "),p&&p.c(),d=createComment(),f._fragment.c(),r.className="button is-info is-inverted is-pulled-right",r.href="#remedies",a.className="page-content"},m(e,t){insert(e,a,t),append(m._slotted.default,r),l._mount(r,null),append(r,s),append(r,n),m._mount(a,null),append(a,c),_&&_.m(f._slotted.default,null),append(f._slotted.default,o),p&&p.m(f._slotted.default,null),append(f._slotted.default,d),f._mount(a,null)},p(t,a){var r={};t.page&&(r.page=a.page),m._set(r),a.tracker.error?_?_.p(t,a):((_=create_if_block_5(e,a)).c(),_.m(o.parentNode,o)):_&&(_.d(1),_=null),a.is_loading?p&&(p.d(1),p=null):p?p.p(t,a):((p=create_if_block(e,a)).c(),p.m(d.parentNode,d));var s={};t.is_loading&&(s.is_loading=a.is_loading),t.is_error&&(s.is_error=a.is_error),t.error_message&&(s.error_message=a.error_message),f._set(s)},d(e){e&&detachNode(a),l.destroy(),m.destroy(),_&&_.d(),p&&p.d(),f.destroy()}}}function create_if_block_5(e,t){var a,r=new Notification({root:e.root,store:e.store,slots:{default:createFragment()},data:{type:"danger"}});return{c(){a=createText(t.error_message),r._fragment.c()},m(e,t){append(r._slotted.default,a),r._mount(e,t)},p(e,t){e.error_message&&setData(a,t.error_message)},d(e){r.destroy(e)}}}function create_if_block(e,t){var a,r,s,n,c,o,d,l,i,m,_,p,u,f,h,y,g,v,k,b,N,E,x,T,w,j,O,S,M,V,C,L,I,R,D,z,F,A,P,H,K,B,$,q=!1,U=!1,X=!1,Y={},G=new Icon({root:e.root,store:e.store,data:{size:"small",icon:"eye"}});function J(){q=!0,t.data.name=h.value,e.set({data:t.data}),q=!1}for(var Q=t.Object.entries(t.data),W=[],Z=0;Z<Q.length;Z+=1)W[Z]=create_each_block_1(e,get_each0_context(t,Q,Z));var ee=t.Object.entries(t.data),te=[];for(Z=0;Z<ee.length;Z+=1)te[Z]=create_each_block(e,get_each1_context(t,ee,Z));function ae(){U=!0,e.set({selected_symptom:selectValue(j)}),U=!1}var re=t.is_reference&&create_if_block_1(e,t);function se(){X=!0,t.data[t.selected_symptom]=F.value,e.set({data:t.data,selected_symptom:t.selected_symptom,Object:t.Object}),X=!1}var ne={classes:"is-primary is-medium is-pulled-right",icon:"save",icon_size:"small",text:"Update Remedy"};void 0!==t.tracker&&(ne.tracker=t.tracker,Y.tracker=!0);var ce=new SubmitButton({root:e.root,store:e.store,data:ne,_bind(t,a){var r={};!Y.tracker&&t.tracker&&(r.tracker=a.tracker),e._set(r),Y={}}});e.root._beforecreate.push(()=>{ce._bind({tracker:1},ce.get())});var oe=new Panel({root:e.root,store:e.store,slots:{default:createFragment(),toolbar:createFragment()},data:{title:"Remedy Details",has_toolbar:!0}});function de(t){e.fire("save",t)}return{c(){a=createElement("form"),r=createElement("div"),s=createElement("div"),n=createElement("div"),c=createElement("a"),G._fragment.c(),(o=createElement("span")).textContent="View on single page",l=createText("\r\n\r\n          "),i=createElement("div"),m=createElement("div"),_=createElement("div"),p=createElement("p"),(u=createElement("label")).textContent="Name",f=createText("\r\n                  "),h=createElement("input"),y=createText("\r\n\r\n          "),(g=createElement("p")).textContent="Sections",v=createText("\r\n          "),k=createElement("div"),b=createElement("div"),N=createElement("div");for(var q=0;q<W.length;q+=1)W[q].c();E=createText("\r\n            "),x=createElement("div"),T=createElement("div"),w=createElement("span"),j=createElement("select"),(O=createElement("option")).textContent="Select Type";for(q=0;q<te.length;q+=1)te[q].c();S=createText("\r\n              \r\n              "),re&&re.c(),M=createText("\r\n              \r\n              "),V=createElement("div"),C=createElement("p"),L=createElement("label"),I=createText("Symptoms about "),R=createElement("span"),D=createText(t.selected_symptom),z=createText("\r\n                  "),F=createElement("textarea"),P=createText("\r\n              "),H=createElement("div"),K=createElement("p"),(B=createElement("label")).textContent="Â ",$=createText("\r\n                  "),ce._fragment.c(),oe._fragment.c(),c.href=d="#remedies/singleview/"+t.entityId,c.className="button is-success",n.className="control",s.className="field",setAttribute(r,"slot","toolbar"),u.className="label",addListener(h,"input",J),h.className="input is-medium",setAttribute(h,"type","text"),h.required=!0,p.className="control",_.className="field",m.className="column",i.className="columns",g.className="title is-4",N.className="buttons",b.className="column",O.__value="",O.value=O.__value,addListener(j,"change",ae),"selected_symptom"in t||e.root._beforecreate.push(ae),j.className="input",w.className="select is-fullwidth",T.className="field",setStyle(R,"text-transform","capitalize"),L.className="label",addListener(F,"input",se),F.className="textarea svelte-1hg2gij",F.placeholder=A=t.selected_symptom+"...",F.name=t.selected_symptom,F.rows="10",C.className="control",V.className="field",B.className="label",K.className="control",H.className="field",x.className="column",k.className="columns",addListener(a,"submit",de)},m(d,A){insert(d,a,A),append(oe._slotted.toolbar,r),append(r,s),append(s,n),append(n,c),G._mount(c,null),append(c,o),append(oe._slotted.default,l),append(oe._slotted.default,i),append(i,m),append(m,_),append(_,p),append(p,u),append(p,f),append(p,h),h.value=t.data.name,append(oe._slotted.default,y),append(oe._slotted.default,g),append(oe._slotted.default,v),append(oe._slotted.default,k),append(k,b),append(b,N);for(var q=0;q<W.length;q+=1)W[q].m(N,null);append(k,E),append(k,x),append(x,T),append(T,w),append(w,j),append(j,O);for(q=0;q<te.length;q+=1)te[q].m(j,null);selectOption(j,t.selected_symptom),append(x,S),re&&re.m(x,null),append(x,M),append(x,V),append(V,C),append(C,L),append(L,I),append(L,R),append(R,D),append(C,z),append(C,F),e.refs.input_field=F,F.value=t.data[t.selected_symptom],append(x,P),append(x,H),append(H,K),append(K,B),append(K,$),ce._mount(K,null),oe._mount(a,null)},p(a,r){if(t=r,a.entityId&&d!==(d="#remedies/singleview/"+t.entityId)&&(c.href=d),!q&&a.data&&(h.value=t.data.name),a.omitted_field||a.Object||a.data||a.selected_symptom){Q=t.Object.entries(t.data);for(var s=0;s<Q.length;s+=1){const r=get_each0_context(t,Q,s);W[s]?W[s].p(a,r):(W[s]=create_each_block_1(e,r),W[s].c(),W[s].m(N,null))}for(;s<W.length;s+=1)W[s].d(1);W.length=Q.length}if(a.omitted_field||a.Object||a.data){ee=t.Object.entries(t.data);for(s=0;s<ee.length;s+=1){const r=get_each1_context(t,ee,s);te[s]?te[s].p(a,r):(te[s]=create_each_block(e,r),te[s].c(),te[s].m(j,null))}for(;s<te.length;s+=1)te[s].d(1);te.length=ee.length}!U&&a.selected_symptom&&selectOption(j,t.selected_symptom),t.is_reference?re?re.p(a,t):((re=create_if_block_1(e,t)).c(),re.m(x,M)):re&&(re.d(1),re=null),a.selected_symptom&&setData(D,t.selected_symptom),X||!a.data&&!a.selected_symptom||(F.value=t.data[t.selected_symptom]),a.selected_symptom&&A!==(A=t.selected_symptom+"...")&&(F.placeholder=A),a.selected_symptom&&(F.name=t.selected_symptom);var n={};!Y.tracker&&a.tracker&&(n.tracker=t.tracker,Y.tracker=void 0!==t.tracker),ce._set(n),Y={}},d(t){t&&detachNode(a),G.destroy(),removeListener(h,"input",J),destroyEach(W,t),destroyEach(te,t),removeListener(j,"change",ae),re&&re.d(),removeListener(F,"input",se),e.refs.input_field===F&&(e.refs.input_field=null),ce.destroy(),oe.destroy(),removeListener(a,"submit",de)}}}function create_if_block_3(e,t){var a,r,s,n,c,o=t.key,d=t.data[t.key]&&create_if_block_4(e,t);return{c(){a=createElement("button"),d&&d.c(),r=createText("\r\n                    "),s=createElement("span"),n=createText(o),a._svelte={component:e,ctx:t},addListener(a,"click",click_handler),a.type="button",a.className=c="button is-"+(t.key==t.selected_symptom?"success":t.data[t.key]?"":"info")+" ",setStyle(a,"text-transform","capitalize")},m(e,t){insert(e,a,t),d&&d.m(a,null),append(a,r),append(a,s),append(s,n)},p(s,l){(t=l).data[t.key]?d||((d=create_if_block_4(e,t)).c(),d.m(a,r)):d&&(d.d(1),d=null),(s.Object||s.data)&&o!==(o=t.key)&&setData(n,o),a._svelte.ctx=t,(s.Object||s.data||s.selected_symptom)&&c!==(c="button is-"+(t.key==t.selected_symptom?"success":t.data[t.key]?"":"info")+" ")&&(a.className=c)},d(e){e&&detachNode(a),d&&d.d(),removeListener(a,"click",click_handler)}}}function create_if_block_4(e,t){var a;return{c(){(a=createElement("span")).innerHTML='<i class="fa fa-check"></i>',a.className="icon is-small"},m(e,t){insert(e,a,t)},d(e){e&&detachNode(a)}}}function create_each_block_1(e,t){var a,r=!t.omitted_field.includes(t.key)&&create_if_block_3(e,t);return{c(){r&&r.c(),a=createComment()},m(e,t){r&&r.m(e,t),insert(e,a,t)},p(t,s){s.omitted_field.includes(s.key)?r&&(r.d(1),r=null):r?r.p(t,s):((r=create_if_block_3(e,s)).c(),r.m(a.parentNode,a))},d(e){r&&r.d(e),e&&detachNode(a)}}}function create_if_block_2(e,t){var a,r,s,n=t.key;return{c(){a=createElement("option"),r=createText(n),a.__value=s=t.key,a.value=a.__value},m(e,t){insert(e,a,t),append(a,r)},p(e,t){(e.Object||e.data)&&n!==(n=t.key)&&setData(r,n),(e.Object||e.data)&&s!==(s=t.key)&&(a.__value=s),a.value=a.__value},d(e){e&&detachNode(a)}}}function create_each_block(e,t){var a,r=!t.omitted_field.includes(t.key)&&create_if_block_2(e,t);return{c(){r&&r.c(),a=createComment()},m(e,t){r&&r.m(e,t),insert(e,a,t)},p(t,s){s.omitted_field.includes(s.key)?r&&(r.d(1),r=null):r?r.p(t,s):((r=create_if_block_2(e,s)).c(),r.m(a.parentNode,a))},d(e){r&&r.d(e),e&&detachNode(a)}}}function create_if_block_1(e,t){var a,r,s,n,c,o,d={},l={data:t.book_references,placeholder:"Choose...",searchKey:"name",searchValue:"id"};void 0!==t.selected_keyed_symp&&(l._name=t.selected_keyed_symp,d._name=!0);var i=new SearchableSelect({root:e.root,store:e.store,data:l,_bind(t,a){var r={};!d._name&&t._name&&(r.selected_keyed_symp=a._name),e._set(r),d={}}});return e.root._beforecreate.push(()=>{i._bind({_name:1},i.get())}),{c(){a=createElement("div"),r=createElement("p"),s=createElement("label"),n=createText("Select "),c=createText(t.selected_symptom),o=createText("\r\n                    "),i._fragment.c(),s.className="label",setStyle(s,"text-transform","capitalize"),r.className="control",a.className="field"},m(e,t){insert(e,a,t),append(a,r),append(r,s),append(s,n),append(s,c),append(r,o),i._mount(r,null)},p(e,a){t=a,e.selected_symptom&&setData(c,t.selected_symptom);var r={};e.book_references&&(r.data=t.book_references),!d._name&&e.selected_keyed_symp&&(r._name=t.selected_keyed_symp,d._name=void 0!==t.selected_keyed_symp),i._set(r),d={}},d(e){e&&detachNode(a),i.destroy()}}}function ViewRemedy(e){init(this,e),this.refs={},this._state=assign(assign(assign({Object:Object},this.store._init(["nav"])),data()),e.data),this.store._add(this,["nav"]),this._recompute({$nav:1,selected_symptom:1},this._state),this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment(this,this._state),this.root._oncreate.push(()=>{oncreate.call(this),this.fire("update",{changed:assignTrue({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}assign(ViewRemedy.prototype,proto),assign(ViewRemedy.prototype,methods),ViewRemedy.prototype._recompute=function(e,t){e.$nav&&this._differs(t.entityId,t.entityId=entityId(t))&&(e.entityId=!0),e.selected_symptom&&this._differs(t.is_reference,t.is_reference=is_reference(t))&&(e.is_reference=!0)};export default ViewRemedy;
//# sourceMappingURL=ViewRemedy.js.map
