{"version":3,"file":"Prescriptions.js","sources":["../../../src/components/views/prescription/Prescriptions.html"],"sourcesContent":["\r\n<div class=\"page-content\">\r\n\r\n  <PageTitle page=\"{page}\"></PageTitle>\r\n\r\n  <ViewScaffold {is_loading} {is_error} {error_message}>\r\n    <DataList\r\n    {Model}\r\n    {View}\r\n    {entity_name}\r\n    {route_prefix}\r\n    {has_additional_buttons}\r\n    {search_placeholder}\r\n    bind:is_loading\r\n    bind:is_error\r\n    bind:error_message\r\n    bind:data\r\n    bind:meta\r\n    {columns}\r\n    {searchStringTransformer}\r\n    {valueTransformers}\r\n    {classTransformers}\r\n    {styleTransformers}\r\n    {requestTransformer}\r\n    {clickableRows}\r\n    on:rowClick\r\n    >\r\n    </DataList>\r\n\r\n  </ViewScaffold>\r\n\r\n</div>\r\n\r\n<script>\r\n\r\n  import Model from '../../../models/histories';\r\n  import { Icon } from '@kws3/helpers';\r\n  import Router from '../../../services/router';\r\n  \r\n  export default {\r\n    components:{\r\n      ViewScaffold: '../../helpers/ViewScaffold.html',\r\n      DataList: '../../helpers/DataList.html',\r\n      PageTitle: '../../helpers/PageTitle.html',\r\n      Icon,\r\n    },\r\n    data(){\r\n      return {\r\n        model_set: false,\r\n        is_loading: false,\r\n        is_error: false,\r\n        error_message: '',\r\n        meta:{},\r\n        data:[],\r\n        Model,\r\n        View: '_COMPONENT_',\r\n        entity_name: 'Prescriptions',\r\n        route_prefix: 'prescriptions/',\r\n        has_additional_buttons: true,\r\n        clickableRows: true,\r\n        columns:{\r\n          'id':'ID',\r\n          'name': 'Patient Name',\r\n          'modified': 'Last Visited Date',\r\n        },\r\n        search_placeholder: '',\r\n        page:{\r\n          title: 'Prescriptions',\r\n          icon: 'copy',\r\n          subtitle: 'All Prescriptions in this System'\r\n        },\r\n        searchStringTransformer: (q) => {\r\n          var qparts = q.split('~'),\r\n          query = [];\r\n\r\n          if(qparts[0] != ''){\r\n            query.push('name[lk]:'+qparts[0]);\r\n          }\r\n\r\n          qparts.shift();\r\n          for(var i = 0; i < qparts.length; i++){\r\n            var _q = qparts[i],\r\n            qpp = _q.split(':');\r\n            if(_q != '' && typeof qpp[1] != 'undefined' && qpp[1] != ''){\r\n              query.push(qpp[0] + '[eq]:' + qpp[1]);\r\n            }\r\n          }\r\n\r\n          return query.join(',');\r\n        },\r\n        valueTransformers:{\r\n          id(v, row){\r\n            return row.patient.id\r\n          },\r\n          name(v, row) {\r\n            return row.patient.name\r\n          },\r\n        },\r\n        classTransformers:{\r\n          \r\n        },\r\n        styleTransformers:{},\r\n      }\r\n    },\r\n    computed: {\r\n      requestTransformer: ({ data }) => (model, opts) => model.getAll(opts, '/case_histories/with_treatments'),\r\n   \r\n    },\r\n    oncreate(){\r\n      this.on('rowClick', ({row}) => {\r\n        Router.navigate(`prescriptions/view/${row.id}`);\r\n      });\r\n    }\r\n  }\r\n</script>"],"names":["data","model","opts","getAll","model_set","is_loading","is_error","error_message","meta","Model","View","entity_name","route_prefix","has_additional_buttons","clickableRows","columns","id","name","modified","search_placeholder","page","title","icon","subtitle","searchStringTransformer","q","qparts","split","query","push","shift","i","length","_q","qpp","join","valueTransformers","v","row","patient","classTransformers","styleTransformers","this","on","Router","navigate","requestTransformer"],"mappings":"4eAuCA,6BAkE2BA,KAAEA,UAAW,CAACC,EAAOC,IAASD,EAAME,OAAOD,EAAM,mDA1DtE,MAAO,CACLE,WAAW,EACXC,YAAY,EACZC,UAAU,EACVC,cAAe,GACfC,KAAK,GACLR,KAAK,GACLS,MAAAA,MACAC,KAAM,gBACNC,YAAa,gBACbC,aAAc,iBACdC,wBAAwB,EACxBC,eAAe,EACfC,QAAQ,CACNC,GAAK,KACLC,KAAQ,eACRC,SAAY,qBAEdC,mBAAoB,GACpBC,KAAK,CACHC,MAAO,gBACPC,KAAM,OACNC,SAAU,oCAEZC,wBAA0BC,IACxB,IAAIC,EAASD,EAAEE,MAAM,KACrBC,EAAQ,GAEQ,IAAbF,EAAO,IACRE,EAAMC,KAAK,YAAYH,EAAO,IAGhCA,EAAOI,QACP,IAAI,IAAIC,EAAI,EAAGA,EAAIL,EAAOM,OAAQD,IAAI,CACpC,IAAIE,EAAKP,EAAOK,GAChBG,EAAMD,EAAGN,MAAM,KACN,IAANM,QAA6B,IAAVC,EAAI,IAA+B,IAAVA,EAAI,IACjDN,EAAMC,KAAKK,EAAI,GAAK,QAAUA,EAAI,IAItC,OAAON,EAAMO,KAAK,MAEpBC,kBAAkB,CAChBpB,GAAE,CAACqB,EAAGC,IACGA,EAAIC,QAAQvB,GAErBC,KAAI,CAACoB,EAAGC,IACCA,EAAIC,QAAQtB,MAGvBuB,kBAAkB,GAGlBC,kBAAkB,wBAQpBC,KAAKC,GAAG,WAAY,EAAEL,IAAAA,MACpBM,OAAOC,+BAA+BP,EAAItB,kEA3G9BI,qEAIfX,aACAC,mBACAC,2BACAC,sCACAC,4CACAM,6BAMAJ,kCACAS,4CACAY,sCACAI,sCACAC,uCACAK,mCACAhC,0BAXIT,4BAAAA,uCACAC,wBAAAA,mCACAC,kCAAAA,6CACAP,gBAAAA,2BACAQ,gBAAAA,8iBAZQH,sBAAaC,yBAAWC,4XAFrBa,6CAIfX,yBACAC,sCACAC,+CACAC,oEACAC,sEACAM,4CAMAJ,iEACAS,qEACAY,+DACAI,+DACAC,iEACAK,wDACAhC,4DAXIT,mCAAAA,mDACAC,+BAAAA,gEACAC,yCAAAA,0CACAP,uBAAAA,iCACAQ,uBAAAA,4DAZQH,sCAAaC,8CAAWC"}