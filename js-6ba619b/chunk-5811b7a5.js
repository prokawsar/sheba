var K_ENV="prod",K_ENV_DEV="dev",K_ENV_TEST="test",K_ENV_PROD="prod";import{M as commonjsGlobal,N as createCommonjsModule}from"./chunk-4772d5c0.js";var grapnel=createCommonjsModule(function(t,e){(function(e){function o(t){var o=this;return this.events={},this.state=null,this.options=t||{},this.options.env=this.options.env||(0===Object.keys(e).length&&process&&!0!==process.browser?"server":"client"),this.options.mode=this.options.mode||("server"!==this.options.env&&this.options.pushState&&e.history&&e.history.pushState?"pushState":"hashchange"),this.version="0.6.4","function"==typeof e.addEventListener&&(e.addEventListener("hashchange",function(){o.trigger("hashchange")}),e.addEventListener("popstate",function(t){if(o.state&&null===o.state.previousState)return!1;o.trigger("navigate")})),this}function r(t,e){for(var o in this.stack=r.global.slice(0),this.router=t,this.runCallback=!0,this.callbackRan=!1,this.propagateEvent=!0,this.value=t.path(),e)this[o]=e[o];return this}function n(t){this.route=t,this.keys=[],this.regex=o.regexRoute(t,this.keys)}o.regexRoute=function(t,e,o,r){return t instanceof RegExp?t:(t instanceof Array&&(t="("+t.join("|")+")"),t=t.concat(r?"":"/?").replace(/\/\(/g,"(?:/").replace(/\+/g,"__plus__").replace(/(\/)?(\.)?:(\w+)(?:(\(.*?\)))?(\?)?/g,function(t,o,r,n,i,s){return e.push({name:n,optional:!!s}),o=o||"",(s?"":o)+"(?:"+(s?o:"")+(r||"")+(i||(r?"([^/.]+?)":"([^/]+?)"))+")"+(s||"")}).replace(/([\/.])/g,"\\$1").replace(/__plus__/g,"(.+)").replace(/\*/g,"(.*)"),new RegExp("^"+t+"$",o?"":"i"))},o._forEach=function(t,e){return"function"==typeof Array.prototype.forEach?Array.prototype.forEach.call(t,e):function(t,e){for(var o=0,r=this.length;o<r;++o)t.call(e,this[o],o,this)}.call(t,e)},o.prototype.get=o.prototype.add=function(t){var e=this,o=Array.prototype.slice.call(arguments,1,-1),i=Array.prototype.slice.call(arguments,-1)[0],s=new n(t),a=function(){var n=s.parse(e.path());if(n.match){var a={route:t,params:n.params,req:n,regex:n.match},c=new r(e,a).enqueue(o.concat(i));if(e.trigger("match",c,n),!c.runCallback)return e;if(c.previousState=e.state,e.state=c,c.parent()&&!1===c.parent().propagateEvent)return c.propagateEvent=!1,e;c.callback()}return e},c="pushState"!==e.options.mode&&"server"!==e.options.env?"hashchange":"navigate";return a().on(c,a)},o.prototype.trigger=function(t){var e=this,r=Array.prototype.slice.call(arguments,1);return this.events[t]&&o._forEach(this.events[t],function(t){t.apply(e,r)}),this},o.prototype.on=o.prototype.bind=function(t,e){var r=this,n=t.split(" ");return o._forEach(n,function(t){r.events[t]?r.events[t].push(e):r.events[t]=[e]}),this},o.prototype.once=function(t,e){var o=!1;return this.on(t,function(){return!o&&(o=!0,e.apply(this,arguments),e=null,!0)})},o.prototype.context=function(t){var e=this,o=Array.prototype.slice.call(arguments,1);return function(){var r=arguments[0],n=arguments.length>2?Array.prototype.slice.call(arguments,1,-1):[],i=Array.prototype.slice.call(arguments,-1)[0],s=("/"!==t.slice(-1)&&"/"!==r&&""!==r?t+"/":t)+("/"!==r.substr(0,1)?r:r.substr(1));return e.add.apply(e,[s].concat(o).concat(n).concat([i]))}},o.prototype.navigate=function(t){return this.path(t).trigger("navigate")},o.prototype.path=function(t){var o;return"string"==typeof t?("pushState"===this.options.mode?(o=this.options.root?this.options.root+t:t,e.history.pushState({},null,o)):e.location?e.location.hash=(this.options.hashBang?"!":"")+t:e._pathname=t||"",this):void 0===t?o="pushState"===this.options.mode?e.location.pathname.replace(this.options.root,""):"pushState"!==this.options.mode&&e.location?e.location.hash?e.location.hash.split(this.options.hashBang?"#!":"#")[1]:"":e._pathname||"":!1===t?("pushState"===this.options.mode?e.history.pushState({},null,this.options.root||"/"):e.location&&(e.location.hash=this.options.hashBang?"!":""),this):void 0},o.listen=function(){var t,e;return arguments[0]&&arguments[1]?(t=arguments[0],e=arguments[1]):e=arguments[0],function(){for(var t in e)this.add.call(this,t,e[t]);return this}.call(new o(t||{}))},r.global=[],r.prototype.preventDefault=function(){this.runCallback=!1},r.prototype.stopPropagation=function(){this.propagateEvent=!1},r.prototype.parent=function(){return!!!(!this.previousState||!this.previousState.value||this.previousState.value!=this.value)&&this.previousState},r.prototype.callback=function(){this.callbackRan=!0,this.timeStamp=Date.now(),this.next()},r.prototype.enqueue=function(t,e){for(var o=Array.isArray(t)?e<t.length?t.reverse():t:[t];o.length;)this.stack.splice(e||this.stack.length+1,0,o.shift());return this},r.prototype.next=function(){var t=this;return this.stack.shift().call(this.router,this.req,this,function(){t.next.call(t)})},n.prototype.parse=function(t){var e=t.match(this.regex),r=this,n={params:{},keys:this.keys,matches:(e||[]).slice(1),match:e};return o._forEach(n.matches,function(t,e){var o=r.keys[e]&&r.keys[e].name?r.keys[e].name:e;n.params[o]=t?decodeURIComponent(t):void 0}),n},o.CallStack=r,o.Request=n,"function"!=typeof e.define||e.define.amd.grapnel?t.exports=o:e.define(function(t,r,n){return e.define.amd.grapnel=!0,o})}).call({},"object"==typeof window?window:commonjsGlobal)}),Access=function(){var t={CONTEXT_ADMIN:"SA",CONTEXT_USER:"SU"},e=[t.CONTEXT_ADMIN,t.CONTEXT_USER],o={Dashboard:{icon:"dashboard",url:""},Users:{icon:"vcard-o",url:"users"},Profile:{visible:!1},Settings:{icon:"cogs",url:"settings"},Remedies:{icon:"medkit",url:"remedies"},Patients:{icon:"users",url:"patients"},Search:{icon:"search",url:"search"},History:{icon:"th",url:"history"},Prescriptions:{icon:"copy",url:"prescriptions"}},r={},n={};for(var i in r[t.CONTEXT_ADMIN]=["Dashboard","Profile","Remedies","Patients","History","Search","Prescriptions","Users","Settings"],r[t.CONTEXT_USER]=["Dashboard","Profile","Remedies","Patients","History","Search","Prescriptions","Users","Settings"],r){n[i]={};for(var s=0;s<r[i].length;s++)n[i][r[i][s]]=o[r[i][s]]}this.isAllowed=function(t){return-1!==e.indexOf(t)},this.sectionAllowed=function(t,e){var{role:o}=e;return void 0!==n[o]&&void 0!==n[o][t]},this.mainSections=function(t){return n[t]||{}},this.roles=t},Access$1=new Access,Grapnel=grapnel||window.Grapnel,_router=new Grapnel,Router=function(){var t=this,e=null,o={},r=null;t.router=_router,t.init=function(n,i,a){e=n,o=i,r=a||"home",function(){var n=[],i=0;for(var a in o){for(var c in n[i]=t.router.context(a),o[a]){var p=o[a][c].pattern,h=o[a][c].view,u=void 0!==o[a][c].type?o[a][c].type:"",l=n[i],f=void 0!==o[a][c].childOf?o[a][c].childOf:null;"regex"==u&&(p=new RegExp("^"+a+p,"i"),l=t.router.get),s(l,p,h,f)}i++}t.router.get("*",function(o,n){""!=o.match[0]?n.parent()||e.fire("routeChange",{view:"404",params:{}}):t.router.navigate(r)})}()},t.goHome=function(){t.router.navigate("")},t.navigate=function(e){t.router.navigate(e)};var n=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},i={accessCheck:function(t,o,r){var i=t.match[0].split("/")[0],s=n(i);Access$1.sectionAllowed(s,e.store.get().user)?r():(e.fire("routeChange",{view:"404",params:{}}),o.stopPropagation())}};function s(o,r,s,a){o.call(t.router,r,i.accessCheck,function(t,o){var r=t.match[0].split("/")[0],i=n(a||r);e.fire("routeChange",{view:s,section:i,params:t.params}),o.stopPropagation()})}},Router$1=new Router;export{Router$1 as a,Access$1 as b};
//# sourceMappingURL=chunk-5811b7a5.js.map
