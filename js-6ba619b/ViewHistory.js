var K_ENV="prod",K_ENV_DEV="dev",K_ENV_TEST="test",K_ENV_PROD="prod";import{a as append,b as assign,c as assignTrue,u as createComment,d as createElement,e as createFragment,f as createText,v as destroyEach,g as detachNode,h as flush,i as init,j as insert,l as proto,m as removeFromStore,C as setAttribute,w as setData,n as Icon,y as Notification,x as Panel,o as Message,q as ViewScaffold,r as PageTitle,A as addListener,B as removeListener,Y as selectOption,Z as selectValue,D as setStyle}from"./chunk-4772d5c0.js";import{a as Router}from"./chunk-5811b7a5.js";import{a as SubmitButton,c as ConfirmButton}from"./chunk-2d6b7b97.js";import{a as SearchableSelect}from"./chunk-97880b15.js";import{a as Remedies}from"./chunk-53cc462b.js";import{a as Model}from"./chunk-8e97f036.js";import{a as RemedyFound,b as SlidingPaneSet,c as SlidingPane}from"./chunk-48db85c0.js";import{a as Sections,b as _search,c as LabsTabs}from"./chunk-388d4535.js";import{a as PatientDetails}from"./chunk-59506d55.js";import"./chunk-d6fc968d.js";function entityId({$nav:e}){return e&&e.params[0]}function filterFields({remedies:e,omitted_field:t}){let a=["built","constitution","diathesis","miasm","temperament","temperature_and_weather","thermal_sensitivity","sensation","tendency_take_cold","desires","aversions","birth_history_milestones","tissues","stages_and_states","attacks_and_side","ailments_from","affections","clinical","modalities","mental_state_and_disorders","appearance_and_behavior","attention_and_concentration","expression","consciousness","mood_and_affect","memory","speech","thoughts_and_ideas","perception","intelligence","judgment","fear_and_live_alone","boring","peaceful","anger","hobby","habit","addiction","nutrition","anaemia","cyanosis","dehydration","jaundice","pulse","breathing","peculiar_rare_symptoms"],r=[];if(e.length){for(let[s,o]of Object.entries(e[0]))a.includes(s)||t.includes(s)||r.push(s);return r.push(...a),r}}function loadSymptoms({remedies:e}){let t=[];for(let a in e){Object.entries(e[a]).forEach(([e,a])=>{t[e]=[]});break}for(let a in e){let r=e[a];Object.entries(r).forEach(([e,a])=>{a&&"string"==typeof a&&t[e].push(a.split(","))})}return t}function data(){return{is_loading:!1,is_error:!1,error_message:"",selected_symptom:"",selected_symp:"",selected_keyed_symp:"",result_symptoms:"",remedies:{},data:{},meta:{},remedy_found:{},omitted_field:["id","name","created","modified","deleted","patient","treatments"],tracker:{saving:!1,saved:!1,error:!1},page:{title:"View Case History",subtitle:"Case History details",icon:"building-o",icon_badge:"pencil"}}}var methods={load(){var{entityId:e}=this.get();this.set({is_loading:!0,is_error:!1}),Model&&Model.getOne(e).then(e=>{console.log(e),this.set({is_loading:!1,meta:e._meta,data:e.response})}).catch(e=>{var t="";void 0!==e&&void 0!==e.response&&void 0!==e.response.records&&(t=e.response.records.userMessage),this.set({is_error:!0,is_loading:!1,error_message:t})})},loadRemedies(){Remedies.getAll({limit:1e3}).then(e=>{this.set({remedies:e.response})}).catch(e=>{console.log(e)})},deleteHistory(e){e&&e.doing(),Model.delete(this.get().entityId).then(t=>{e.done(),Router.navigate("history")}).catch(()=>{e.error()})},save(){var{data:e,entityId:t,tracker:a}=this.get();this.set({tracker:{saving:!0,saved:!1,error:!1}}),Model.save(t,e).then(e=>{this.set({data:e.response,tracker:{saving:!1,saved:!0,error:!1}}),setTimeout(()=>{a.saved=!1,this.set({tracker:a})},1500)}).catch(e=>{console.log(e),this.set({error_message:"There was an error updating premise"}),this.set({tracker:{saving:!1,saved:!1,error:!0}}),setTimeout(()=>{this.set({tracker:{error:!1}})},1500)})}};function oncreate(){var{entityId:e}=this.get();this.load()}function get_each_context(e,t,a){const r=Object.create(e);return r.key=t[a][0],r.value=t[a][1],r.i=a,r}function create_main_fragment(e,t){var a,r,s,o,i,n,d,c,l=new ConfirmButton({root:e.root,store:e.store,data:{text:"Delete History",color:"danger",icon:"trash",icon_only:!1}});l.on("do",function(t){e.deleteHistory(t)});for(var _=t.data.patient&&create_if_block_1(e,t),m=t.Object.entries(t.data),p=[],u=0;u<m.length;u+=1)p[u]=create_each_block(e,get_each_context(t,m,u));var h=new Message({root:e.root,store:e.store,slots:{default:createFragment()},data:{title:"Records",color:"info"}}),f=new Panel({root:e.root,store:e.store,slots:{default:createFragment(),toolbar:createFragment()},data:{title:"Patient symptoms",has_toolbar:!0}}),g={is_loading:t.is_loading,is_error:t.is_error,error_message:t.error_message},v=new ViewScaffold({root:e.root,store:e.store,slots:{default:createFragment()},data:g});return{c(){a=createElement("div"),r=createElement("div"),l._fragment.c(),s=createText("\r\n\r\n    "),o=createElement("div"),i=createElement("div"),_&&_.c(),n=createText("\r\n      "),d=createElement("div");for(var e=0;e<p.length;e+=1)p[e].c();c=createComment(),h._fragment.c(),f._fragment.c(),v._fragment.c(),setAttribute(r,"slot","toolbar"),i.className="column is-5",d.className="column is-7",o.className="columns",a.className="page-content"},m(e,t){insert(e,a,t),append(f._slotted.toolbar,r),l._mount(r,null),append(f._slotted.default,s),append(f._slotted.default,o),append(o,i),_&&_.m(i,null),append(o,n),append(o,d);for(var m=0;m<p.length;m+=1)p[m].m(h._slotted.default,null);append(h._slotted.default,c),h._mount(d,null),f._mount(v._slotted.default,null),v._mount(a,null)},p(t,a){if(a.data.patient?_?_.p(t,a):((_=create_if_block_1(e,a)).c(),_.m(i,null)):_&&(_.d(1),_=null),t.Object||t.data||t.omitted_field){m=a.Object.entries(a.data);for(var r=0;r<m.length;r+=1){const s=get_each_context(a,m,r);p[r]?p[r].p(t,s):(p[r]=create_each_block(e,s),p[r].c(),p[r].m(c.parentNode,c))}for(;r<p.length;r+=1)p[r].d(1);p.length=m.length}var s={};t.is_loading&&(s.is_loading=a.is_loading),t.is_error&&(s.is_error=a.is_error),t.error_message&&(s.error_message=a.error_message),v._set(s)},d(e){e&&detachNode(a),l.destroy(),_&&_.d(),destroyEach(p,e),h.destroy(),f.destroy(),v.destroy()}}}function create_if_block_1(e,t){var a,r,s={data:t.data.patient},o=new PatientDetails({root:e.root,store:e.store,data:s}),i=new Message({root:e.root,store:e.store,slots:{default:createFragment()},data:{title:"Records",color:"info"}});return{c(){(a=createElement("p")).textContent="Patient Details",r=createText("\r\n\r\n            "),o._fragment.c(),i._fragment.c(),a.className="title is-5"},m(e,t){append(i._slotted.default,a),append(i._slotted.default,r),o._mount(i._slotted.default,null),i._mount(e,t)},p(e,t){var a={};e.data&&(a.data=t.data.patient),o._set(a)},d(e){o.destroy(),i.destroy(e)}}}function create_if_block(e,t){var a,r,s,o,i,n,d,c=t.key,l=t.value;return{c(){a=createElement("p"),r=createElement("span"),s=createText(c),o=createText(": "),i=createText(l),n=createText(" "),d=createElement("br"),r.className="has-text-weight-bold is-size-4",a.className="is-size-5"},m(e,t){insert(e,a,t),append(a,r),append(r,s),append(a,o),append(a,i),insert(e,n,t),insert(e,d,t)},p(e,t){(e.Object||e.data)&&c!==(c=t.key)&&setData(s,c),(e.Object||e.data)&&l!==(l=t.value)&&setData(i,l)},d(e){e&&(detachNode(a),detachNode(n),detachNode(d))}}}function create_each_block(e,t){var a,r=t.value&&!t.omitted_field.includes(t.key)&&create_if_block(e,t);return{c(){r&&r.c(),a=createComment()},m(e,t){r&&r.m(e,t),insert(e,a,t)},p(t,s){s.value&&!s.omitted_field.includes(s.key)?r?r.p(t,s):((r=create_if_block(e,s)).c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},d(e){r&&r.d(e),e&&detachNode(a)}}}function ViewHistoryStatic(e){init(this,e),this._state=assign(assign(assign({Object:Object},this.store._init(["nav"])),data()),e.data),this.store._add(this,["nav"]),this._recompute({$nav:1,remedies:1,omitted_field:1},this._state),this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment(this,this._state),this.root._oncreate.push(()=>{oncreate.call(this),this.fire("update",{changed:assignTrue({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}function entityId$1({$nav:e}){return e&&e.params[0]}function has_searched({remedy_found:e}){return Object.keys(e).length}function filterFields$1({remedies:e,omitted_field:t}){let a=["built","constitution","diathesis","miasm","temperament","temperature_and_weather","thermal_sensitivity","sensation","tendency_take_cold","desires","aversions","birth_history_milestones","tissues","stages_and_states","attacks_and_side","ailments_from","affections","clinical","modalities","mental_state_and_disorders","appearance_and_behavior","attention_and_concentration","expression","consciousness","mood_and_affect","memory","speech","thoughts_and_ideas","perception","intelligence","judgment","fear_and_live_alone","boring","peaceful","anger","hobby","habit","addiction","nutrition","anaemia","cyanosis","dehydration","jaundice","pulse","breathing","peculiar_rare_symptoms"],r=[];if(e.length){for(let[s,o]of Object.entries(e[0]))a.includes(s)||t.includes(s)||r.push(s);return r.push(...a),r}}function loadSymptoms$1({remedies:e}){let t=[];for(let a in e){Object.entries(e[a]).forEach(([e,a])=>{t[e]=[]});break}for(let a in e){let r=e[a];Object.entries(r).forEach(([e,a])=>{a&&"string"==typeof a&&t[e].push(a.split(","))})}return t}function searchable_withkey({loadSymptoms:e}){let t=[],a=0;return Object.entries(e).forEach(([r,s])=>{let o=e[r];t[r]=[];for(let e in o)if(Array.isArray(o[e]))for(let s in o[e])t[r].push({id:a++,name:o[e][s]})}),t}function searchable_symp({loadSymptoms:e,omitted_field:t}){let a=[],r=0;for(let s in e)if(!t.includes(s)){let t=e[s];for(let e in t)if(Array.isArray(t[e]))for(let o in t[e]){let i=t[e][o]+" -> "+s;a.push({id:r++,name:i.trim()})}}return a}function data$1(){return{is_loading:!1,is_error:!1,error_message:"",selected_section:"",selected_all_symp:"",selected_keyed_symp:"",result_symptoms:"",remedies:{},data:{},meta:{},remedy_found:{},omitted_field:["id","name","created","modified","deleted","patient","treatments"],tracker:{saving:!1,saved:!1,error:!1},page:{title:"View Case History",subtitle:"Case History details",icon:"building-o",icon_badge:"pencil"}}}assign(ViewHistoryStatic.prototype,proto),assign(ViewHistoryStatic.prototype,methods),ViewHistoryStatic.prototype._recompute=function(e,t){e.$nav&&this._differs(t.entityId,t.entityId=entityId(t))&&(e.entityId=!0),(e.remedies||e.omitted_field)&&this._differs(t.filterFields,t.filterFields=filterFields(t))&&(e.filterFields=!0),e.remedies&&this._differs(t.loadSymptoms,t.loadSymptoms=loadSymptoms(t))&&(e.loadSymptoms=!0)};var methods$1={load(){var{entityId:e}=this.get();this.set({is_loading:!0,is_error:!1}),Model&&Model.getOne(e).then(e=>{this.set({is_loading:!1,meta:e._meta,data:e.response})}).catch(e=>{var t="";void 0!==e&&void 0!==e.response&&void 0!==e.response.records&&(t=e.response.records.userMessage),this.set({is_error:!0,is_loading:!1,error_message:t})})},loadRemedies(){Remedies.getAll({limit:1e3}).then(e=>{this.set({remedies:e.response})}).catch(e=>{console.log(e)})},save(){var{data:e,entityId:t,tracker:a}=this.get();this.set({tracker:{saving:!0,saved:!1,error:!1}}),Model.save(t,e).then(e=>{this.set({data:e.response,tracker:{saving:!1,saved:!0,error:!1}}),setTimeout(()=>{a.saved=!1,this.set({tracker:a})},1500)}).catch(e=>{console.log(e),this.set({error_message:"There was an error updating history"}),this.set({tracker:{saving:!1,saved:!1,error:!0}}),setTimeout(()=>{this.set({tracker:{error:!1}})},1500)})},back(){this.set({remedy_found:{}}),this.set({result_symptoms:{}})},search(e){e.preventDefault();var{data:t,valid:a,remedies:r}=this.get();let s={};this.set({tracker:{saving:!0,saved:!1,error:!1}}),s=_search(t,r),this.set({remedy_found:s}),setTimeout(()=>{this.set({tracker:{saved:!1}})},1e3)}};function oncreate$1(){var{entityId:e}=this.get();this.on("state",({changed:e,current:t,previous:a})=>{let{data:r,selected_section:s,selected_all_symp:o}=this.get();if(t.selected_keyed_symp!=a.selected_keyed_symp&&(r[s]=r[s]?r[s]+", "+t.selected_keyed_symp:t.selected_keyed_symp,this.set({data:r}),console.log(r)),t.selected_all_symp!=a.selected_all_symp){let e=o.split(" -> "),t=e[1],a=e[0];r[t]=r[t]?r[t]+", "+a:a,this.set({data:r,selected_section:t,selected_keyed_symp:a})}if(e.$nav){var{$nav:i}=t;"ViewHistoryEdit"==i.activeView&&this.load()}}),this.load(),this.loadRemedies()}function get_each1_context(e,t,a){const r=Object.create(e);return r.key=t[a][0],r.value=t[a][1],r.i=a,r}function get_each0_context(e,t,a){const r=Object.create(e);return r.key=t[a][0],r.value=t[a][1],r.i=a,r}function create_main_fragment$1(e,t){var a,r,s,o,i,n=t.tracker.error&&create_if_block_5(e,t),d=!t.has_searched&&create_if_block_2(e,t),c=t.has_searched&&create_if_block_1$1(e,t),l=!t.has_searched&&create_if_block$1(e,t),_={is_loading:t.is_loading,is_error:t.is_error,error_message:t.error_message},m=new ViewScaffold({root:e.root,store:e.store,slots:{default:createFragment()},data:_});return{c(){a=createElement("div"),n&&n.c(),r=createText("\r\n\r\n  "),d&&d.c(),s=createText("\r\n\r\n  "),c&&c.c(),o=createText("\r\n\r\n  "),l&&l.c(),i=createComment(),m._fragment.c(),a.className="page-content"},m(e,t){insert(e,a,t),n&&n.m(m._slotted.default,null),append(m._slotted.default,r),d&&d.m(m._slotted.default,null),append(m._slotted.default,s),c&&c.m(m._slotted.default,null),append(m._slotted.default,o),l&&l.m(m._slotted.default,null),append(m._slotted.default,i),m._mount(a,null)},p(t,a){a.tracker.error?n?n.p(t,a):((n=create_if_block_5(e,a)).c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null),a.has_searched?d&&(d.d(1),d=null):d?d.p(t,a):((d=create_if_block_2(e,a)).c(),d.m(s.parentNode,s)),a.has_searched?c?c.p(t,a):((c=create_if_block_1$1(e,a)).c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null),a.has_searched?l&&(l.d(1),l=null):l?l.p(t,a):((l=create_if_block$1(e,a)).c(),l.m(i.parentNode,i));var _={};t.is_loading&&(_.is_loading=a.is_loading),t.is_error&&(_.is_error=a.is_error),t.error_message&&(_.error_message=a.error_message),m._set(_)},d(e){e&&detachNode(a),n&&n.d(),d&&d.d(),c&&c.d(),l&&l.d(),m.destroy()}}}function create_if_block_5(e,t){var a,r=new Notification({root:e.root,store:e.store,slots:{default:createFragment()},data:{type:"danger"}});return{c(){a=createText(t.error_message),r._fragment.c()},m(e,t){append(r._slotted.default,a),r._mount(e,t)},p(e,t){e.error_message&&setData(a,t.error_message)},d(e){r.destroy(e)}}}function create_if_block_2(e,t){for(var a,r,s,o,i,n,d,c,l,_,m,p,u,h,f,g,v,y,b,k,N,w,E,x,S,T,$,j,F,O,V,H,C,I,D,M,R,L,P,A,z,B,K,q,Y,Z=!1,G=!1,J={},Q={},U={},W=t.Object.entries(t.data),X=[],ee=0;ee<W.length;ee+=1)X[ee]=create_each_block_1(e,get_each0_context(t,W,ee));var te=new Message({root:e.root,store:e.store,slots:{default:createFragment()},data:{title:"Records",color:"light"}}),ae=t.Object.entries(t.data),re=[];for(ee=0;ee<ae.length;ee+=1)re[ee]=create_each_block$1(e,get_each1_context(t,ae,ee));function se(){Z=!0,e.set({selected_section:selectValue(l)}),Z=!1}function oe(){G=!0,t.data[t.selected_section]=v.value,e.set({data:t.data,selected_section:t.selected_section,Object:t.Object}),G=!1}var ie={data:t.searchable_withkey[t.selected_section],placeholder:"Choose...",searchKey:"name",searchValue:"id"};void 0!==t.selected_keyed_symp&&(ie._name=t.selected_keyed_symp,J._name=!0);var ne=new SearchableSelect({root:e.root,store:e.store,data:ie,_bind(t,a){var r={};!J._name&&t._name&&(r.selected_keyed_symp=a._name),e._set(r),J={}}});e.root._beforecreate.push(()=>{ne._bind({_name:1},ne.get())});var de={data:t.searchable_symp,placeholder:"Choose...",searchKey:"name",searchValue:"id"};void 0!==t.selected_all_symp&&(de._name=t.selected_all_symp,Q._name=!0);var ce=new SearchableSelect({root:e.root,store:e.store,data:de,_bind(t,a){var r={};!Q._name&&t._name&&(r.selected_all_symp=a._name),e._set(r),Q={}}});function le(t){e.save()}e.root._beforecreate.push(()=>{ce._bind({_name:1},ce.get())});var _e={classes:"is-primary is-medium is-pulled-right",icon:"search",icon_size:"small",text:"Search"};void 0!==t.disabled&&(_e.disabled=t.disabled,U.disabled=!0),void 0!==t.tracker&&(_e.tracker=t.tracker,U.tracker=!0);var me=new SubmitButton({root:e.root,store:e.store,data:_e,_bind(t,a){var r={};!U.disabled&&t.disabled&&(r.disabled=a.disabled),!U.tracker&&t.tracker&&(r.tracker=a.tracker),e._set(r),U={}}});e.root._beforecreate.push(()=>{me._bind({disabled:1,tracker:1},me.get())});var pe=new Panel({root:e.root,store:e.store,slots:{default:createFragment()},data:{title:"Patient Symptoms",has_toolbar:!0}});function ue(t){e.search(t)}return{c(){a=createElement("form"),r=createElement("div"),s=createElement("div");for(var Z=0;Z<X.length;Z+=1)X[Z].c();o=createComment(),te._fragment.c(),i=createText("\r\n\r\n          "),n=createElement("div"),d=createElement("div"),c=createElement("span"),l=createElement("select"),(_=createElement("option")).textContent="Select Type";for(Z=0;Z<re.length;Z+=1)re[Z].c();m=createText("\r\n\r\n            "),p=createElement("div"),u=createElement("p"),h=createElement("label"),f=createText(t.selected_section),g=createText("\r\n                "),v=createElement("textarea"),b=createText("\r\n          "),k=createElement("div"),(N=createElement("p")).textContent="Suggestions",w=createText("\r\n\r\n            "),E=createElement("div"),x=createElement("p"),S=createElement("label"),T=createText(t.selected_section),$=createText(" Symptoms in the System"),j=createText("\r\n                  "),ne._fragment.c(),F=createText("\r\n\r\n            "),O=createElement("div"),V=createElement("p"),(H=createElement("label")).textContent="All Symptoms in the System",C=createText("\r\n                  "),ce._fragment.c(),I=createText("\r\n            "),D=createElement("div"),M=createElement("p"),(R=createElement("label")).textContent=" ",L=createText("\r\n                "),(P=createElement("button")).innerHTML='<span class="icon"><i class="fa fa-save"></i></span>\n\t\t\t                  <span>Save only</span>',A=createText("\r\n\r\n              "),z=createElement("p"),(B=createElement("label")).textContent=" ",K=createText("\r\n                "),me._fragment.c(),pe._fragment.c(),q=createText("\r\n      "),Y=createElement("br"),s.className="column",_.__value="",_.value=_.__value,addListener(l,"change",se),"selected_section"in t||e.root._beforecreate.push(se),l.className="input",c.className="select is-fullwidth",d.className="field",h.className="label",setStyle(h,"text-transform","capitalize"),addListener(v,"input",oe),v.className="textarea",v.placeholder=y=t.selected_section+"...",setStyle(v,"height","15rem"),u.className="control",p.className="field",n.className="column",N.className="title is-5",S.className="label",setStyle(S,"text-transform","capitalize"),x.className="control",E.className="field",H.className="label",setStyle(H,"text-transform","capitalize"),V.className="control",O.className="field",R.className="label",addListener(P,"click",le),P.type="button",P.className="button is-primary is-medium",M.className="control",B.className="label",z.className="control",D.className="field is-grouped is-pulled-right",k.className="column",r.className="columns",addListener(a,"submit",ue)},m(e,y){insert(e,a,y),append(pe._slotted.default,r),append(r,s);for(var Z=0;Z<X.length;Z+=1)X[Z].m(te._slotted.default,null);append(te._slotted.default,o),te._mount(s,null),append(r,i),append(r,n),append(n,d),append(d,c),append(c,l),append(l,_);for(Z=0;Z<re.length;Z+=1)re[Z].m(l,null);selectOption(l,t.selected_section),append(n,m),append(n,p),append(p,u),append(u,h),append(h,f),append(u,g),append(u,v),v.value=t.data[t.selected_section],append(r,b),append(r,k),append(k,N),append(k,w),append(k,E),append(E,x),append(x,S),append(S,T),append(S,$),append(x,j),ne._mount(x,null),append(k,F),append(k,O),append(O,V),append(V,H),append(V,C),ce._mount(V,null),append(k,I),append(k,D),append(D,M),append(M,R),append(M,L),append(M,P),append(D,A),append(D,z),append(z,B),append(z,K),me._mount(z,null),pe._mount(a,null),insert(e,q,y),insert(e,Y,y)},p(a,r){if(t=r,a.Object||a.data||a.omitted_field){W=t.Object.entries(t.data);for(var s=0;s<W.length;s+=1){const r=get_each0_context(t,W,s);X[s]?X[s].p(a,r):(X[s]=create_each_block_1(e,r),X[s].c(),X[s].m(o.parentNode,o))}for(;s<X.length;s+=1)X[s].d(1);X.length=W.length}if(a.omitted_field||a.Object||a.data){ae=t.Object.entries(t.data);for(s=0;s<ae.length;s+=1){const r=get_each1_context(t,ae,s);re[s]?re[s].p(a,r):(re[s]=create_each_block$1(e,r),re[s].c(),re[s].m(l,null))}for(;s<re.length;s+=1)re[s].d(1);re.length=ae.length}!Z&&a.selected_section&&selectOption(l,t.selected_section),a.selected_section&&setData(f,t.selected_section),G||!a.data&&!a.selected_section||(v.value=t.data[t.selected_section]),a.selected_section&&y!==(y=t.selected_section+"...")&&(v.placeholder=y),a.selected_section&&setData(T,t.selected_section);var i={};(a.searchable_withkey||a.selected_section)&&(i.data=t.searchable_withkey[t.selected_section]),!J._name&&a.selected_keyed_symp&&(i._name=t.selected_keyed_symp,J._name=void 0!==t.selected_keyed_symp),ne._set(i),J={};var n={};a.searchable_symp&&(n.data=t.searchable_symp),!Q._name&&a.selected_all_symp&&(n._name=t.selected_all_symp,Q._name=void 0!==t.selected_all_symp),ce._set(n),Q={};var d={};!U.disabled&&a.disabled&&(d.disabled=t.disabled,U.disabled=void 0!==t.disabled),!U.tracker&&a.tracker&&(d.tracker=t.tracker,U.tracker=void 0!==t.tracker),me._set(d),U={}},d(e){e&&detachNode(a),destroyEach(X,e),te.destroy(),destroyEach(re,e),removeListener(l,"change",se),removeListener(v,"input",oe),ne.destroy(),ce.destroy(),removeListener(P,"click",le),me.destroy(),pe.destroy(),removeListener(a,"submit",ue),e&&(detachNode(q),detachNode(Y))}}}function create_if_block_4(e,t){var a,r,s,o,i,n,d,c=t.key,l=t.value;return{c(){a=createElement("p"),r=createElement("span"),s=createText(c),o=createText(": "),i=createText(l),n=createText(" "),d=createElement("br"),r.className="has-text-weight-bold is-size-5"},m(e,t){insert(e,a,t),append(a,r),append(r,s),append(a,o),append(a,i),insert(e,n,t),insert(e,d,t)},p(e,t){(e.Object||e.data)&&c!==(c=t.key)&&setData(s,c),(e.Object||e.data)&&l!==(l=t.value)&&setData(i,l)},d(e){e&&(detachNode(a),detachNode(n),detachNode(d))}}}function create_each_block_1(e,t){var a,r=t.value&&!t.omitted_field.includes(t.key)&&create_if_block_4(e,t);return{c(){r&&r.c(),a=createComment()},m(e,t){r&&r.m(e,t),insert(e,a,t)},p(t,s){s.value&&!s.omitted_field.includes(s.key)?r?r.p(t,s):((r=create_if_block_4(e,s)).c(),r.m(a.parentNode,a)):r&&(r.d(1),r=null)},d(e){r&&r.d(e),e&&detachNode(a)}}}function create_if_block_3(e,t){var a,r,s,o=t.key;return{c(){a=createElement("option"),r=createText(o),a.__value=s=t.key,a.value=a.__value},m(e,t){insert(e,a,t),append(a,r)},p(e,t){(e.Object||e.data)&&o!==(o=t.key)&&setData(r,o),(e.Object||e.data)&&s!==(s=t.key)&&(a.__value=s),a.value=a.__value},d(e){e&&detachNode(a)}}}function create_each_block$1(e,t){var a,r=!t.omitted_field.includes(t.key)&&create_if_block_3(e,t);return{c(){r&&r.c(),a=createComment()},m(e,t){r&&r.m(e,t),insert(e,a,t)},p(t,s){s.omitted_field.includes(s.key)?r&&(r.d(1),r=null):r?r.p(t,s):((r=create_if_block_3(e,s)).c(),r.m(a.parentNode,a))},d(e){r&&r.d(e),e&&detachNode(a)}}}function create_if_block_1$1(e,t){var a,r,s,o,i,n,d={},c={field_name:t.field_name,result_symptoms:t.result_symptoms};void 0!==t.data&&(c.data=t.data,d.data=!0),void 0!==t.tracker&&(c.tracker=t.tracker,d.tracker=!0),void 0!==t.remedy_found&&(c.remedy_found=t.remedy_found,d.remedy_found=!0);var l=new RemedyFound({root:e.root,store:e.store,data:c,_bind(t,a){var r={};!d.data&&t.data&&(r.data=a.data),!d.tracker&&t.tracker&&(r.tracker=a.tracker),!d.remedy_found&&t.remedy_found&&(r.remedy_found=a.remedy_found),e._set(r),d={}}});return e.root._beforecreate.push(()=>{l._bind({data:1,tracker:1,remedy_found:1},l.get())}),l.on("back",function(t){e.back()}),l.on("showSymptoms",function(t){e.fire("showSymptoms",t)}),l.on("saveHistory",function(t){e.saveHistory()}),{c(){a=createElement("div"),r=createElement("div"),l._fragment.c(),s=createText("\r\n      "),o=createElement("div"),i=createText("\r\n    "),n=createElement("br"),r.className="column",o.className="column",a.className="columns"},m(e,t){insert(e,a,t),append(a,r),l._mount(r,null),append(a,s),append(a,o),insert(e,i,t),insert(e,n,t)},p(e,a){t=a;var r={};e.field_name&&(r.field_name=t.field_name),e.result_symptoms&&(r.result_symptoms=t.result_symptoms),!d.data&&e.data&&(r.data=t.data,d.data=void 0!==t.data),!d.tracker&&e.tracker&&(r.tracker=t.tracker,d.tracker=void 0!==t.tracker),!d.remedy_found&&e.remedy_found&&(r.remedy_found=t.remedy_found,d.remedy_found=void 0!==t.remedy_found),l._set(r),d={}},d(e){e&&detachNode(a),l.destroy(),e&&(detachNode(i),detachNode(n))}}}function create_if_block$1(e,t){var a={},r={reset_disabled:"true"};void 0!==t.data&&(r.data=t.data,a.data=!0),void 0!==t.remedies&&(r.remedies=t.remedies,a.remedies=!0),void 0!==t.filterFields&&(r.filterFields=t.filterFields,a.filterFields=!0),void 0!==t.selected_section&&(r.selected_section=t.selected_section,a.selected_section=!0);var s=new Sections({root:e.root,store:e.store,data:r,_bind(t,r){var s={};!a.data&&t.data&&(s.data=r.data),!a.remedies&&t.remedies&&(s.remedies=r.remedies),!a.filterFields&&t.filterFields&&(s.filterFields=r.filterFields),!a.selected_section&&t.selected_section&&(s.selected_section=r.selected_section),e._set(s),a={}}});return e.root._beforecreate.push(()=>{s._bind({data:1,remedies:1,filterFields:1,selected_section:1},s.get())}),{c(){s._fragment.c()},m(e,t){s._mount(e,t)},p(e,r){t=r;var o={};!a.data&&e.data&&(o.data=t.data,a.data=void 0!==t.data),!a.remedies&&e.remedies&&(o.remedies=t.remedies,a.remedies=void 0!==t.remedies),!a.filterFields&&e.filterFields&&(o.filterFields=t.filterFields,a.filterFields=void 0!==t.filterFields),!a.selected_section&&e.selected_section&&(o.selected_section=t.selected_section,a.selected_section=void 0!==t.selected_section),s._set(o),a={}},d(e){s.destroy(e)}}}function ViewHistoryEdit(e){init(this,e),this._state=assign(assign(assign({Object:Object},this.store._init(["nav"])),data$1()),e.data),this.store._add(this,["nav"]),this._recompute({$nav:1,remedy_found:1,remedies:1,omitted_field:1,loadSymptoms:1},this._state),this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment$1(this,this._state),this.root._oncreate.push(()=>{oncreate$1.call(this),this.fire("update",{changed:assignTrue({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}function entityId$2({$nav:e}){return e&&e.params[0]}function data$2(){return{is_loading:!1,is_error:!1,error_message:"",pane_height:500,data:{},meta:{},tracker:{saving:!1,saved:!1,error:!1},page:{title:"View Case History",subtitle:"Case History details",icon:"building-o",icon_badge:"pencil"},active_tab:"static_view",tabs:[{icon:"info-circle",name:"static_view",title:"Static"},{icon:"pencil",name:"edit_view",title:"Edit Case History"}]}}assign(ViewHistoryEdit.prototype,proto),assign(ViewHistoryEdit.prototype,methods$1),ViewHistoryEdit.prototype._recompute=function(e,t){e.$nav&&this._differs(t.entityId,t.entityId=entityId$1(t))&&(e.entityId=!0),e.remedy_found&&this._differs(t.has_searched,t.has_searched=has_searched(t))&&(e.has_searched=!0),(e.remedies||e.omitted_field)&&this._differs(t.filterFields,t.filterFields=filterFields$1(t))&&(e.filterFields=!0),e.remedies&&this._differs(t.loadSymptoms,t.loadSymptoms=loadSymptoms$1(t))&&(e.loadSymptoms=!0),e.loadSymptoms&&this._differs(t.searchable_withkey,t.searchable_withkey=searchable_withkey(t))&&(e.searchable_withkey=!0),(e.loadSymptoms||e.omitted_field)&&this._differs(t.searchable_symp,t.searchable_symp=searchable_symp(t))&&(e.searchable_symp=!0)};var methods$2={};function oncreate$2(){this.on("heightChange",({height:e})=>{this.set({pane_height:e})});var{entityId:e}=this.get();this.on("state",({changed:e,current:t,previous:a})=>{console.log(t)})}function create_main_fragment$2(e,t){var a,r,s,o,i,n,d,c,l={},_=new Icon({root:e.root,store:e.store,data:{icon:"long-arrow-left",size:"small"}}),m={page:t.page},p=new PageTitle({root:e.root,store:e.store,slots:{default:createFragment()},data:m}),u={tabs:t.tabs};void 0!==t.active_tab&&(u.active_tab=t.active_tab,l.active_tab=!0);var h=new LabsTabs({root:e.root,store:e.store,data:u,_bind(t,a){var r={};!l.active_tab&&t.active_tab&&(r.active_tab=a.active_tab),e._set(r),l={}}});e.root._beforecreate.push(()=>{h._bind({active_tab:1},h.get())});var f="static_view"==t.active_tab&&create_if_block_1$2(e,t),g="edit_view"==t.active_tab&&create_if_block$2(e,t),v={is_loading:t.is_loading,is_error:t.is_error,error_message:t.error_message,class:"has-fullpage-tabs has-multilevel-tabs"},y=new ViewScaffold({root:e.root,store:e.store,slots:{default:createFragment()},data:v});return{c(){a=createElement("div"),r=createElement("a"),_._fragment.c(),s=createText("\r\n      "),(o=createElement("span")).textContent="Back to All Histories",p._fragment.c(),i=createText("\r\n\r\n  "),h._fragment.c(),n=createText("\r\n\r\n    \r\n        \r\n        "),f&&f.c(),d=createText("\r\n      \r\n        \r\n        "),g&&g.c(),c=createComment(),y._fragment.c(),r.className="button is-info is-pulled-right",r.href="#history",a.className="page-content"},m(e,t){insert(e,a,t),append(p._slotted.default,r),_._mount(r,null),append(r,s),append(r,o),p._mount(a,null),append(a,i),h._mount(y._slotted.default,null),append(y._slotted.default,n),f&&f.m(y._slotted.default,null),append(y._slotted.default,d),g&&g.m(y._slotted.default,null),append(y._slotted.default,c),y._mount(a,null)},p(a,r){t=r;var s={};a.page&&(s.page=t.page),p._set(s);var o={};a.tabs&&(o.tabs=t.tabs),!l.active_tab&&a.active_tab&&(o.active_tab=t.active_tab,l.active_tab=void 0!==t.active_tab),h._set(o),l={},"static_view"==t.active_tab?f?f.p(a,t):((f=create_if_block_1$2(e,t)).c(),f.m(d.parentNode,d)):f&&(f.d(1),f=null),"edit_view"==t.active_tab?g?g.p(a,t):((g=create_if_block$2(e,t)).c(),g.m(c.parentNode,c)):g&&(g.d(1),g=null);var i={};a.is_loading&&(i.is_loading=t.is_loading),a.is_error&&(i.is_error=t.is_error),a.error_message&&(i.error_message=t.error_message),y._set(i)},d(e){e&&detachNode(a),_.destroy(),p.destroy(),h.destroy(),f&&f.d(),g&&g.d(),y.destroy()}}}function create_if_block_1$2(e,t){var a={},r={};void 0!==t.is_error&&(r.is_error=t.is_error,a.is_error=!0),void 0!==t.error_message&&(r.error_message=t.error_message,a.error_message=!0);var s=new ViewHistoryStatic({root:e.root,store:e.store,data:r,_bind(t,r){var s={};!a.is_error&&t.is_error&&(s.is_error=r.is_error),!a.error_message&&t.error_message&&(s.error_message=r.error_message),e._set(s),a={}}});return e.root._beforecreate.push(()=>{s._bind({is_error:1,error_message:1},s.get())}),{c(){s._fragment.c()},m(e,t){s._mount(e,t)},p(e,r){t=r;var o={};!a.is_error&&e.is_error&&(o.is_error=t.is_error,a.is_error=void 0!==t.is_error),!a.error_message&&e.error_message&&(o.error_message=t.error_message,a.error_message=void 0!==t.error_message),s._set(o),a={}},d(e){s.destroy(e)}}}function create_if_block$2(e,t){var a={},r={};void 0!==t.is_error&&(r.is_error=t.is_error,a.is_error=!0),void 0!==t.error_message&&(r.error_message=t.error_message,a.error_message=!0);var s=new ViewHistoryEdit({root:e.root,store:e.store,data:r,_bind(t,r){var s={};!a.is_error&&t.is_error&&(s.is_error=r.is_error),!a.error_message&&t.error_message&&(s.error_message=r.error_message),e._set(s),a={}}});return e.root._beforecreate.push(()=>{s._bind({is_error:1,error_message:1},s.get())}),{c(){s._fragment.c()},m(e,t){s._mount(e,t)},p(e,r){t=r;var o={};!a.is_error&&e.is_error&&(o.is_error=t.is_error,a.is_error=void 0!==t.is_error),!a.error_message&&e.error_message&&(o.error_message=t.error_message,a.error_message=void 0!==t.error_message),s._set(o),a={}},d(e){s.destroy(e)}}}function ViewHistory(e){init(this,e),this._state=assign(assign(this.store._init(["nav"]),data$2()),e.data),this.store._add(this,["nav"]),this._recompute({$nav:1},this._state),this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment$2(this,this._state),this.root._oncreate.push(()=>{oncreate$2.call(this),this.fire("update",{changed:assignTrue({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}assign(ViewHistory.prototype,proto),assign(ViewHistory.prototype,methods$2),ViewHistory.prototype._recompute=function(e,t){e.$nav&&this._differs(t.entityId,t.entityId=entityId$2(t))&&(e.entityId=!0)};export default ViewHistory;
//# sourceMappingURL=ViewHistory.js.map
