{"version":3,"file":"chunk-7dbeb9cc.js","sources":["../../../src/models/treatments.js","../../../src/components/views/search/helpers/Treatment.html"],"sourcesContent":["import baseModel from './basemodel.js';\r\n\r\nexport default new class extends baseModel {\r\n  constructor() {\r\n    super();\r\n    this.apiEndpoint = '/treatments';\r\n  }\r\n  \r\n  createWithCase(payload) {\r\n    return this.create(payload, this.apiEndpoint + '/create_with_case');\r\n  }\r\n\r\n};","<form on:submit=\"saveTreatment(event)\">\r\n  <Panel title=\"{prescribe ? ' ' : 'Select Remedy'}\" has_toolbar={true} >\r\n    <div slot='toolbar'>\r\n      {#if prescribe}\r\n      <span class=\"\">\r\n        <button class=\"button is-primary\" type=\"button\" on:click=\"set({add_remedy: false, selected_remedies: []})\">Cancel</button>\r\n      </span>\r\n      {/if}\r\n      <button type=\"button\" class=\"button is-warning\" on:click=\"reset()\" >\r\n        <span class=\"icon is-small\"><i class=\"fa fa-refresh\"></i></span>\r\n        Reset\r\n      </button>\r\n    </div>\r\n    \r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        <div class=\"control\">\r\n          <label class=\"radio\">\r\n            <input type=\"radio\" name=\"\" bind:group=\"remedy_type\" value=\"suggested\">\r\n            Suggested remedy\r\n          </label>\r\n          <label class=\"radio\">\r\n            <input type=\"radio\" name=\"\" bind:group=\"remedy_type\" value=\"all\">\r\n            All remedy\r\n          </label>\r\n        </div>\r\n      </div>  \r\n    </div>\r\n    \r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n\r\n        <div class=\"field\">\r\n          <div class=\"control\">\r\n            <label class=\"label\">Remedy name</label>\r\n            <div class=\"select is-fullwidth {treatment.remedy == '' && !selected_remedies.length ? 'is-danger': ''}\">\r\n              {#if remedy_type == 'suggested'}\r\n                <select bind:value=\"treatment.remedy\">\r\n                  <option value=\"\">Select...</option>          \r\n                  {#each Object.entries(remedy_found) as [key, value], i }\r\n                    <option value=\"{key}\">{key}</option>\r\n                  {/each}\r\n                </select>\r\n              {/if}\r\n              {#if remedy_type == 'all'}\r\n                <select bind:value=\"treatment.remedy\">\r\n                  <option value=\"\">Select...</option>          \r\n                  {#each remedy_names as key, i }\r\n                    <option value=\"{key}\">{key}</option>\r\n                  {/each}\r\n                </select>\r\n              {/if}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"field\">\r\n          <div class=\"control\">\r\n            <label class=\"label\">Type</label>\r\n            <div class=\"select is-fullwidth\">\r\n              <select bind:value=\"treatment.type\">\r\n                {#each types as rule}\r\n                <option value=\"{rule}\">{rule}</option>\r\n                {/each}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"column\">\r\n        \r\n        <div class=\"field\">\r\n          <div class=\"control\">\r\n            <label class=\"label\">Power</label>\r\n            <div class=\"select is-fullwidth\">\r\n              <select bind:value=\"treatment.power\">\r\n                {#each powers as power}\r\n                <option value=\"{power}\">{power}</option>\r\n                {/each}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"field\">\r\n          <div class=\"control\">\r\n            <label class=\"label\">Taking rule</label>\r\n            <div class=\"select is-fullwidth\">\r\n              <select bind:value=\"treatment.taking_rule\">\r\n                {#each rules as rule}\r\n                <option value=\"{rule}\">{rule}</option>\r\n                {/each}\r\n              </select>\r\n            </div>  \r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"column\">\r\n        <div class=\"field\">\r\n          <div class=\"control\">\r\n            <label class=\"label\">Quantity</label>\r\n            <div class=\"select is-fullwidth\">\r\n              <select bind:value=\"treatment.quantity\">\r\n                {#each quantities as quantity}\r\n                <option value=\"{quantity}\">{quantity}</option>\r\n                {/each}\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"field\">\r\n          <div class=\"control\">\r\n            <label class=\"label\">&nbsp;</label>\r\n              <button class=\"button is-info is-pulled-right\" type=\"button\" on:click=\"addRemedy()\" disabled={disable_add}>Add</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    \r\n    <div class=\"columns\">\r\n      <div class=\"column\">\r\n        <table class=\"table has-background-warning-light\">\r\n          <tr>\r\n            <th>Remedy name</th>\r\n            <th>Power</th>\r\n            <th>Taking Rule</th>\r\n            <th>Quantity</th>\r\n            <th>Type</th>\r\n            <th></th>\r\n          </tr>\r\n          {#each selected_remedies as {remedy, power, taking_rule, quantity, type}, i}\r\n            <tr>\r\n              <td>{remedy}</td>\r\n              <td>{power}</td>\r\n              <td>{taking_rule}</td>\r\n              <td>{quantity}</td>\r\n              <td>{type}</td>\r\n              <td></td>\r\n              <td>\r\n                <span class=\"icon has-text-danger is-pulled-right\" style=\"cursor:pointer\" data-tooltip=\"Remove\" on:click=\"deleteItem(i)\"><i class=\"fa fa-trash\"></i></span>\r\n              </td>\r\n            </tr>\r\n          {/each}\r\n        </table>\r\n      </div>\r\n    </div>\r\n      \r\n      \r\n    <div class=\"field\">\r\n      <p class=\"control\">\r\n        \r\n        <label class=\"subtitle is-size-6 has-text-grey\" style=\"line-height: 2rem;\"> By saving treatment, whole case will be saved </label>\r\n        \r\n        <!-- <ConfirmButton\r\n        text=\"Save Treatment\"\r\n        color=\"primary\"\r\n        classes=\"is-pulled-right\"\r\n        icon=\"save\"\r\n        icon_only=\"{false}\"\r\n        bind:disabled\r\n        on:do=\"saveTreatment(e)\"\r\n      /> -->\r\n    \r\n        <SubmitButton bind:disabled classes=\"is-primary is-pulled-right\" icon=\"save\" icon_size=\"small\" text=\"Save Treatment\" bind:tracker />\r\n      </p>\r\n    </div>\r\n      \r\n  </Panel>\r\n</form>\r\n\r\n<script>\r\n\r\n  import { Panel } from '@kws3/helpers';\r\n  import { SubmitButton, ConfirmButton } from '@kws3/buttons';\r\n\r\n  export default {\r\n    components: {\r\n      Panel, SubmitButton, ConfirmButton\r\n    },\r\n    data(){\r\n      return{\r\n        remedy_found: {},\r\n        powers: ['1x', '3x', 6, 30, 200, '1m', '10m', '50m', 'cm'],\r\n        quantities: ['1d', '2d', 'half ounce', '1 ounce', '4 ounce'],\r\n        types: ['liquid', 'pill', 'biochemic', 'mother tencture'],\r\n        rules: [\r\n          '10-2',\r\n          '10-3',\r\n          '5-2'\r\n        ],\r\n        remedy_type: 'suggested',\r\n        prescribe: false,\r\n        treatment: {\r\n          remedy: '',\r\n          power: 200,\r\n          taking_rule: '10-2',\r\n          type: 'Liquid',\r\n          quantity: '1d'\r\n        },\r\n        selected_remedies: [],\r\n        remedy_names: [],\r\n        result_symptoms: '',\r\n        tracker: {}\r\n      }\r\n    },\r\n    computed: {\r\n      disabled: ({data, selected_remedies}) => !data.patient || selected_remedies.length == 0,\r\n      disable_add: ({treatment}) => !treatment.remedy,\r\n    },\r\n    oncreate(){\r\n      let {prescribe} = this.get();\r\n      if(prescribe){\r\n        this.set({remedy_type: 'all'})\r\n      }\r\n    },\r\n    methods: {\r\n      saveTreatment(e){\r\n        e.preventDefault();\r\n        let {selected_remedies} = this.get();\r\n        this.fire('saveTreatment', selected_remedies);\r\n\r\n      },\r\n      addRemedy(){\r\n        let {selected_remedies, treatment} = this.get();\r\n        \r\n        if(treatment.remedy){\r\n          selected_remedies.push(Object.assign({}, treatment));\r\n          this.set({selected_remedies})        \r\n        }\r\n      },\r\n      reset(){\r\n        this.set({selected_remedies: [] })\r\n      },\r\n      deleteItem(i) {\r\n        let { selected_remedies } = this.get();\r\n        selected_remedies.splice(i,1)\r\n        this.set({selected_remedies});\r\n      },\r\n    }\r\n  }\r\n</script>"],"names":["baseModel","[object Object]","super","this","apiEndpoint","payload","create","data","selected_remedies","patient","length","treatment","remedy","remedy_found","powers","quantities","types","rules","remedy_type","prescribe","power","taking_rule","type","quantity","remedy_names","result_symptoms","tracker","e","preventDefault","get","fire","push","Object","assign","set","i","splice","deleteItem","reset","addRemedy","disabled","saveTreatment","event","disable_add","add_remedy","entries","key","rule"],"mappings":"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"}