var K_ENV="prod",K_ENV_DEV="dev",K_ENV_TEST="test",K_ENV_PROD="prod";import{w as addListener,a as append,b as assign,c as assignTrue,z as createComment,d as createElement,e as createFragment,f as createText,g as detachNode,h as flush,i as init,j as insert,l as proto,m as removeFromStore,x as removeListener,y as setAttribute,B as setData,$ as toNumber,n as Icon,E as Notification,D as Panel,o as Message,q as ViewScaffold,r as PageTitle}from"./chunk-4772d5c0.js";import{b as SubmitButton}from"./chunk-2d6b7b97.js";import{a as Model}from"./chunk-e309d8c9.js";function entityId({$nav:e}){return e&&e.params[0]}function data(){return{is_loading:!0,is_error:!1,error_message:"",data:{},meta:{},tracker:{saving:!1,saved:!1,error:!1},page:{title:"View Patient",subtitle:"Modify Patient details",icon:"building-o",icon_badge:"pencil"}}}var methods={load(){var{entityId:e}=this.get();this.set({is_loading:!0,is_error:!1}),Model.getOne(e).then(e=>{this.set({is_loading:!1,meta:e._meta,data:e.response})}).catch(e=>{var t="";void 0!==e&&void 0!==e.response&&void 0!==e.response.records&&(t=e.response.records.userMessage),this.set({is_error:!0,is_loading:!1,error_message:t})})},save(){var{data:e,entityId:t,tracker:a}=this.get();this.set({tracker:{saving:!0,saved:!1,error:!1}}),Model.save(t,e).then(e=>{this.set({data:e.response,tracker:{saving:!1,saved:!0,error:!1}}),setTimeout(()=>{a.saved=!1,this.set({tracker:a})},1500)}).catch(e=>{"406"==e.response.records.errorCode?this.set({error_message:"The username you entered already exists, Please try another one"}):this.set({error_message:"There was an error updating premise"}),this.set({tracker:{saving:!1,saved:!1,error:!0}}),setTimeout(()=>{this.set({tracker:{error:!1}})},1500)})}};function oncreate(){var{entityId:e}=this.get();this.on("state",({changed:e,current:t,previous:a})=>{if(e.$nav){var{$nav:r}=t;"ViewPatient"==r.activeView&&this.load()}}),this.on("save",e=>{e.preventDefault();var{data:t}=this.get();""!=t.name&&(this.set({data:t}),this.save())}),this.load()}function create_main_fragment(e,t){var a,r,n,s,i,d,o,l=new Icon({root:e.root,store:e.store,data:{icon:"long-arrow-left",size:"small"}}),c={page:t.page},p=new PageTitle({root:e.root,store:e.store,slots:{default:createFragment()},data:c}),m=t.tracker.error&&create_if_block_1(e,t),u=!t.is_loading&&create_if_block(e,t),_={is_loading:t.is_loading,is_error:t.is_error,error_message:t.error_message},g=new ViewScaffold({root:e.root,store:e.store,slots:{default:createFragment()},data:_});return{c(){a=createElement("div"),r=createElement("a"),l._fragment.c(),n=createText("\r\n      "),(s=createElement("span")).textContent="Back to All Patients",p._fragment.c(),i=createText("\r\n\r\n  "),m&&m.c(),d=createText("\r\n\r\n    "),u&&u.c(),o=createComment(),g._fragment.c(),r.className="button is-info is-inverted is-pulled-right",r.href="#patients",a.className="page-content"},m(e,t){insert(e,a,t),append(p._slotted.default,r),l._mount(r,null),append(r,n),append(r,s),p._mount(a,null),append(a,i),m&&m.m(g._slotted.default,null),append(g._slotted.default,d),u&&u.m(g._slotted.default,null),append(g._slotted.default,o),g._mount(a,null)},p(t,a){var r={};t.page&&(r.page=a.page),p._set(r),a.tracker.error?m?m.p(t,a):((m=create_if_block_1(e,a)).c(),m.m(d.parentNode,d)):m&&(m.d(1),m=null),a.is_loading?u&&(u.d(1),u=null):u?u.p(t,a):((u=create_if_block(e,a)).c(),u.m(o.parentNode,o));var n={};t.is_loading&&(n.is_loading=a.is_loading),t.is_error&&(n.is_error=a.is_error),t.error_message&&(n.error_message=a.error_message),g._set(n)},d(e){e&&detachNode(a),l.destroy(),p.destroy(),m&&m.d(),u&&u.d(),g.destroy()}}}function create_if_block_1(e,t){var a,r=new Notification({root:e.root,store:e.store,slots:{default:createFragment()},data:{type:"danger"}});return{c(){a=createText(t.error_message),r._fragment.c()},m(e,t){append(r._slotted.default,a),r._mount(e,t)},p(e,t){e.error_message&&setData(a,t.error_message)},d(e){r.destroy(e)}}}function create_if_block(e,t){var a,r,n,s,i,d,o,l,c,p,m,u,_,g,v,h,f,b,N,E,k,x,y,T,w,P,L,V,A,C,I,F,G,D,M,S,$,j,B,K,O,q,z,R,U=!1,H=!1,J=!1,Q=!1,W={};function X(){U=!0,t.data.name=l.value,e.set({data:t.data}),U=!1}function Y(){H=!0,t.data.phone=g.value,e.set({data:t.data}),H=!1}function Z(){t.data.gender=k.__value,e.set({data:t.data})}function ee(){t.data.gender=w.__value,e.set({data:t.data})}function te(){J=!0,t.data.age=toNumber(G.value),e.set({data:t.data}),J=!1}function ae(){Q=!0,t.data.address=B.value,e.set({data:t.data}),Q=!1}var re={classes:"is-primary is-pulled-right",icon:"plus",icon_size:"small",text:"Update Patient"};void 0!==t.tracker&&(re.tracker=t.tracker,W.tracker=!0);var ne=new SubmitButton({root:e.root,store:e.store,data:re,_bind(t,a){var r={};!W.tracker&&t.tracker&&(r.tracker=a.tracker),e._set(r),W={}}});e.root._beforecreate.push(()=>{ne._bind({tracker:1},ne.get())});var se=new Panel({root:e.root,store:e.store,slots:{default:createFragment()},data:{title:"Patient Details"}});function ie(t){e.fire("save",t)}return{c(){a=createElement("form"),r=createElement("div"),n=createElement("div"),s=createElement("div"),i=createElement("p"),(d=createElement("label")).textContent="Name",o=createText("\r\n                  "),l=createElement("input"),c=createText("\r\n              "),p=createElement("div"),m=createElement("p"),(u=createElement("label")).textContent="Phone",_=createText("\r\n                  "),g=createElement("input"),v=createText("\r\n\r\n              "),h=createElement("div"),f=createElement("div"),(b=createElement("label")).textContent="Gender",N=createText("\r\n                  "),E=createElement("label"),k=createElement("input"),x=createText(" Male"),y=createText("\r\n                  "),T=createElement("label"),w=createElement("input"),P=createText(" Female"),L=createText("\r\n            "),V=createElement("div"),A=createElement("div"),C=createElement("p"),(I=createElement("label")).textContent="Age",F=createText("\r\n                  "),G=createElement("input"),D=createText("\r\n              "),M=createElement("div"),S=createElement("p"),($=createElement("label")).textContent="Address",j=createText("\r\n                  "),B=createElement("input"),K=createText("\r\n              "),O=createElement("div"),q=createElement("p"),(z=createElement("label")).textContent="Â ",R=createText("\r\n                  "),ne._fragment.c(),se._fragment.c(),d.className="label",addListener(l,"input",X),l.className="input",setAttribute(l,"type","text"),l.required=!0,i.className="control",s.className="field",u.className="label",addListener(g,"input",Y),g.className="input",setAttribute(g,"type","text"),m.className="control",p.className="field",b.className="label",e._bindingGroups[0].push(k),addListener(k,"change",Z),setAttribute(k,"type","radio"),k.__value="m",k.value=k.__value,E.className="radio",e._bindingGroups[0].push(w),addListener(w,"change",ee),setAttribute(w,"type","radio"),w.__value="f",w.value=w.__value,T.className="radio",f.className="control",h.className="field",n.className="column",I.className="label",addListener(G,"input",te),G.className="input",setAttribute(G,"type","number"),G.required=!0,G.autocomplete="off",C.className="control",A.className="field",$.className="label",addListener(B,"input",ae),B.className="input",setAttribute(B,"type","text"),B.autocomplete="off",S.className="control",M.className="field",z.className="label",q.className="control",O.className="field",V.className="column",r.className="columns",addListener(a,"submit",ie)},m(e,U){insert(e,a,U),append(se._slotted.default,r),append(r,n),append(n,s),append(s,i),append(i,d),append(i,o),append(i,l),l.value=t.data.name,append(n,c),append(n,p),append(p,m),append(m,u),append(m,_),append(m,g),g.value=t.data.phone,append(n,v),append(n,h),append(h,f),append(f,b),append(f,N),append(f,E),append(E,k),k.checked=k.__value===t.data.gender,append(E,x),append(f,y),append(f,T),append(T,w),w.checked=w.__value===t.data.gender,append(T,P),append(r,L),append(r,V),append(V,A),append(A,C),append(C,I),append(C,F),append(C,G),G.value=t.data.age,append(V,D),append(V,M),append(M,S),append(S,$),append(S,j),append(S,B),B.value=t.data.address,append(V,K),append(V,O),append(O,q),append(q,z),append(q,R),ne._mount(q,null),se._mount(a,null)},p(e,a){t=a,!U&&e.data&&(l.value=t.data.name),!H&&e.data&&(g.value=t.data.phone),e.data&&(k.checked=k.__value===t.data.gender),e.data&&(w.checked=w.__value===t.data.gender),!J&&e.data&&(G.value=t.data.age),!Q&&e.data&&(B.value=t.data.address);var r={};!W.tracker&&e.tracker&&(r.tracker=t.tracker,W.tracker=void 0!==t.tracker),ne._set(r),W={}},d(t){t&&detachNode(a),removeListener(l,"input",X),removeListener(g,"input",Y),e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(k),1),removeListener(k,"change",Z),e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(w),1),removeListener(w,"change",ee),removeListener(G,"input",te),removeListener(B,"input",ae),ne.destroy(),se.destroy(),removeListener(a,"submit",ie)}}}function ViewPatient(e){init(this,e),this._state=assign(assign(this.store._init(["nav"]),data()),e.data),this.store._add(this,["nav"]),this._recompute({$nav:1},this._state),this._bindingGroups=[[]],this._intro=!0,this._handlers.destroy=[removeFromStore],this._fragment=create_main_fragment(this,this._state),this.root._oncreate.push(()=>{oncreate.call(this),this.fire("update",{changed:assignTrue({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),flush(this))}assign(ViewPatient.prototype,proto),assign(ViewPatient.prototype,methods),ViewPatient.prototype._recompute=function(e,t){e.$nav&&this._differs(t.entityId,t.entityId=entityId(t))&&(e.entityId=!0)};export default ViewPatient;
//# sourceMappingURL=ViewPatient.js.map
